function Zg(t,e){for(var r=0;r<e.length;r++){const o=e[r];if(typeof o!="string"&&!Array.isArray(o)){for(const c in o)if(c!=="default"&&!(c in t)){const d=Object.getOwnPropertyDescriptor(o,c);d&&Object.defineProperty(t,c,d.get?d:{enumerable:!0,get:()=>o[c]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))o(c);new MutationObserver(c=>{for(const d of c)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&o(f)}).observe(document,{childList:!0,subtree:!0});function r(c){const d={};return c.integrity&&(d.integrity=c.integrity),c.referrerPolicy&&(d.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?d.credentials="include":c.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(c){if(c.ep)return;c.ep=!0;const d=r(c);fetch(c.href,d)}})();var kt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qg(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Jg(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function o(){return this instanceof o?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(o){var c=Object.getOwnPropertyDescriptor(t,o);Object.defineProperty(r,o,c.get?c:{enumerable:!0,get:function(){return t[o]}})}),r}var Dh={exports:{}},Ya={},Ph={exports:{}},Ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xo=Symbol.for("react.element"),e2=Symbol.for("react.portal"),t2=Symbol.for("react.fragment"),n2=Symbol.for("react.strict_mode"),r2=Symbol.for("react.profiler"),i2=Symbol.for("react.provider"),s2=Symbol.for("react.context"),o2=Symbol.for("react.forward_ref"),a2=Symbol.for("react.suspense"),l2=Symbol.for("react.memo"),c2=Symbol.for("react.lazy"),zd=Symbol.iterator;function u2(t){return t===null||typeof t!="object"?null:(t=zd&&t[zd]||t["@@iterator"],typeof t=="function"?t:null)}var Mh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Lh=Object.assign,Bh={};function as(t,e,r){this.props=t,this.context=e,this.refs=Bh,this.updater=r||Mh}as.prototype.isReactComponent={};as.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};as.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Fh(){}Fh.prototype=as.prototype;function Eu(t,e,r){this.props=t,this.context=e,this.refs=Bh,this.updater=r||Mh}var Cu=Eu.prototype=new Fh;Cu.constructor=Eu;Lh(Cu,as.prototype);Cu.isPureReactComponent=!0;var Wd=Array.isArray,jh=Object.prototype.hasOwnProperty,_u={current:null},Uh={key:!0,ref:!0,__self:!0,__source:!0};function Vh(t,e,r){var o,c={},d=null,f=null;if(e!=null)for(o in e.ref!==void 0&&(f=e.ref),e.key!==void 0&&(d=""+e.key),e)jh.call(e,o)&&!Uh.hasOwnProperty(o)&&(c[o]=e[o]);var x=arguments.length-2;if(x===1)c.children=r;else if(1<x){for(var w=Array(x),m=0;m<x;m++)w[m]=arguments[m+2];c.children=w}if(t&&t.defaultProps)for(o in x=t.defaultProps,x)c[o]===void 0&&(c[o]=x[o]);return{$$typeof:xo,type:t,key:d,ref:f,props:c,_owner:_u.current}}function d2(t,e){return{$$typeof:xo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Au(t){return typeof t=="object"&&t!==null&&t.$$typeof===xo}function h2(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var Hd=/\/+/g;function Ml(t,e){return typeof t=="object"&&t!==null&&t.key!=null?h2(""+t.key):e.toString(36)}function sa(t,e,r,o,c){var d=typeof t;(d==="undefined"||d==="boolean")&&(t=null);var f=!1;if(t===null)f=!0;else switch(d){case"string":case"number":f=!0;break;case"object":switch(t.$$typeof){case xo:case e2:f=!0}}if(f)return f=t,c=c(f),t=o===""?"."+Ml(f,0):o,Wd(c)?(r="",t!=null&&(r=t.replace(Hd,"$&/")+"/"),sa(c,e,r,"",function(m){return m})):c!=null&&(Au(c)&&(c=d2(c,r+(!c.key||f&&f.key===c.key?"":(""+c.key).replace(Hd,"$&/")+"/")+t)),e.push(c)),1;if(f=0,o=o===""?".":o+":",Wd(t))for(var x=0;x<t.length;x++){d=t[x];var w=o+Ml(d,x);f+=sa(d,e,r,w,c)}else if(w=u2(t),typeof w=="function")for(t=w.call(t),x=0;!(d=t.next()).done;)d=d.value,w=o+Ml(d,x++),f+=sa(d,e,r,w,c);else if(d==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return f}function Bo(t,e,r){if(t==null)return t;var o=[],c=0;return sa(t,o,"","",function(d){return e.call(r,d,c++)}),o}function f2(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Xt={current:null},oa={transition:null},g2={ReactCurrentDispatcher:Xt,ReactCurrentBatchConfig:oa,ReactCurrentOwner:_u};function zh(){throw Error("act(...) is not supported in production builds of React.")}Ae.Children={map:Bo,forEach:function(t,e,r){Bo(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Bo(t,function(){e++}),e},toArray:function(t){return Bo(t,function(e){return e})||[]},only:function(t){if(!Au(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ae.Component=as;Ae.Fragment=t2;Ae.Profiler=r2;Ae.PureComponent=Eu;Ae.StrictMode=n2;Ae.Suspense=a2;Ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=g2;Ae.act=zh;Ae.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var o=Lh({},t.props),c=t.key,d=t.ref,f=t._owner;if(e!=null){if(e.ref!==void 0&&(d=e.ref,f=_u.current),e.key!==void 0&&(c=""+e.key),t.type&&t.type.defaultProps)var x=t.type.defaultProps;for(w in e)jh.call(e,w)&&!Uh.hasOwnProperty(w)&&(o[w]=e[w]===void 0&&x!==void 0?x[w]:e[w])}var w=arguments.length-2;if(w===1)o.children=r;else if(1<w){x=Array(w);for(var m=0;m<w;m++)x[m]=arguments[m+2];o.children=x}return{$$typeof:xo,type:t.type,key:c,ref:d,props:o,_owner:f}};Ae.createContext=function(t){return t={$$typeof:s2,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:i2,_context:t},t.Consumer=t};Ae.createElement=Vh;Ae.createFactory=function(t){var e=Vh.bind(null,t);return e.type=t,e};Ae.createRef=function(){return{current:null}};Ae.forwardRef=function(t){return{$$typeof:o2,render:t}};Ae.isValidElement=Au;Ae.lazy=function(t){return{$$typeof:c2,_payload:{_status:-1,_result:t},_init:f2}};Ae.memo=function(t,e){return{$$typeof:l2,type:t,compare:e===void 0?null:e}};Ae.startTransition=function(t){var e=oa.transition;oa.transition={};try{t()}finally{oa.transition=e}};Ae.unstable_act=zh;Ae.useCallback=function(t,e){return Xt.current.useCallback(t,e)};Ae.useContext=function(t){return Xt.current.useContext(t)};Ae.useDebugValue=function(){};Ae.useDeferredValue=function(t){return Xt.current.useDeferredValue(t)};Ae.useEffect=function(t,e){return Xt.current.useEffect(t,e)};Ae.useId=function(){return Xt.current.useId()};Ae.useImperativeHandle=function(t,e,r){return Xt.current.useImperativeHandle(t,e,r)};Ae.useInsertionEffect=function(t,e){return Xt.current.useInsertionEffect(t,e)};Ae.useLayoutEffect=function(t,e){return Xt.current.useLayoutEffect(t,e)};Ae.useMemo=function(t,e){return Xt.current.useMemo(t,e)};Ae.useReducer=function(t,e,r){return Xt.current.useReducer(t,e,r)};Ae.useRef=function(t){return Xt.current.useRef(t)};Ae.useState=function(t){return Xt.current.useState(t)};Ae.useSyncExternalStore=function(t,e,r){return Xt.current.useSyncExternalStore(t,e,r)};Ae.useTransition=function(){return Xt.current.useTransition()};Ae.version="18.3.1";Ph.exports=Ae;var ue=Ph.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p2=ue,x2=Symbol.for("react.element"),m2=Symbol.for("react.fragment"),w2=Object.prototype.hasOwnProperty,y2=p2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,v2={key:!0,ref:!0,__self:!0,__source:!0};function Wh(t,e,r){var o,c={},d=null,f=null;r!==void 0&&(d=""+r),e.key!==void 0&&(d=""+e.key),e.ref!==void 0&&(f=e.ref);for(o in e)w2.call(e,o)&&!v2.hasOwnProperty(o)&&(c[o]=e[o]);if(t&&t.defaultProps)for(o in e=t.defaultProps,e)c[o]===void 0&&(c[o]=e[o]);return{$$typeof:x2,type:t,key:d,ref:f,props:c,_owner:y2.current}}Ya.Fragment=m2;Ya.jsx=Wh;Ya.jsxs=Wh;Dh.exports=Ya;var S=Dh.exports,Hh={exports:{}},fn={},Gh={exports:{}},Xh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(ne,fe){var xe=ne.length;ne.push(fe);e:for(;0<xe;){var Ke=xe-1>>>1,Ie=ne[Ke];if(0<c(Ie,fe))ne[Ke]=fe,ne[xe]=Ie,xe=Ke;else break e}}function r(ne){return ne.length===0?null:ne[0]}function o(ne){if(ne.length===0)return null;var fe=ne[0],xe=ne.pop();if(xe!==fe){ne[0]=xe;e:for(var Ke=0,Ie=ne.length,pn=Ie>>>1;Ke<pn;){var Je=2*(Ke+1)-1,Hr=ne[Je],ae=Je+1,dr=ne[ae];if(0>c(Hr,xe))ae<Ie&&0>c(dr,Hr)?(ne[Ke]=dr,ne[ae]=xe,Ke=ae):(ne[Ke]=Hr,ne[Je]=xe,Ke=Je);else if(ae<Ie&&0>c(dr,xe))ne[Ke]=dr,ne[ae]=xe,Ke=ae;else break e}}return fe}function c(ne,fe){var xe=ne.sortIndex-fe.sortIndex;return xe!==0?xe:ne.id-fe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;t.unstable_now=function(){return d.now()}}else{var f=Date,x=f.now();t.unstable_now=function(){return f.now()-x}}var w=[],m=[],C=1,_=null,O=3,P=!1,M=!1,F=!1,G=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(ne){for(var fe=r(m);fe!==null;){if(fe.callback===null)o(m);else if(fe.startTime<=ne)o(m),fe.sortIndex=fe.expirationTime,e(w,fe);else break;fe=r(m)}}function L(ne){if(F=!1,b(ne),!M)if(r(w)!==null)M=!0,it(J);else{var fe=r(m);fe!==null&&we(L,fe.startTime-ne)}}function J(ne,fe){M=!1,F&&(F=!1,k(q),q=-1),P=!0;var xe=O;try{for(b(fe),_=r(w);_!==null&&(!(_.expirationTime>fe)||ne&&!Le());){var Ke=_.callback;if(typeof Ke=="function"){_.callback=null,O=_.priorityLevel;var Ie=Ke(_.expirationTime<=fe);fe=t.unstable_now(),typeof Ie=="function"?_.callback=Ie:_===r(w)&&o(w),b(fe)}else o(w);_=r(w)}if(_!==null)var pn=!0;else{var Je=r(m);Je!==null&&we(L,Je.startTime-fe),pn=!1}return pn}finally{_=null,O=xe,P=!1}}var H=!1,U=null,q=-1,X=5,me=-1;function Le(){return!(t.unstable_now()-me<X)}function ce(){if(U!==null){var ne=t.unstable_now();me=ne;var fe=!0;try{fe=U(!0,ne)}finally{fe?ee():(H=!1,U=null)}}else H=!1}var ee;if(typeof N=="function")ee=function(){N(ce)};else if(typeof MessageChannel<"u"){var pe=new MessageChannel,W=pe.port2;pe.port1.onmessage=ce,ee=function(){W.postMessage(null)}}else ee=function(){G(ce,0)};function it(ne){U=ne,H||(H=!0,ee())}function we(ne,fe){q=G(function(){ne(t.unstable_now())},fe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ne){ne.callback=null},t.unstable_continueExecution=function(){M||P||(M=!0,it(J))},t.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<ne?Math.floor(1e3/ne):5},t.unstable_getCurrentPriorityLevel=function(){return O},t.unstable_getFirstCallbackNode=function(){return r(w)},t.unstable_next=function(ne){switch(O){case 1:case 2:case 3:var fe=3;break;default:fe=O}var xe=O;O=fe;try{return ne()}finally{O=xe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ne,fe){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var xe=O;O=ne;try{return fe()}finally{O=xe}},t.unstable_scheduleCallback=function(ne,fe,xe){var Ke=t.unstable_now();switch(typeof xe=="object"&&xe!==null?(xe=xe.delay,xe=typeof xe=="number"&&0<xe?Ke+xe:Ke):xe=Ke,ne){case 1:var Ie=-1;break;case 2:Ie=250;break;case 5:Ie=1073741823;break;case 4:Ie=1e4;break;default:Ie=5e3}return Ie=xe+Ie,ne={id:C++,callback:fe,priorityLevel:ne,startTime:xe,expirationTime:Ie,sortIndex:-1},xe>Ke?(ne.sortIndex=xe,e(m,ne),r(w)===null&&ne===r(m)&&(F?(k(q),q=-1):F=!0,we(L,xe-Ke))):(ne.sortIndex=Ie,e(w,ne),M||P||(M=!0,it(J))),ne},t.unstable_shouldYield=Le,t.unstable_wrapCallback=function(ne){var fe=O;return function(){var xe=O;O=fe;try{return ne.apply(this,arguments)}finally{O=xe}}}})(Xh);Gh.exports=Xh;var E2=Gh.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C2=ue,hn=E2;function K(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var $h=new Set,Zs={};function fi(t,e){Ji(t,e),Ji(t+"Capture",e)}function Ji(t,e){for(Zs[t]=e,t=0;t<e.length;t++)$h.add(e[t])}var or=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),pc=Object.prototype.hasOwnProperty,_2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Gd={},Xd={};function A2(t){return pc.call(Xd,t)?!0:pc.call(Gd,t)?!1:_2.test(t)?Xd[t]=!0:(Gd[t]=!0,!1)}function S2(t,e,r,o){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return o?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function b2(t,e,r,o){if(e===null||typeof e>"u"||S2(t,e,r,o))return!0;if(o)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function $t(t,e,r,o,c,d,f){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=o,this.attributeNamespace=c,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=d,this.removeEmptyString=f}var Pt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Pt[t]=new $t(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Pt[e]=new $t(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Pt[t]=new $t(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Pt[t]=new $t(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Pt[t]=new $t(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Pt[t]=new $t(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Pt[t]=new $t(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Pt[t]=new $t(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Pt[t]=new $t(t,5,!1,t.toLowerCase(),null,!1,!1)});var Su=/[\-:]([a-z])/g;function bu(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Su,bu);Pt[e]=new $t(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Su,bu);Pt[e]=new $t(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Su,bu);Pt[e]=new $t(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Pt[t]=new $t(t,1,!1,t.toLowerCase(),null,!1,!1)});Pt.xlinkHref=new $t("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Pt[t]=new $t(t,1,!1,t.toLowerCase(),null,!0,!0)});function Iu(t,e,r,o){var c=Pt.hasOwnProperty(e)?Pt[e]:null;(c!==null?c.type!==0:o||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(b2(e,r,c,o)&&(r=null),o||c===null?A2(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):c.mustUseProperty?t[c.propertyName]=r===null?c.type===3?!1:"":r:(e=c.attributeName,o=c.attributeNamespace,r===null?t.removeAttribute(e):(c=c.type,r=c===3||c===4&&r===!0?"":""+r,o?t.setAttributeNS(o,e,r):t.setAttribute(e,r))))}var ur=C2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Fo=Symbol.for("react.element"),Pi=Symbol.for("react.portal"),Mi=Symbol.for("react.fragment"),Tu=Symbol.for("react.strict_mode"),xc=Symbol.for("react.profiler"),Yh=Symbol.for("react.provider"),Kh=Symbol.for("react.context"),Nu=Symbol.for("react.forward_ref"),mc=Symbol.for("react.suspense"),wc=Symbol.for("react.suspense_list"),Ou=Symbol.for("react.memo"),Cr=Symbol.for("react.lazy"),qh=Symbol.for("react.offscreen"),$d=Symbol.iterator;function As(t){return t===null||typeof t!="object"?null:(t=$d&&t[$d]||t["@@iterator"],typeof t=="function"?t:null)}var rt=Object.assign,Ll;function Ds(t){if(Ll===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Ll=e&&e[1]||""}return`
`+Ll+t}var Bl=!1;function Fl(t,e){if(!t||Bl)return"";Bl=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(m){var o=m}Reflect.construct(t,[],e)}else{try{e.call()}catch(m){o=m}t.call(e.prototype)}else{try{throw Error()}catch(m){o=m}t()}}catch(m){if(m&&o&&typeof m.stack=="string"){for(var c=m.stack.split(`
`),d=o.stack.split(`
`),f=c.length-1,x=d.length-1;1<=f&&0<=x&&c[f]!==d[x];)x--;for(;1<=f&&0<=x;f--,x--)if(c[f]!==d[x]){if(f!==1||x!==1)do if(f--,x--,0>x||c[f]!==d[x]){var w=`
`+c[f].replace(" at new "," at ");return t.displayName&&w.includes("<anonymous>")&&(w=w.replace("<anonymous>",t.displayName)),w}while(1<=f&&0<=x);break}}}finally{Bl=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Ds(t):""}function I2(t){switch(t.tag){case 5:return Ds(t.type);case 16:return Ds("Lazy");case 13:return Ds("Suspense");case 19:return Ds("SuspenseList");case 0:case 2:case 15:return t=Fl(t.type,!1),t;case 11:return t=Fl(t.type.render,!1),t;case 1:return t=Fl(t.type,!0),t;default:return""}}function yc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Mi:return"Fragment";case Pi:return"Portal";case xc:return"Profiler";case Tu:return"StrictMode";case mc:return"Suspense";case wc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Kh:return(t.displayName||"Context")+".Consumer";case Yh:return(t._context.displayName||"Context")+".Provider";case Nu:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ou:return e=t.displayName||null,e!==null?e:yc(t.type)||"Memo";case Cr:e=t._payload,t=t._init;try{return yc(t(e))}catch{}}return null}function T2(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return yc(e);case 8:return e===Tu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Br(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Zh(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function N2(t){var e=Zh(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),o=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var c=r.get,d=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return c.call(this)},set:function(f){o=""+f,d.call(this,f)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return o},setValue:function(f){o=""+f},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function jo(t){t._valueTracker||(t._valueTracker=N2(t))}function Qh(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),o="";return t&&(o=Zh(t)?t.checked?"true":"false":t.value),t=o,t!==r?(e.setValue(t),!0):!1}function wa(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function vc(t,e){var r=e.checked;return rt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Yd(t,e){var r=e.defaultValue==null?"":e.defaultValue,o=e.checked!=null?e.checked:e.defaultChecked;r=Br(e.value!=null?e.value:r),t._wrapperState={initialChecked:o,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Jh(t,e){e=e.checked,e!=null&&Iu(t,"checked",e,!1)}function Ec(t,e){Jh(t,e);var r=Br(e.value),o=e.type;if(r!=null)o==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(o==="submit"||o==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Cc(t,e.type,r):e.hasOwnProperty("defaultValue")&&Cc(t,e.type,Br(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Kd(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var o=e.type;if(!(o!=="submit"&&o!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Cc(t,e,r){(e!=="number"||wa(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Ps=Array.isArray;function $i(t,e,r,o){if(t=t.options,e){e={};for(var c=0;c<r.length;c++)e["$"+r[c]]=!0;for(r=0;r<t.length;r++)c=e.hasOwnProperty("$"+t[r].value),t[r].selected!==c&&(t[r].selected=c),c&&o&&(t[r].defaultSelected=!0)}else{for(r=""+Br(r),e=null,c=0;c<t.length;c++){if(t[c].value===r){t[c].selected=!0,o&&(t[c].defaultSelected=!0);return}e!==null||t[c].disabled||(e=t[c])}e!==null&&(e.selected=!0)}}function _c(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(K(91));return rt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function qd(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(K(92));if(Ps(r)){if(1<r.length)throw Error(K(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Br(r)}}function ef(t,e){var r=Br(e.value),o=Br(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),o!=null&&(t.defaultValue=""+o)}function Zd(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function tf(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ac(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?tf(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Uo,nf=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,o,c){MSApp.execUnsafeLocalFunction(function(){return t(e,r,o,c)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Uo=Uo||document.createElement("div"),Uo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Uo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Qs(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Fs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},O2=["Webkit","ms","Moz","O"];Object.keys(Fs).forEach(function(t){O2.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Fs[e]=Fs[t]})});function rf(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Fs.hasOwnProperty(t)&&Fs[t]?(""+e).trim():e+"px"}function sf(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var o=r.indexOf("--")===0,c=rf(r,e[r],o);r==="float"&&(r="cssFloat"),o?t.setProperty(r,c):t[r]=c}}var R2=rt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Sc(t,e){if(e){if(R2[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(K(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(K(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(K(61))}if(e.style!=null&&typeof e.style!="object")throw Error(K(62))}}function bc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ic=null;function Ru(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Tc=null,Yi=null,Ki=null;function Qd(t){if(t=yo(t)){if(typeof Tc!="function")throw Error(K(280));var e=t.stateNode;e&&(e=Ja(e),Tc(t.stateNode,t.type,e))}}function of(t){Yi?Ki?Ki.push(t):Ki=[t]:Yi=t}function af(){if(Yi){var t=Yi,e=Ki;if(Ki=Yi=null,Qd(t),e)for(t=0;t<e.length;t++)Qd(e[t])}}function lf(t,e){return t(e)}function cf(){}var jl=!1;function uf(t,e,r){if(jl)return t(e,r);jl=!0;try{return lf(t,e,r)}finally{jl=!1,(Yi!==null||Ki!==null)&&(cf(),af())}}function Js(t,e){var r=t.stateNode;if(r===null)return null;var o=Ja(r);if(o===null)return null;r=o[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(K(231,e,typeof r));return r}var Nc=!1;if(or)try{var Ss={};Object.defineProperty(Ss,"passive",{get:function(){Nc=!0}}),window.addEventListener("test",Ss,Ss),window.removeEventListener("test",Ss,Ss)}catch{Nc=!1}function k2(t,e,r,o,c,d,f,x,w){var m=Array.prototype.slice.call(arguments,3);try{e.apply(r,m)}catch(C){this.onError(C)}}var js=!1,ya=null,va=!1,Oc=null,D2={onError:function(t){js=!0,ya=t}};function P2(t,e,r,o,c,d,f,x,w){js=!1,ya=null,k2.apply(D2,arguments)}function M2(t,e,r,o,c,d,f,x,w){if(P2.apply(this,arguments),js){if(js){var m=ya;js=!1,ya=null}else throw Error(K(198));va||(va=!0,Oc=m)}}function gi(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function df(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Jd(t){if(gi(t)!==t)throw Error(K(188))}function L2(t){var e=t.alternate;if(!e){if(e=gi(t),e===null)throw Error(K(188));return e!==t?null:t}for(var r=t,o=e;;){var c=r.return;if(c===null)break;var d=c.alternate;if(d===null){if(o=c.return,o!==null){r=o;continue}break}if(c.child===d.child){for(d=c.child;d;){if(d===r)return Jd(c),t;if(d===o)return Jd(c),e;d=d.sibling}throw Error(K(188))}if(r.return!==o.return)r=c,o=d;else{for(var f=!1,x=c.child;x;){if(x===r){f=!0,r=c,o=d;break}if(x===o){f=!0,o=c,r=d;break}x=x.sibling}if(!f){for(x=d.child;x;){if(x===r){f=!0,r=d,o=c;break}if(x===o){f=!0,o=d,r=c;break}x=x.sibling}if(!f)throw Error(K(189))}}if(r.alternate!==o)throw Error(K(190))}if(r.tag!==3)throw Error(K(188));return r.stateNode.current===r?t:e}function hf(t){return t=L2(t),t!==null?ff(t):null}function ff(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=ff(t);if(e!==null)return e;t=t.sibling}return null}var gf=hn.unstable_scheduleCallback,e0=hn.unstable_cancelCallback,B2=hn.unstable_shouldYield,F2=hn.unstable_requestPaint,dt=hn.unstable_now,j2=hn.unstable_getCurrentPriorityLevel,ku=hn.unstable_ImmediatePriority,pf=hn.unstable_UserBlockingPriority,Ea=hn.unstable_NormalPriority,U2=hn.unstable_LowPriority,xf=hn.unstable_IdlePriority,Ka=null,Kn=null;function V2(t){if(Kn&&typeof Kn.onCommitFiberRoot=="function")try{Kn.onCommitFiberRoot(Ka,t,void 0,(t.current.flags&128)===128)}catch{}}var Mn=Math.clz32?Math.clz32:H2,z2=Math.log,W2=Math.LN2;function H2(t){return t>>>=0,t===0?32:31-(z2(t)/W2|0)|0}var Vo=64,zo=4194304;function Ms(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ca(t,e){var r=t.pendingLanes;if(r===0)return 0;var o=0,c=t.suspendedLanes,d=t.pingedLanes,f=r&268435455;if(f!==0){var x=f&~c;x!==0?o=Ms(x):(d&=f,d!==0&&(o=Ms(d)))}else f=r&~c,f!==0?o=Ms(f):d!==0&&(o=Ms(d));if(o===0)return 0;if(e!==0&&e!==o&&!(e&c)&&(c=o&-o,d=e&-e,c>=d||c===16&&(d&4194240)!==0))return e;if(o&4&&(o|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=o;0<e;)r=31-Mn(e),c=1<<r,o|=t[r],e&=~c;return o}function G2(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function X2(t,e){for(var r=t.suspendedLanes,o=t.pingedLanes,c=t.expirationTimes,d=t.pendingLanes;0<d;){var f=31-Mn(d),x=1<<f,w=c[f];w===-1?(!(x&r)||x&o)&&(c[f]=G2(x,e)):w<=e&&(t.expiredLanes|=x),d&=~x}}function Rc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function mf(){var t=Vo;return Vo<<=1,!(Vo&4194240)&&(Vo=64),t}function Ul(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function mo(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Mn(e),t[e]=r}function $2(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var o=t.eventTimes;for(t=t.expirationTimes;0<r;){var c=31-Mn(r),d=1<<c;e[c]=0,o[c]=-1,t[c]=-1,r&=~d}}function Du(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var o=31-Mn(r),c=1<<o;c&e|t[o]&e&&(t[o]|=e),r&=~c}}var Me=0;function wf(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var yf,Pu,vf,Ef,Cf,kc=!1,Wo=[],Nr=null,Or=null,Rr=null,eo=new Map,to=new Map,Ar=[],Y2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function t0(t,e){switch(t){case"focusin":case"focusout":Nr=null;break;case"dragenter":case"dragleave":Or=null;break;case"mouseover":case"mouseout":Rr=null;break;case"pointerover":case"pointerout":eo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":to.delete(e.pointerId)}}function bs(t,e,r,o,c,d){return t===null||t.nativeEvent!==d?(t={blockedOn:e,domEventName:r,eventSystemFlags:o,nativeEvent:d,targetContainers:[c]},e!==null&&(e=yo(e),e!==null&&Pu(e)),t):(t.eventSystemFlags|=o,e=t.targetContainers,c!==null&&e.indexOf(c)===-1&&e.push(c),t)}function K2(t,e,r,o,c){switch(e){case"focusin":return Nr=bs(Nr,t,e,r,o,c),!0;case"dragenter":return Or=bs(Or,t,e,r,o,c),!0;case"mouseover":return Rr=bs(Rr,t,e,r,o,c),!0;case"pointerover":var d=c.pointerId;return eo.set(d,bs(eo.get(d)||null,t,e,r,o,c)),!0;case"gotpointercapture":return d=c.pointerId,to.set(d,bs(to.get(d)||null,t,e,r,o,c)),!0}return!1}function _f(t){var e=ri(t.target);if(e!==null){var r=gi(e);if(r!==null){if(e=r.tag,e===13){if(e=df(r),e!==null){t.blockedOn=e,Cf(t.priority,function(){vf(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function aa(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Dc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var o=new r.constructor(r.type,r);Ic=o,r.target.dispatchEvent(o),Ic=null}else return e=yo(r),e!==null&&Pu(e),t.blockedOn=r,!1;e.shift()}return!0}function n0(t,e,r){aa(t)&&r.delete(e)}function q2(){kc=!1,Nr!==null&&aa(Nr)&&(Nr=null),Or!==null&&aa(Or)&&(Or=null),Rr!==null&&aa(Rr)&&(Rr=null),eo.forEach(n0),to.forEach(n0)}function Is(t,e){t.blockedOn===e&&(t.blockedOn=null,kc||(kc=!0,hn.unstable_scheduleCallback(hn.unstable_NormalPriority,q2)))}function no(t){function e(c){return Is(c,t)}if(0<Wo.length){Is(Wo[0],t);for(var r=1;r<Wo.length;r++){var o=Wo[r];o.blockedOn===t&&(o.blockedOn=null)}}for(Nr!==null&&Is(Nr,t),Or!==null&&Is(Or,t),Rr!==null&&Is(Rr,t),eo.forEach(e),to.forEach(e),r=0;r<Ar.length;r++)o=Ar[r],o.blockedOn===t&&(o.blockedOn=null);for(;0<Ar.length&&(r=Ar[0],r.blockedOn===null);)_f(r),r.blockedOn===null&&Ar.shift()}var qi=ur.ReactCurrentBatchConfig,_a=!0;function Z2(t,e,r,o){var c=Me,d=qi.transition;qi.transition=null;try{Me=1,Mu(t,e,r,o)}finally{Me=c,qi.transition=d}}function Q2(t,e,r,o){var c=Me,d=qi.transition;qi.transition=null;try{Me=4,Mu(t,e,r,o)}finally{Me=c,qi.transition=d}}function Mu(t,e,r,o){if(_a){var c=Dc(t,e,r,o);if(c===null)ql(t,e,o,Aa,r),t0(t,o);else if(K2(c,t,e,r,o))o.stopPropagation();else if(t0(t,o),e&4&&-1<Y2.indexOf(t)){for(;c!==null;){var d=yo(c);if(d!==null&&yf(d),d=Dc(t,e,r,o),d===null&&ql(t,e,o,Aa,r),d===c)break;c=d}c!==null&&o.stopPropagation()}else ql(t,e,o,null,r)}}var Aa=null;function Dc(t,e,r,o){if(Aa=null,t=Ru(o),t=ri(t),t!==null)if(e=gi(t),e===null)t=null;else if(r=e.tag,r===13){if(t=df(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Aa=t,null}function Af(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(j2()){case ku:return 1;case pf:return 4;case Ea:case U2:return 16;case xf:return 536870912;default:return 16}default:return 16}}var Ir=null,Lu=null,la=null;function Sf(){if(la)return la;var t,e=Lu,r=e.length,o,c="value"in Ir?Ir.value:Ir.textContent,d=c.length;for(t=0;t<r&&e[t]===c[t];t++);var f=r-t;for(o=1;o<=f&&e[r-o]===c[d-o];o++);return la=c.slice(t,1<o?1-o:void 0)}function ca(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ho(){return!0}function r0(){return!1}function gn(t){function e(r,o,c,d,f){this._reactName=r,this._targetInst=c,this.type=o,this.nativeEvent=d,this.target=f,this.currentTarget=null;for(var x in t)t.hasOwnProperty(x)&&(r=t[x],this[x]=r?r(d):d[x]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Ho:r0,this.isPropagationStopped=r0,this}return rt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ho)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ho)},persist:function(){},isPersistent:Ho}),e}var ls={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bu=gn(ls),wo=rt({},ls,{view:0,detail:0}),J2=gn(wo),Vl,zl,Ts,qa=rt({},wo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ts&&(Ts&&t.type==="mousemove"?(Vl=t.screenX-Ts.screenX,zl=t.screenY-Ts.screenY):zl=Vl=0,Ts=t),Vl)},movementY:function(t){return"movementY"in t?t.movementY:zl}}),i0=gn(qa),ep=rt({},qa,{dataTransfer:0}),tp=gn(ep),np=rt({},wo,{relatedTarget:0}),Wl=gn(np),rp=rt({},ls,{animationName:0,elapsedTime:0,pseudoElement:0}),ip=gn(rp),sp=rt({},ls,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),op=gn(sp),ap=rt({},ls,{data:0}),s0=gn(ap),lp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},up={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dp(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=up[t])?!!e[t]:!1}function Fu(){return dp}var hp=rt({},wo,{key:function(t){if(t.key){var e=lp[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ca(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?cp[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fu,charCode:function(t){return t.type==="keypress"?ca(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ca(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),fp=gn(hp),gp=rt({},qa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),o0=gn(gp),pp=rt({},wo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fu}),xp=gn(pp),mp=rt({},ls,{propertyName:0,elapsedTime:0,pseudoElement:0}),wp=gn(mp),yp=rt({},qa,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),vp=gn(yp),Ep=[9,13,27,32],ju=or&&"CompositionEvent"in window,Us=null;or&&"documentMode"in document&&(Us=document.documentMode);var Cp=or&&"TextEvent"in window&&!Us,bf=or&&(!ju||Us&&8<Us&&11>=Us),a0=" ",l0=!1;function If(t,e){switch(t){case"keyup":return Ep.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tf(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Li=!1;function _p(t,e){switch(t){case"compositionend":return Tf(e);case"keypress":return e.which!==32?null:(l0=!0,a0);case"textInput":return t=e.data,t===a0&&l0?null:t;default:return null}}function Ap(t,e){if(Li)return t==="compositionend"||!ju&&If(t,e)?(t=Sf(),la=Lu=Ir=null,Li=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return bf&&e.locale!=="ko"?null:e.data;default:return null}}var Sp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function c0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Sp[t.type]:e==="textarea"}function Nf(t,e,r,o){of(o),e=Sa(e,"onChange"),0<e.length&&(r=new Bu("onChange","change",null,r,o),t.push({event:r,listeners:e}))}var Vs=null,ro=null;function bp(t){Uf(t,0)}function Za(t){var e=ji(t);if(Qh(e))return t}function Ip(t,e){if(t==="change")return e}var Of=!1;if(or){var Hl;if(or){var Gl="oninput"in document;if(!Gl){var u0=document.createElement("div");u0.setAttribute("oninput","return;"),Gl=typeof u0.oninput=="function"}Hl=Gl}else Hl=!1;Of=Hl&&(!document.documentMode||9<document.documentMode)}function d0(){Vs&&(Vs.detachEvent("onpropertychange",Rf),ro=Vs=null)}function Rf(t){if(t.propertyName==="value"&&Za(ro)){var e=[];Nf(e,ro,t,Ru(t)),uf(bp,e)}}function Tp(t,e,r){t==="focusin"?(d0(),Vs=e,ro=r,Vs.attachEvent("onpropertychange",Rf)):t==="focusout"&&d0()}function Np(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Za(ro)}function Op(t,e){if(t==="click")return Za(e)}function Rp(t,e){if(t==="input"||t==="change")return Za(e)}function kp(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Bn=typeof Object.is=="function"?Object.is:kp;function io(t,e){if(Bn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),o=Object.keys(e);if(r.length!==o.length)return!1;for(o=0;o<r.length;o++){var c=r[o];if(!pc.call(e,c)||!Bn(t[c],e[c]))return!1}return!0}function h0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function f0(t,e){var r=h0(t);t=0;for(var o;r;){if(r.nodeType===3){if(o=t+r.textContent.length,t<=e&&o>=e)return{node:r,offset:e-t};t=o}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=h0(r)}}function kf(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?kf(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Df(){for(var t=window,e=wa();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=wa(t.document)}return e}function Uu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Dp(t){var e=Df(),r=t.focusedElem,o=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&kf(r.ownerDocument.documentElement,r)){if(o!==null&&Uu(r)){if(e=o.start,t=o.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var c=r.textContent.length,d=Math.min(o.start,c);o=o.end===void 0?d:Math.min(o.end,c),!t.extend&&d>o&&(c=o,o=d,d=c),c=f0(r,d);var f=f0(r,o);c&&f&&(t.rangeCount!==1||t.anchorNode!==c.node||t.anchorOffset!==c.offset||t.focusNode!==f.node||t.focusOffset!==f.offset)&&(e=e.createRange(),e.setStart(c.node,c.offset),t.removeAllRanges(),d>o?(t.addRange(e),t.extend(f.node,f.offset)):(e.setEnd(f.node,f.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Pp=or&&"documentMode"in document&&11>=document.documentMode,Bi=null,Pc=null,zs=null,Mc=!1;function g0(t,e,r){var o=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Mc||Bi==null||Bi!==wa(o)||(o=Bi,"selectionStart"in o&&Uu(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),zs&&io(zs,o)||(zs=o,o=Sa(Pc,"onSelect"),0<o.length&&(e=new Bu("onSelect","select",null,e,r),t.push({event:e,listeners:o}),e.target=Bi)))}function Go(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Fi={animationend:Go("Animation","AnimationEnd"),animationiteration:Go("Animation","AnimationIteration"),animationstart:Go("Animation","AnimationStart"),transitionend:Go("Transition","TransitionEnd")},Xl={},Pf={};or&&(Pf=document.createElement("div").style,"AnimationEvent"in window||(delete Fi.animationend.animation,delete Fi.animationiteration.animation,delete Fi.animationstart.animation),"TransitionEvent"in window||delete Fi.transitionend.transition);function Qa(t){if(Xl[t])return Xl[t];if(!Fi[t])return t;var e=Fi[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in Pf)return Xl[t]=e[r];return t}var Mf=Qa("animationend"),Lf=Qa("animationiteration"),Bf=Qa("animationstart"),Ff=Qa("transitionend"),jf=new Map,p0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function jr(t,e){jf.set(t,e),fi(e,[t])}for(var $l=0;$l<p0.length;$l++){var Yl=p0[$l],Mp=Yl.toLowerCase(),Lp=Yl[0].toUpperCase()+Yl.slice(1);jr(Mp,"on"+Lp)}jr(Mf,"onAnimationEnd");jr(Lf,"onAnimationIteration");jr(Bf,"onAnimationStart");jr("dblclick","onDoubleClick");jr("focusin","onFocus");jr("focusout","onBlur");jr(Ff,"onTransitionEnd");Ji("onMouseEnter",["mouseout","mouseover"]);Ji("onMouseLeave",["mouseout","mouseover"]);Ji("onPointerEnter",["pointerout","pointerover"]);Ji("onPointerLeave",["pointerout","pointerover"]);fi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fi("onBeforeInput",["compositionend","keypress","textInput","paste"]);fi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ls="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Bp=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ls));function x0(t,e,r){var o=t.type||"unknown-event";t.currentTarget=r,M2(o,e,void 0,t),t.currentTarget=null}function Uf(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var o=t[r],c=o.event;o=o.listeners;e:{var d=void 0;if(e)for(var f=o.length-1;0<=f;f--){var x=o[f],w=x.instance,m=x.currentTarget;if(x=x.listener,w!==d&&c.isPropagationStopped())break e;x0(c,x,m),d=w}else for(f=0;f<o.length;f++){if(x=o[f],w=x.instance,m=x.currentTarget,x=x.listener,w!==d&&c.isPropagationStopped())break e;x0(c,x,m),d=w}}}if(va)throw t=Oc,va=!1,Oc=null,t}function Xe(t,e){var r=e[Uc];r===void 0&&(r=e[Uc]=new Set);var o=t+"__bubble";r.has(o)||(Vf(e,t,2,!1),r.add(o))}function Kl(t,e,r){var o=0;e&&(o|=4),Vf(r,t,o,e)}var Xo="_reactListening"+Math.random().toString(36).slice(2);function so(t){if(!t[Xo]){t[Xo]=!0,$h.forEach(function(r){r!=="selectionchange"&&(Bp.has(r)||Kl(r,!1,t),Kl(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Xo]||(e[Xo]=!0,Kl("selectionchange",!1,e))}}function Vf(t,e,r,o){switch(Af(e)){case 1:var c=Z2;break;case 4:c=Q2;break;default:c=Mu}r=c.bind(null,e,r,t),c=void 0,!Nc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(c=!0),o?c!==void 0?t.addEventListener(e,r,{capture:!0,passive:c}):t.addEventListener(e,r,!0):c!==void 0?t.addEventListener(e,r,{passive:c}):t.addEventListener(e,r,!1)}function ql(t,e,r,o,c){var d=o;if(!(e&1)&&!(e&2)&&o!==null)e:for(;;){if(o===null)return;var f=o.tag;if(f===3||f===4){var x=o.stateNode.containerInfo;if(x===c||x.nodeType===8&&x.parentNode===c)break;if(f===4)for(f=o.return;f!==null;){var w=f.tag;if((w===3||w===4)&&(w=f.stateNode.containerInfo,w===c||w.nodeType===8&&w.parentNode===c))return;f=f.return}for(;x!==null;){if(f=ri(x),f===null)return;if(w=f.tag,w===5||w===6){o=d=f;continue e}x=x.parentNode}}o=o.return}uf(function(){var m=d,C=Ru(r),_=[];e:{var O=jf.get(t);if(O!==void 0){var P=Bu,M=t;switch(t){case"keypress":if(ca(r)===0)break e;case"keydown":case"keyup":P=fp;break;case"focusin":M="focus",P=Wl;break;case"focusout":M="blur",P=Wl;break;case"beforeblur":case"afterblur":P=Wl;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":P=i0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":P=tp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":P=xp;break;case Mf:case Lf:case Bf:P=ip;break;case Ff:P=wp;break;case"scroll":P=J2;break;case"wheel":P=vp;break;case"copy":case"cut":case"paste":P=op;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":P=o0}var F=(e&4)!==0,G=!F&&t==="scroll",k=F?O!==null?O+"Capture":null:O;F=[];for(var N=m,b;N!==null;){b=N;var L=b.stateNode;if(b.tag===5&&L!==null&&(b=L,k!==null&&(L=Js(N,k),L!=null&&F.push(oo(N,L,b)))),G)break;N=N.return}0<F.length&&(O=new P(O,M,null,r,C),_.push({event:O,listeners:F}))}}if(!(e&7)){e:{if(O=t==="mouseover"||t==="pointerover",P=t==="mouseout"||t==="pointerout",O&&r!==Ic&&(M=r.relatedTarget||r.fromElement)&&(ri(M)||M[ar]))break e;if((P||O)&&(O=C.window===C?C:(O=C.ownerDocument)?O.defaultView||O.parentWindow:window,P?(M=r.relatedTarget||r.toElement,P=m,M=M?ri(M):null,M!==null&&(G=gi(M),M!==G||M.tag!==5&&M.tag!==6)&&(M=null)):(P=null,M=m),P!==M)){if(F=i0,L="onMouseLeave",k="onMouseEnter",N="mouse",(t==="pointerout"||t==="pointerover")&&(F=o0,L="onPointerLeave",k="onPointerEnter",N="pointer"),G=P==null?O:ji(P),b=M==null?O:ji(M),O=new F(L,N+"leave",P,r,C),O.target=G,O.relatedTarget=b,L=null,ri(C)===m&&(F=new F(k,N+"enter",M,r,C),F.target=b,F.relatedTarget=G,L=F),G=L,P&&M)t:{for(F=P,k=M,N=0,b=F;b;b=bi(b))N++;for(b=0,L=k;L;L=bi(L))b++;for(;0<N-b;)F=bi(F),N--;for(;0<b-N;)k=bi(k),b--;for(;N--;){if(F===k||k!==null&&F===k.alternate)break t;F=bi(F),k=bi(k)}F=null}else F=null;P!==null&&m0(_,O,P,F,!1),M!==null&&G!==null&&m0(_,G,M,F,!0)}}e:{if(O=m?ji(m):window,P=O.nodeName&&O.nodeName.toLowerCase(),P==="select"||P==="input"&&O.type==="file")var J=Ip;else if(c0(O))if(Of)J=Rp;else{J=Np;var H=Tp}else(P=O.nodeName)&&P.toLowerCase()==="input"&&(O.type==="checkbox"||O.type==="radio")&&(J=Op);if(J&&(J=J(t,m))){Nf(_,J,r,C);break e}H&&H(t,O,m),t==="focusout"&&(H=O._wrapperState)&&H.controlled&&O.type==="number"&&Cc(O,"number",O.value)}switch(H=m?ji(m):window,t){case"focusin":(c0(H)||H.contentEditable==="true")&&(Bi=H,Pc=m,zs=null);break;case"focusout":zs=Pc=Bi=null;break;case"mousedown":Mc=!0;break;case"contextmenu":case"mouseup":case"dragend":Mc=!1,g0(_,r,C);break;case"selectionchange":if(Pp)break;case"keydown":case"keyup":g0(_,r,C)}var U;if(ju)e:{switch(t){case"compositionstart":var q="onCompositionStart";break e;case"compositionend":q="onCompositionEnd";break e;case"compositionupdate":q="onCompositionUpdate";break e}q=void 0}else Li?If(t,r)&&(q="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(q="onCompositionStart");q&&(bf&&r.locale!=="ko"&&(Li||q!=="onCompositionStart"?q==="onCompositionEnd"&&Li&&(U=Sf()):(Ir=C,Lu="value"in Ir?Ir.value:Ir.textContent,Li=!0)),H=Sa(m,q),0<H.length&&(q=new s0(q,t,null,r,C),_.push({event:q,listeners:H}),U?q.data=U:(U=Tf(r),U!==null&&(q.data=U)))),(U=Cp?_p(t,r):Ap(t,r))&&(m=Sa(m,"onBeforeInput"),0<m.length&&(C=new s0("onBeforeInput","beforeinput",null,r,C),_.push({event:C,listeners:m}),C.data=U))}Uf(_,e)})}function oo(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Sa(t,e){for(var r=e+"Capture",o=[];t!==null;){var c=t,d=c.stateNode;c.tag===5&&d!==null&&(c=d,d=Js(t,r),d!=null&&o.unshift(oo(t,d,c)),d=Js(t,e),d!=null&&o.push(oo(t,d,c))),t=t.return}return o}function bi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function m0(t,e,r,o,c){for(var d=e._reactName,f=[];r!==null&&r!==o;){var x=r,w=x.alternate,m=x.stateNode;if(w!==null&&w===o)break;x.tag===5&&m!==null&&(x=m,c?(w=Js(r,d),w!=null&&f.unshift(oo(r,w,x))):c||(w=Js(r,d),w!=null&&f.push(oo(r,w,x)))),r=r.return}f.length!==0&&t.push({event:e,listeners:f})}var Fp=/\r\n?/g,jp=/\u0000|\uFFFD/g;function w0(t){return(typeof t=="string"?t:""+t).replace(Fp,`
`).replace(jp,"")}function $o(t,e,r){if(e=w0(e),w0(t)!==e&&r)throw Error(K(425))}function ba(){}var Lc=null,Bc=null;function Fc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var jc=typeof setTimeout=="function"?setTimeout:void 0,Up=typeof clearTimeout=="function"?clearTimeout:void 0,y0=typeof Promise=="function"?Promise:void 0,Vp=typeof queueMicrotask=="function"?queueMicrotask:typeof y0<"u"?function(t){return y0.resolve(null).then(t).catch(zp)}:jc;function zp(t){setTimeout(function(){throw t})}function Zl(t,e){var r=e,o=0;do{var c=r.nextSibling;if(t.removeChild(r),c&&c.nodeType===8)if(r=c.data,r==="/$"){if(o===0){t.removeChild(c),no(e);return}o--}else r!=="$"&&r!=="$?"&&r!=="$!"||o++;r=c}while(r);no(e)}function kr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function v0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var cs=Math.random().toString(36).slice(2),Yn="__reactFiber$"+cs,ao="__reactProps$"+cs,ar="__reactContainer$"+cs,Uc="__reactEvents$"+cs,Wp="__reactListeners$"+cs,Hp="__reactHandles$"+cs;function ri(t){var e=t[Yn];if(e)return e;for(var r=t.parentNode;r;){if(e=r[ar]||r[Yn]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=v0(t);t!==null;){if(r=t[Yn])return r;t=v0(t)}return e}t=r,r=t.parentNode}return null}function yo(t){return t=t[Yn]||t[ar],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ji(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(K(33))}function Ja(t){return t[ao]||null}var Vc=[],Ui=-1;function Ur(t){return{current:t}}function Ye(t){0>Ui||(t.current=Vc[Ui],Vc[Ui]=null,Ui--)}function He(t,e){Ui++,Vc[Ui]=t.current,t.current=e}var Fr={},Ut=Ur(Fr),rn=Ur(!1),li=Fr;function es(t,e){var r=t.type.contextTypes;if(!r)return Fr;var o=t.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===e)return o.__reactInternalMemoizedMaskedChildContext;var c={},d;for(d in r)c[d]=e[d];return o&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=c),c}function sn(t){return t=t.childContextTypes,t!=null}function Ia(){Ye(rn),Ye(Ut)}function E0(t,e,r){if(Ut.current!==Fr)throw Error(K(168));He(Ut,e),He(rn,r)}function zf(t,e,r){var o=t.stateNode;if(e=e.childContextTypes,typeof o.getChildContext!="function")return r;o=o.getChildContext();for(var c in o)if(!(c in e))throw Error(K(108,T2(t)||"Unknown",c));return rt({},r,o)}function Ta(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Fr,li=Ut.current,He(Ut,t),He(rn,rn.current),!0}function C0(t,e,r){var o=t.stateNode;if(!o)throw Error(K(169));r?(t=zf(t,e,li),o.__reactInternalMemoizedMergedChildContext=t,Ye(rn),Ye(Ut),He(Ut,t)):Ye(rn),He(rn,r)}var nr=null,el=!1,Ql=!1;function Wf(t){nr===null?nr=[t]:nr.push(t)}function Gp(t){el=!0,Wf(t)}function Vr(){if(!Ql&&nr!==null){Ql=!0;var t=0,e=Me;try{var r=nr;for(Me=1;t<r.length;t++){var o=r[t];do o=o(!0);while(o!==null)}nr=null,el=!1}catch(c){throw nr!==null&&(nr=nr.slice(t+1)),gf(ku,Vr),c}finally{Me=e,Ql=!1}}return null}var Vi=[],zi=0,Na=null,Oa=0,vn=[],En=0,ci=null,rr=1,ir="";function Jr(t,e){Vi[zi++]=Oa,Vi[zi++]=Na,Na=t,Oa=e}function Hf(t,e,r){vn[En++]=rr,vn[En++]=ir,vn[En++]=ci,ci=t;var o=rr;t=ir;var c=32-Mn(o)-1;o&=~(1<<c),r+=1;var d=32-Mn(e)+c;if(30<d){var f=c-c%5;d=(o&(1<<f)-1).toString(32),o>>=f,c-=f,rr=1<<32-Mn(e)+c|r<<c|o,ir=d+t}else rr=1<<d|r<<c|o,ir=t}function Vu(t){t.return!==null&&(Jr(t,1),Hf(t,1,0))}function zu(t){for(;t===Na;)Na=Vi[--zi],Vi[zi]=null,Oa=Vi[--zi],Vi[zi]=null;for(;t===ci;)ci=vn[--En],vn[En]=null,ir=vn[--En],vn[En]=null,rr=vn[--En],vn[En]=null}var dn=null,un=null,Ze=!1,Pn=null;function Gf(t,e){var r=Cn(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function _0(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,dn=t,un=kr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,dn=t,un=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=ci!==null?{id:rr,overflow:ir}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Cn(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,dn=t,un=null,!0):!1;default:return!1}}function zc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Wc(t){if(Ze){var e=un;if(e){var r=e;if(!_0(t,e)){if(zc(t))throw Error(K(418));e=kr(r.nextSibling);var o=dn;e&&_0(t,e)?Gf(o,r):(t.flags=t.flags&-4097|2,Ze=!1,dn=t)}}else{if(zc(t))throw Error(K(418));t.flags=t.flags&-4097|2,Ze=!1,dn=t}}}function A0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;dn=t}function Yo(t){if(t!==dn)return!1;if(!Ze)return A0(t),Ze=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Fc(t.type,t.memoizedProps)),e&&(e=un)){if(zc(t))throw Xf(),Error(K(418));for(;e;)Gf(t,e),e=kr(e.nextSibling)}if(A0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(K(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){un=kr(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}un=null}}else un=dn?kr(t.stateNode.nextSibling):null;return!0}function Xf(){for(var t=un;t;)t=kr(t.nextSibling)}function ts(){un=dn=null,Ze=!1}function Wu(t){Pn===null?Pn=[t]:Pn.push(t)}var Xp=ur.ReactCurrentBatchConfig;function Ns(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(K(309));var o=r.stateNode}if(!o)throw Error(K(147,t));var c=o,d=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===d?e.ref:(e=function(f){var x=c.refs;f===null?delete x[d]:x[d]=f},e._stringRef=d,e)}if(typeof t!="string")throw Error(K(284));if(!r._owner)throw Error(K(290,t))}return t}function Ko(t,e){throw t=Object.prototype.toString.call(e),Error(K(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function S0(t){var e=t._init;return e(t._payload)}function $f(t){function e(k,N){if(t){var b=k.deletions;b===null?(k.deletions=[N],k.flags|=16):b.push(N)}}function r(k,N){if(!t)return null;for(;N!==null;)e(k,N),N=N.sibling;return null}function o(k,N){for(k=new Map;N!==null;)N.key!==null?k.set(N.key,N):k.set(N.index,N),N=N.sibling;return k}function c(k,N){return k=Lr(k,N),k.index=0,k.sibling=null,k}function d(k,N,b){return k.index=b,t?(b=k.alternate,b!==null?(b=b.index,b<N?(k.flags|=2,N):b):(k.flags|=2,N)):(k.flags|=1048576,N)}function f(k){return t&&k.alternate===null&&(k.flags|=2),k}function x(k,N,b,L){return N===null||N.tag!==6?(N=sc(b,k.mode,L),N.return=k,N):(N=c(N,b),N.return=k,N)}function w(k,N,b,L){var J=b.type;return J===Mi?C(k,N,b.props.children,L,b.key):N!==null&&(N.elementType===J||typeof J=="object"&&J!==null&&J.$$typeof===Cr&&S0(J)===N.type)?(L=c(N,b.props),L.ref=Ns(k,N,b),L.return=k,L):(L=xa(b.type,b.key,b.props,null,k.mode,L),L.ref=Ns(k,N,b),L.return=k,L)}function m(k,N,b,L){return N===null||N.tag!==4||N.stateNode.containerInfo!==b.containerInfo||N.stateNode.implementation!==b.implementation?(N=oc(b,k.mode,L),N.return=k,N):(N=c(N,b.children||[]),N.return=k,N)}function C(k,N,b,L,J){return N===null||N.tag!==7?(N=ai(b,k.mode,L,J),N.return=k,N):(N=c(N,b),N.return=k,N)}function _(k,N,b){if(typeof N=="string"&&N!==""||typeof N=="number")return N=sc(""+N,k.mode,b),N.return=k,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Fo:return b=xa(N.type,N.key,N.props,null,k.mode,b),b.ref=Ns(k,null,N),b.return=k,b;case Pi:return N=oc(N,k.mode,b),N.return=k,N;case Cr:var L=N._init;return _(k,L(N._payload),b)}if(Ps(N)||As(N))return N=ai(N,k.mode,b,null),N.return=k,N;Ko(k,N)}return null}function O(k,N,b,L){var J=N!==null?N.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return J!==null?null:x(k,N,""+b,L);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Fo:return b.key===J?w(k,N,b,L):null;case Pi:return b.key===J?m(k,N,b,L):null;case Cr:return J=b._init,O(k,N,J(b._payload),L)}if(Ps(b)||As(b))return J!==null?null:C(k,N,b,L,null);Ko(k,b)}return null}function P(k,N,b,L,J){if(typeof L=="string"&&L!==""||typeof L=="number")return k=k.get(b)||null,x(N,k,""+L,J);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case Fo:return k=k.get(L.key===null?b:L.key)||null,w(N,k,L,J);case Pi:return k=k.get(L.key===null?b:L.key)||null,m(N,k,L,J);case Cr:var H=L._init;return P(k,N,b,H(L._payload),J)}if(Ps(L)||As(L))return k=k.get(b)||null,C(N,k,L,J,null);Ko(N,L)}return null}function M(k,N,b,L){for(var J=null,H=null,U=N,q=N=0,X=null;U!==null&&q<b.length;q++){U.index>q?(X=U,U=null):X=U.sibling;var me=O(k,U,b[q],L);if(me===null){U===null&&(U=X);break}t&&U&&me.alternate===null&&e(k,U),N=d(me,N,q),H===null?J=me:H.sibling=me,H=me,U=X}if(q===b.length)return r(k,U),Ze&&Jr(k,q),J;if(U===null){for(;q<b.length;q++)U=_(k,b[q],L),U!==null&&(N=d(U,N,q),H===null?J=U:H.sibling=U,H=U);return Ze&&Jr(k,q),J}for(U=o(k,U);q<b.length;q++)X=P(U,k,q,b[q],L),X!==null&&(t&&X.alternate!==null&&U.delete(X.key===null?q:X.key),N=d(X,N,q),H===null?J=X:H.sibling=X,H=X);return t&&U.forEach(function(Le){return e(k,Le)}),Ze&&Jr(k,q),J}function F(k,N,b,L){var J=As(b);if(typeof J!="function")throw Error(K(150));if(b=J.call(b),b==null)throw Error(K(151));for(var H=J=null,U=N,q=N=0,X=null,me=b.next();U!==null&&!me.done;q++,me=b.next()){U.index>q?(X=U,U=null):X=U.sibling;var Le=O(k,U,me.value,L);if(Le===null){U===null&&(U=X);break}t&&U&&Le.alternate===null&&e(k,U),N=d(Le,N,q),H===null?J=Le:H.sibling=Le,H=Le,U=X}if(me.done)return r(k,U),Ze&&Jr(k,q),J;if(U===null){for(;!me.done;q++,me=b.next())me=_(k,me.value,L),me!==null&&(N=d(me,N,q),H===null?J=me:H.sibling=me,H=me);return Ze&&Jr(k,q),J}for(U=o(k,U);!me.done;q++,me=b.next())me=P(U,k,q,me.value,L),me!==null&&(t&&me.alternate!==null&&U.delete(me.key===null?q:me.key),N=d(me,N,q),H===null?J=me:H.sibling=me,H=me);return t&&U.forEach(function(ce){return e(k,ce)}),Ze&&Jr(k,q),J}function G(k,N,b,L){if(typeof b=="object"&&b!==null&&b.type===Mi&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Fo:e:{for(var J=b.key,H=N;H!==null;){if(H.key===J){if(J=b.type,J===Mi){if(H.tag===7){r(k,H.sibling),N=c(H,b.props.children),N.return=k,k=N;break e}}else if(H.elementType===J||typeof J=="object"&&J!==null&&J.$$typeof===Cr&&S0(J)===H.type){r(k,H.sibling),N=c(H,b.props),N.ref=Ns(k,H,b),N.return=k,k=N;break e}r(k,H);break}else e(k,H);H=H.sibling}b.type===Mi?(N=ai(b.props.children,k.mode,L,b.key),N.return=k,k=N):(L=xa(b.type,b.key,b.props,null,k.mode,L),L.ref=Ns(k,N,b),L.return=k,k=L)}return f(k);case Pi:e:{for(H=b.key;N!==null;){if(N.key===H)if(N.tag===4&&N.stateNode.containerInfo===b.containerInfo&&N.stateNode.implementation===b.implementation){r(k,N.sibling),N=c(N,b.children||[]),N.return=k,k=N;break e}else{r(k,N);break}else e(k,N);N=N.sibling}N=oc(b,k.mode,L),N.return=k,k=N}return f(k);case Cr:return H=b._init,G(k,N,H(b._payload),L)}if(Ps(b))return M(k,N,b,L);if(As(b))return F(k,N,b,L);Ko(k,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,N!==null&&N.tag===6?(r(k,N.sibling),N=c(N,b),N.return=k,k=N):(r(k,N),N=sc(b,k.mode,L),N.return=k,k=N),f(k)):r(k,N)}return G}var ns=$f(!0),Yf=$f(!1),Ra=Ur(null),ka=null,Wi=null,Hu=null;function Gu(){Hu=Wi=ka=null}function Xu(t){var e=Ra.current;Ye(Ra),t._currentValue=e}function Hc(t,e,r){for(;t!==null;){var o=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,o!==null&&(o.childLanes|=e)):o!==null&&(o.childLanes&e)!==e&&(o.childLanes|=e),t===r)break;t=t.return}}function Zi(t,e){ka=t,Hu=Wi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(nn=!0),t.firstContext=null)}function An(t){var e=t._currentValue;if(Hu!==t)if(t={context:t,memoizedValue:e,next:null},Wi===null){if(ka===null)throw Error(K(308));Wi=t,ka.dependencies={lanes:0,firstContext:t}}else Wi=Wi.next=t;return e}var ii=null;function $u(t){ii===null?ii=[t]:ii.push(t)}function Kf(t,e,r,o){var c=e.interleaved;return c===null?(r.next=r,$u(e)):(r.next=c.next,c.next=r),e.interleaved=r,lr(t,o)}function lr(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var _r=!1;function Yu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function qf(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function sr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Dr(t,e,r){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,Oe&2){var c=o.pending;return c===null?e.next=e:(e.next=c.next,c.next=e),o.pending=e,lr(t,r)}return c=o.interleaved,c===null?(e.next=e,$u(o)):(e.next=c.next,c.next=e),o.interleaved=e,lr(t,r)}function ua(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var o=e.lanes;o&=t.pendingLanes,r|=o,e.lanes=r,Du(t,r)}}function b0(t,e){var r=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,r===o)){var c=null,d=null;if(r=r.firstBaseUpdate,r!==null){do{var f={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};d===null?c=d=f:d=d.next=f,r=r.next}while(r!==null);d===null?c=d=e:d=d.next=e}else c=d=e;r={baseState:o.baseState,firstBaseUpdate:c,lastBaseUpdate:d,shared:o.shared,effects:o.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Da(t,e,r,o){var c=t.updateQueue;_r=!1;var d=c.firstBaseUpdate,f=c.lastBaseUpdate,x=c.shared.pending;if(x!==null){c.shared.pending=null;var w=x,m=w.next;w.next=null,f===null?d=m:f.next=m,f=w;var C=t.alternate;C!==null&&(C=C.updateQueue,x=C.lastBaseUpdate,x!==f&&(x===null?C.firstBaseUpdate=m:x.next=m,C.lastBaseUpdate=w))}if(d!==null){var _=c.baseState;f=0,C=m=w=null,x=d;do{var O=x.lane,P=x.eventTime;if((o&O)===O){C!==null&&(C=C.next={eventTime:P,lane:0,tag:x.tag,payload:x.payload,callback:x.callback,next:null});e:{var M=t,F=x;switch(O=e,P=r,F.tag){case 1:if(M=F.payload,typeof M=="function"){_=M.call(P,_,O);break e}_=M;break e;case 3:M.flags=M.flags&-65537|128;case 0:if(M=F.payload,O=typeof M=="function"?M.call(P,_,O):M,O==null)break e;_=rt({},_,O);break e;case 2:_r=!0}}x.callback!==null&&x.lane!==0&&(t.flags|=64,O=c.effects,O===null?c.effects=[x]:O.push(x))}else P={eventTime:P,lane:O,tag:x.tag,payload:x.payload,callback:x.callback,next:null},C===null?(m=C=P,w=_):C=C.next=P,f|=O;if(x=x.next,x===null){if(x=c.shared.pending,x===null)break;O=x,x=O.next,O.next=null,c.lastBaseUpdate=O,c.shared.pending=null}}while(!0);if(C===null&&(w=_),c.baseState=w,c.firstBaseUpdate=m,c.lastBaseUpdate=C,e=c.shared.interleaved,e!==null){c=e;do f|=c.lane,c=c.next;while(c!==e)}else d===null&&(c.shared.lanes=0);di|=f,t.lanes=f,t.memoizedState=_}}function I0(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var o=t[e],c=o.callback;if(c!==null){if(o.callback=null,o=r,typeof c!="function")throw Error(K(191,c));c.call(o)}}}var vo={},qn=Ur(vo),lo=Ur(vo),co=Ur(vo);function si(t){if(t===vo)throw Error(K(174));return t}function Ku(t,e){switch(He(co,e),He(lo,t),He(qn,vo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ac(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ac(e,t)}Ye(qn),He(qn,e)}function rs(){Ye(qn),Ye(lo),Ye(co)}function Zf(t){si(co.current);var e=si(qn.current),r=Ac(e,t.type);e!==r&&(He(lo,t),He(qn,r))}function qu(t){lo.current===t&&(Ye(qn),Ye(lo))}var tt=Ur(0);function Pa(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Jl=[];function Zu(){for(var t=0;t<Jl.length;t++)Jl[t]._workInProgressVersionPrimary=null;Jl.length=0}var da=ur.ReactCurrentDispatcher,ec=ur.ReactCurrentBatchConfig,ui=0,nt=null,vt=null,St=null,Ma=!1,Ws=!1,uo=0,$p=0;function Bt(){throw Error(K(321))}function Qu(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Bn(t[r],e[r]))return!1;return!0}function Ju(t,e,r,o,c,d){if(ui=d,nt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,da.current=t===null||t.memoizedState===null?Zp:Qp,t=r(o,c),Ws){d=0;do{if(Ws=!1,uo=0,25<=d)throw Error(K(301));d+=1,St=vt=null,e.updateQueue=null,da.current=Jp,t=r(o,c)}while(Ws)}if(da.current=La,e=vt!==null&&vt.next!==null,ui=0,St=vt=nt=null,Ma=!1,e)throw Error(K(300));return t}function ed(){var t=uo!==0;return uo=0,t}function Xn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return St===null?nt.memoizedState=St=t:St=St.next=t,St}function Sn(){if(vt===null){var t=nt.alternate;t=t!==null?t.memoizedState:null}else t=vt.next;var e=St===null?nt.memoizedState:St.next;if(e!==null)St=e,vt=t;else{if(t===null)throw Error(K(310));vt=t,t={memoizedState:vt.memoizedState,baseState:vt.baseState,baseQueue:vt.baseQueue,queue:vt.queue,next:null},St===null?nt.memoizedState=St=t:St=St.next=t}return St}function ho(t,e){return typeof e=="function"?e(t):e}function tc(t){var e=Sn(),r=e.queue;if(r===null)throw Error(K(311));r.lastRenderedReducer=t;var o=vt,c=o.baseQueue,d=r.pending;if(d!==null){if(c!==null){var f=c.next;c.next=d.next,d.next=f}o.baseQueue=c=d,r.pending=null}if(c!==null){d=c.next,o=o.baseState;var x=f=null,w=null,m=d;do{var C=m.lane;if((ui&C)===C)w!==null&&(w=w.next={lane:0,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null}),o=m.hasEagerState?m.eagerState:t(o,m.action);else{var _={lane:C,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null};w===null?(x=w=_,f=o):w=w.next=_,nt.lanes|=C,di|=C}m=m.next}while(m!==null&&m!==d);w===null?f=o:w.next=x,Bn(o,e.memoizedState)||(nn=!0),e.memoizedState=o,e.baseState=f,e.baseQueue=w,r.lastRenderedState=o}if(t=r.interleaved,t!==null){c=t;do d=c.lane,nt.lanes|=d,di|=d,c=c.next;while(c!==t)}else c===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function nc(t){var e=Sn(),r=e.queue;if(r===null)throw Error(K(311));r.lastRenderedReducer=t;var o=r.dispatch,c=r.pending,d=e.memoizedState;if(c!==null){r.pending=null;var f=c=c.next;do d=t(d,f.action),f=f.next;while(f!==c);Bn(d,e.memoizedState)||(nn=!0),e.memoizedState=d,e.baseQueue===null&&(e.baseState=d),r.lastRenderedState=d}return[d,o]}function Qf(){}function Jf(t,e){var r=nt,o=Sn(),c=e(),d=!Bn(o.memoizedState,c);if(d&&(o.memoizedState=c,nn=!0),o=o.queue,td(n1.bind(null,r,o,t),[t]),o.getSnapshot!==e||d||St!==null&&St.memoizedState.tag&1){if(r.flags|=2048,fo(9,t1.bind(null,r,o,c,e),void 0,null),bt===null)throw Error(K(349));ui&30||e1(r,e,c)}return c}function e1(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=nt.updateQueue,e===null?(e={lastEffect:null,stores:null},nt.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function t1(t,e,r,o){e.value=r,e.getSnapshot=o,r1(e)&&i1(t)}function n1(t,e,r){return r(function(){r1(e)&&i1(t)})}function r1(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Bn(t,r)}catch{return!0}}function i1(t){var e=lr(t,1);e!==null&&Ln(e,t,1,-1)}function T0(t){var e=Xn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ho,lastRenderedState:t},e.queue=t,t=t.dispatch=qp.bind(null,nt,t),[e.memoizedState,t]}function fo(t,e,r,o){return t={tag:t,create:e,destroy:r,deps:o,next:null},e=nt.updateQueue,e===null?(e={lastEffect:null,stores:null},nt.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(o=r.next,r.next=t,t.next=o,e.lastEffect=t)),t}function s1(){return Sn().memoizedState}function ha(t,e,r,o){var c=Xn();nt.flags|=t,c.memoizedState=fo(1|e,r,void 0,o===void 0?null:o)}function tl(t,e,r,o){var c=Sn();o=o===void 0?null:o;var d=void 0;if(vt!==null){var f=vt.memoizedState;if(d=f.destroy,o!==null&&Qu(o,f.deps)){c.memoizedState=fo(e,r,d,o);return}}nt.flags|=t,c.memoizedState=fo(1|e,r,d,o)}function N0(t,e){return ha(8390656,8,t,e)}function td(t,e){return tl(2048,8,t,e)}function o1(t,e){return tl(4,2,t,e)}function a1(t,e){return tl(4,4,t,e)}function l1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function c1(t,e,r){return r=r!=null?r.concat([t]):null,tl(4,4,l1.bind(null,e,t),r)}function nd(){}function u1(t,e){var r=Sn();e=e===void 0?null:e;var o=r.memoizedState;return o!==null&&e!==null&&Qu(e,o[1])?o[0]:(r.memoizedState=[t,e],t)}function d1(t,e){var r=Sn();e=e===void 0?null:e;var o=r.memoizedState;return o!==null&&e!==null&&Qu(e,o[1])?o[0]:(t=t(),r.memoizedState=[t,e],t)}function h1(t,e,r){return ui&21?(Bn(r,e)||(r=mf(),nt.lanes|=r,di|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,nn=!0),t.memoizedState=r)}function Yp(t,e){var r=Me;Me=r!==0&&4>r?r:4,t(!0);var o=ec.transition;ec.transition={};try{t(!1),e()}finally{Me=r,ec.transition=o}}function f1(){return Sn().memoizedState}function Kp(t,e,r){var o=Mr(t);if(r={lane:o,action:r,hasEagerState:!1,eagerState:null,next:null},g1(t))p1(e,r);else if(r=Kf(t,e,r,o),r!==null){var c=Gt();Ln(r,t,o,c),x1(r,e,o)}}function qp(t,e,r){var o=Mr(t),c={lane:o,action:r,hasEagerState:!1,eagerState:null,next:null};if(g1(t))p1(e,c);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=e.lastRenderedReducer,d!==null))try{var f=e.lastRenderedState,x=d(f,r);if(c.hasEagerState=!0,c.eagerState=x,Bn(x,f)){var w=e.interleaved;w===null?(c.next=c,$u(e)):(c.next=w.next,w.next=c),e.interleaved=c;return}}catch{}finally{}r=Kf(t,e,c,o),r!==null&&(c=Gt(),Ln(r,t,o,c),x1(r,e,o))}}function g1(t){var e=t.alternate;return t===nt||e!==null&&e===nt}function p1(t,e){Ws=Ma=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function x1(t,e,r){if(r&4194240){var o=e.lanes;o&=t.pendingLanes,r|=o,e.lanes=r,Du(t,r)}}var La={readContext:An,useCallback:Bt,useContext:Bt,useEffect:Bt,useImperativeHandle:Bt,useInsertionEffect:Bt,useLayoutEffect:Bt,useMemo:Bt,useReducer:Bt,useRef:Bt,useState:Bt,useDebugValue:Bt,useDeferredValue:Bt,useTransition:Bt,useMutableSource:Bt,useSyncExternalStore:Bt,useId:Bt,unstable_isNewReconciler:!1},Zp={readContext:An,useCallback:function(t,e){return Xn().memoizedState=[t,e===void 0?null:e],t},useContext:An,useEffect:N0,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,ha(4194308,4,l1.bind(null,e,t),r)},useLayoutEffect:function(t,e){return ha(4194308,4,t,e)},useInsertionEffect:function(t,e){return ha(4,2,t,e)},useMemo:function(t,e){var r=Xn();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var o=Xn();return e=r!==void 0?r(e):e,o.memoizedState=o.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},o.queue=t,t=t.dispatch=Kp.bind(null,nt,t),[o.memoizedState,t]},useRef:function(t){var e=Xn();return t={current:t},e.memoizedState=t},useState:T0,useDebugValue:nd,useDeferredValue:function(t){return Xn().memoizedState=t},useTransition:function(){var t=T0(!1),e=t[0];return t=Yp.bind(null,t[1]),Xn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var o=nt,c=Xn();if(Ze){if(r===void 0)throw Error(K(407));r=r()}else{if(r=e(),bt===null)throw Error(K(349));ui&30||e1(o,e,r)}c.memoizedState=r;var d={value:r,getSnapshot:e};return c.queue=d,N0(n1.bind(null,o,d,t),[t]),o.flags|=2048,fo(9,t1.bind(null,o,d,r,e),void 0,null),r},useId:function(){var t=Xn(),e=bt.identifierPrefix;if(Ze){var r=ir,o=rr;r=(o&~(1<<32-Mn(o)-1)).toString(32)+r,e=":"+e+"R"+r,r=uo++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=$p++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Qp={readContext:An,useCallback:u1,useContext:An,useEffect:td,useImperativeHandle:c1,useInsertionEffect:o1,useLayoutEffect:a1,useMemo:d1,useReducer:tc,useRef:s1,useState:function(){return tc(ho)},useDebugValue:nd,useDeferredValue:function(t){var e=Sn();return h1(e,vt.memoizedState,t)},useTransition:function(){var t=tc(ho)[0],e=Sn().memoizedState;return[t,e]},useMutableSource:Qf,useSyncExternalStore:Jf,useId:f1,unstable_isNewReconciler:!1},Jp={readContext:An,useCallback:u1,useContext:An,useEffect:td,useImperativeHandle:c1,useInsertionEffect:o1,useLayoutEffect:a1,useMemo:d1,useReducer:nc,useRef:s1,useState:function(){return nc(ho)},useDebugValue:nd,useDeferredValue:function(t){var e=Sn();return vt===null?e.memoizedState=t:h1(e,vt.memoizedState,t)},useTransition:function(){var t=nc(ho)[0],e=Sn().memoizedState;return[t,e]},useMutableSource:Qf,useSyncExternalStore:Jf,useId:f1,unstable_isNewReconciler:!1};function Rn(t,e){if(t&&t.defaultProps){e=rt({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Gc(t,e,r,o){e=t.memoizedState,r=r(o,e),r=r==null?e:rt({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var nl={isMounted:function(t){return(t=t._reactInternals)?gi(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var o=Gt(),c=Mr(t),d=sr(o,c);d.payload=e,r!=null&&(d.callback=r),e=Dr(t,d,c),e!==null&&(Ln(e,t,c,o),ua(e,t,c))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var o=Gt(),c=Mr(t),d=sr(o,c);d.tag=1,d.payload=e,r!=null&&(d.callback=r),e=Dr(t,d,c),e!==null&&(Ln(e,t,c,o),ua(e,t,c))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Gt(),o=Mr(t),c=sr(r,o);c.tag=2,e!=null&&(c.callback=e),e=Dr(t,c,o),e!==null&&(Ln(e,t,o,r),ua(e,t,o))}};function O0(t,e,r,o,c,d,f){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,d,f):e.prototype&&e.prototype.isPureReactComponent?!io(r,o)||!io(c,d):!0}function m1(t,e,r){var o=!1,c=Fr,d=e.contextType;return typeof d=="object"&&d!==null?d=An(d):(c=sn(e)?li:Ut.current,o=e.contextTypes,d=(o=o!=null)?es(t,c):Fr),e=new e(r,d),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=nl,t.stateNode=e,e._reactInternals=t,o&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=c,t.__reactInternalMemoizedMaskedChildContext=d),e}function R0(t,e,r,o){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,o),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,o),e.state!==t&&nl.enqueueReplaceState(e,e.state,null)}function Xc(t,e,r,o){var c=t.stateNode;c.props=r,c.state=t.memoizedState,c.refs={},Yu(t);var d=e.contextType;typeof d=="object"&&d!==null?c.context=An(d):(d=sn(e)?li:Ut.current,c.context=es(t,d)),c.state=t.memoizedState,d=e.getDerivedStateFromProps,typeof d=="function"&&(Gc(t,e,d,r),c.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(e=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),e!==c.state&&nl.enqueueReplaceState(c,c.state,null),Da(t,r,c,o),c.state=t.memoizedState),typeof c.componentDidMount=="function"&&(t.flags|=4194308)}function is(t,e){try{var r="",o=e;do r+=I2(o),o=o.return;while(o);var c=r}catch(d){c=`
Error generating stack: `+d.message+`
`+d.stack}return{value:t,source:e,stack:c,digest:null}}function rc(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function $c(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var ex=typeof WeakMap=="function"?WeakMap:Map;function w1(t,e,r){r=sr(-1,r),r.tag=3,r.payload={element:null};var o=e.value;return r.callback=function(){Fa||(Fa=!0,ru=o),$c(t,e)},r}function y1(t,e,r){r=sr(-1,r),r.tag=3;var o=t.type.getDerivedStateFromError;if(typeof o=="function"){var c=e.value;r.payload=function(){return o(c)},r.callback=function(){$c(t,e)}}var d=t.stateNode;return d!==null&&typeof d.componentDidCatch=="function"&&(r.callback=function(){$c(t,e),typeof o!="function"&&(Pr===null?Pr=new Set([this]):Pr.add(this));var f=e.stack;this.componentDidCatch(e.value,{componentStack:f!==null?f:""})}),r}function k0(t,e,r){var o=t.pingCache;if(o===null){o=t.pingCache=new ex;var c=new Set;o.set(e,c)}else c=o.get(e),c===void 0&&(c=new Set,o.set(e,c));c.has(r)||(c.add(r),t=gx.bind(null,t,e,r),e.then(t,t))}function D0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function P0(t,e,r,o,c){return t.mode&1?(t.flags|=65536,t.lanes=c,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=sr(-1,1),e.tag=2,Dr(r,e,1))),r.lanes|=1),t)}var tx=ur.ReactCurrentOwner,nn=!1;function Ht(t,e,r,o){e.child=t===null?Yf(e,null,r,o):ns(e,t.child,r,o)}function M0(t,e,r,o,c){r=r.render;var d=e.ref;return Zi(e,c),o=Ju(t,e,r,o,d,c),r=ed(),t!==null&&!nn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~c,cr(t,e,c)):(Ze&&r&&Vu(e),e.flags|=1,Ht(t,e,o,c),e.child)}function L0(t,e,r,o,c){if(t===null){var d=r.type;return typeof d=="function"&&!ud(d)&&d.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=d,v1(t,e,d,o,c)):(t=xa(r.type,null,o,e,e.mode,c),t.ref=e.ref,t.return=e,e.child=t)}if(d=t.child,!(t.lanes&c)){var f=d.memoizedProps;if(r=r.compare,r=r!==null?r:io,r(f,o)&&t.ref===e.ref)return cr(t,e,c)}return e.flags|=1,t=Lr(d,o),t.ref=e.ref,t.return=e,e.child=t}function v1(t,e,r,o,c){if(t!==null){var d=t.memoizedProps;if(io(d,o)&&t.ref===e.ref)if(nn=!1,e.pendingProps=o=d,(t.lanes&c)!==0)t.flags&131072&&(nn=!0);else return e.lanes=t.lanes,cr(t,e,c)}return Yc(t,e,r,o,c)}function E1(t,e,r){var o=e.pendingProps,c=o.children,d=t!==null?t.memoizedState:null;if(o.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},He(Gi,cn),cn|=r;else{if(!(r&1073741824))return t=d!==null?d.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,He(Gi,cn),cn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=d!==null?d.baseLanes:r,He(Gi,cn),cn|=o}else d!==null?(o=d.baseLanes|r,e.memoizedState=null):o=r,He(Gi,cn),cn|=o;return Ht(t,e,c,r),e.child}function C1(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Yc(t,e,r,o,c){var d=sn(r)?li:Ut.current;return d=es(e,d),Zi(e,c),r=Ju(t,e,r,o,d,c),o=ed(),t!==null&&!nn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~c,cr(t,e,c)):(Ze&&o&&Vu(e),e.flags|=1,Ht(t,e,r,c),e.child)}function B0(t,e,r,o,c){if(sn(r)){var d=!0;Ta(e)}else d=!1;if(Zi(e,c),e.stateNode===null)fa(t,e),m1(e,r,o),Xc(e,r,o,c),o=!0;else if(t===null){var f=e.stateNode,x=e.memoizedProps;f.props=x;var w=f.context,m=r.contextType;typeof m=="object"&&m!==null?m=An(m):(m=sn(r)?li:Ut.current,m=es(e,m));var C=r.getDerivedStateFromProps,_=typeof C=="function"||typeof f.getSnapshotBeforeUpdate=="function";_||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(x!==o||w!==m)&&R0(e,f,o,m),_r=!1;var O=e.memoizedState;f.state=O,Da(e,o,f,c),w=e.memoizedState,x!==o||O!==w||rn.current||_r?(typeof C=="function"&&(Gc(e,r,C,o),w=e.memoizedState),(x=_r||O0(e,r,x,o,O,w,m))?(_||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(e.flags|=4194308)):(typeof f.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=o,e.memoizedState=w),f.props=o,f.state=w,f.context=m,o=x):(typeof f.componentDidMount=="function"&&(e.flags|=4194308),o=!1)}else{f=e.stateNode,qf(t,e),x=e.memoizedProps,m=e.type===e.elementType?x:Rn(e.type,x),f.props=m,_=e.pendingProps,O=f.context,w=r.contextType,typeof w=="object"&&w!==null?w=An(w):(w=sn(r)?li:Ut.current,w=es(e,w));var P=r.getDerivedStateFromProps;(C=typeof P=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(x!==_||O!==w)&&R0(e,f,o,w),_r=!1,O=e.memoizedState,f.state=O,Da(e,o,f,c);var M=e.memoizedState;x!==_||O!==M||rn.current||_r?(typeof P=="function"&&(Gc(e,r,P,o),M=e.memoizedState),(m=_r||O0(e,r,m,o,O,M,w)||!1)?(C||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(o,M,w),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(o,M,w)),typeof f.componentDidUpdate=="function"&&(e.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof f.componentDidUpdate!="function"||x===t.memoizedProps&&O===t.memoizedState||(e.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||x===t.memoizedProps&&O===t.memoizedState||(e.flags|=1024),e.memoizedProps=o,e.memoizedState=M),f.props=o,f.state=M,f.context=w,o=m):(typeof f.componentDidUpdate!="function"||x===t.memoizedProps&&O===t.memoizedState||(e.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||x===t.memoizedProps&&O===t.memoizedState||(e.flags|=1024),o=!1)}return Kc(t,e,r,o,d,c)}function Kc(t,e,r,o,c,d){C1(t,e);var f=(e.flags&128)!==0;if(!o&&!f)return c&&C0(e,r,!1),cr(t,e,d);o=e.stateNode,tx.current=e;var x=f&&typeof r.getDerivedStateFromError!="function"?null:o.render();return e.flags|=1,t!==null&&f?(e.child=ns(e,t.child,null,d),e.child=ns(e,null,x,d)):Ht(t,e,x,d),e.memoizedState=o.state,c&&C0(e,r,!0),e.child}function _1(t){var e=t.stateNode;e.pendingContext?E0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&E0(t,e.context,!1),Ku(t,e.containerInfo)}function F0(t,e,r,o,c){return ts(),Wu(c),e.flags|=256,Ht(t,e,r,o),e.child}var qc={dehydrated:null,treeContext:null,retryLane:0};function Zc(t){return{baseLanes:t,cachePool:null,transitions:null}}function A1(t,e,r){var o=e.pendingProps,c=tt.current,d=!1,f=(e.flags&128)!==0,x;if((x=f)||(x=t!==null&&t.memoizedState===null?!1:(c&2)!==0),x?(d=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(c|=1),He(tt,c&1),t===null)return Wc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(f=o.children,t=o.fallback,d?(o=e.mode,d=e.child,f={mode:"hidden",children:f},!(o&1)&&d!==null?(d.childLanes=0,d.pendingProps=f):d=sl(f,o,0,null),t=ai(t,o,r,null),d.return=e,t.return=e,d.sibling=t,e.child=d,e.child.memoizedState=Zc(r),e.memoizedState=qc,t):rd(e,f));if(c=t.memoizedState,c!==null&&(x=c.dehydrated,x!==null))return nx(t,e,f,o,x,c,r);if(d){d=o.fallback,f=e.mode,c=t.child,x=c.sibling;var w={mode:"hidden",children:o.children};return!(f&1)&&e.child!==c?(o=e.child,o.childLanes=0,o.pendingProps=w,e.deletions=null):(o=Lr(c,w),o.subtreeFlags=c.subtreeFlags&14680064),x!==null?d=Lr(x,d):(d=ai(d,f,r,null),d.flags|=2),d.return=e,o.return=e,o.sibling=d,e.child=o,o=d,d=e.child,f=t.child.memoizedState,f=f===null?Zc(r):{baseLanes:f.baseLanes|r,cachePool:null,transitions:f.transitions},d.memoizedState=f,d.childLanes=t.childLanes&~r,e.memoizedState=qc,o}return d=t.child,t=d.sibling,o=Lr(d,{mode:"visible",children:o.children}),!(e.mode&1)&&(o.lanes=r),o.return=e,o.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=o,e.memoizedState=null,o}function rd(t,e){return e=sl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function qo(t,e,r,o){return o!==null&&Wu(o),ns(e,t.child,null,r),t=rd(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function nx(t,e,r,o,c,d,f){if(r)return e.flags&256?(e.flags&=-257,o=rc(Error(K(422))),qo(t,e,f,o)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(d=o.fallback,c=e.mode,o=sl({mode:"visible",children:o.children},c,0,null),d=ai(d,c,f,null),d.flags|=2,o.return=e,d.return=e,o.sibling=d,e.child=o,e.mode&1&&ns(e,t.child,null,f),e.child.memoizedState=Zc(f),e.memoizedState=qc,d);if(!(e.mode&1))return qo(t,e,f,null);if(c.data==="$!"){if(o=c.nextSibling&&c.nextSibling.dataset,o)var x=o.dgst;return o=x,d=Error(K(419)),o=rc(d,o,void 0),qo(t,e,f,o)}if(x=(f&t.childLanes)!==0,nn||x){if(o=bt,o!==null){switch(f&-f){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=c&(o.suspendedLanes|f)?0:c,c!==0&&c!==d.retryLane&&(d.retryLane=c,lr(t,c),Ln(o,t,c,-1))}return cd(),o=rc(Error(K(421))),qo(t,e,f,o)}return c.data==="$?"?(e.flags|=128,e.child=t.child,e=px.bind(null,t),c._reactRetry=e,null):(t=d.treeContext,un=kr(c.nextSibling),dn=e,Ze=!0,Pn=null,t!==null&&(vn[En++]=rr,vn[En++]=ir,vn[En++]=ci,rr=t.id,ir=t.overflow,ci=e),e=rd(e,o.children),e.flags|=4096,e)}function j0(t,e,r){t.lanes|=e;var o=t.alternate;o!==null&&(o.lanes|=e),Hc(t.return,e,r)}function ic(t,e,r,o,c){var d=t.memoizedState;d===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:o,tail:r,tailMode:c}:(d.isBackwards=e,d.rendering=null,d.renderingStartTime=0,d.last=o,d.tail=r,d.tailMode=c)}function S1(t,e,r){var o=e.pendingProps,c=o.revealOrder,d=o.tail;if(Ht(t,e,o.children,r),o=tt.current,o&2)o=o&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&j0(t,r,e);else if(t.tag===19)j0(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}o&=1}if(He(tt,o),!(e.mode&1))e.memoizedState=null;else switch(c){case"forwards":for(r=e.child,c=null;r!==null;)t=r.alternate,t!==null&&Pa(t)===null&&(c=r),r=r.sibling;r=c,r===null?(c=e.child,e.child=null):(c=r.sibling,r.sibling=null),ic(e,!1,c,r,d);break;case"backwards":for(r=null,c=e.child,e.child=null;c!==null;){if(t=c.alternate,t!==null&&Pa(t)===null){e.child=c;break}t=c.sibling,c.sibling=r,r=c,c=t}ic(e,!0,r,null,d);break;case"together":ic(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function fa(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function cr(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),di|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(K(153));if(e.child!==null){for(t=e.child,r=Lr(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Lr(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function rx(t,e,r){switch(e.tag){case 3:_1(e),ts();break;case 5:Zf(e);break;case 1:sn(e.type)&&Ta(e);break;case 4:Ku(e,e.stateNode.containerInfo);break;case 10:var o=e.type._context,c=e.memoizedProps.value;He(Ra,o._currentValue),o._currentValue=c;break;case 13:if(o=e.memoizedState,o!==null)return o.dehydrated!==null?(He(tt,tt.current&1),e.flags|=128,null):r&e.child.childLanes?A1(t,e,r):(He(tt,tt.current&1),t=cr(t,e,r),t!==null?t.sibling:null);He(tt,tt.current&1);break;case 19:if(o=(r&e.childLanes)!==0,t.flags&128){if(o)return S1(t,e,r);e.flags|=128}if(c=e.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),He(tt,tt.current),o)break;return null;case 22:case 23:return e.lanes=0,E1(t,e,r)}return cr(t,e,r)}var b1,Qc,I1,T1;b1=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Qc=function(){};I1=function(t,e,r,o){var c=t.memoizedProps;if(c!==o){t=e.stateNode,si(qn.current);var d=null;switch(r){case"input":c=vc(t,c),o=vc(t,o),d=[];break;case"select":c=rt({},c,{value:void 0}),o=rt({},o,{value:void 0}),d=[];break;case"textarea":c=_c(t,c),o=_c(t,o),d=[];break;default:typeof c.onClick!="function"&&typeof o.onClick=="function"&&(t.onclick=ba)}Sc(r,o);var f;r=null;for(m in c)if(!o.hasOwnProperty(m)&&c.hasOwnProperty(m)&&c[m]!=null)if(m==="style"){var x=c[m];for(f in x)x.hasOwnProperty(f)&&(r||(r={}),r[f]="")}else m!=="dangerouslySetInnerHTML"&&m!=="children"&&m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(Zs.hasOwnProperty(m)?d||(d=[]):(d=d||[]).push(m,null));for(m in o){var w=o[m];if(x=c!=null?c[m]:void 0,o.hasOwnProperty(m)&&w!==x&&(w!=null||x!=null))if(m==="style")if(x){for(f in x)!x.hasOwnProperty(f)||w&&w.hasOwnProperty(f)||(r||(r={}),r[f]="");for(f in w)w.hasOwnProperty(f)&&x[f]!==w[f]&&(r||(r={}),r[f]=w[f])}else r||(d||(d=[]),d.push(m,r)),r=w;else m==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,x=x?x.__html:void 0,w!=null&&x!==w&&(d=d||[]).push(m,w)):m==="children"?typeof w!="string"&&typeof w!="number"||(d=d||[]).push(m,""+w):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&(Zs.hasOwnProperty(m)?(w!=null&&m==="onScroll"&&Xe("scroll",t),d||x===w||(d=[])):(d=d||[]).push(m,w))}r&&(d=d||[]).push("style",r);var m=d;(e.updateQueue=m)&&(e.flags|=4)}};T1=function(t,e,r,o){r!==o&&(e.flags|=4)};function Os(t,e){if(!Ze)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function Ft(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,o=0;if(e)for(var c=t.child;c!==null;)r|=c.lanes|c.childLanes,o|=c.subtreeFlags&14680064,o|=c.flags&14680064,c.return=t,c=c.sibling;else for(c=t.child;c!==null;)r|=c.lanes|c.childLanes,o|=c.subtreeFlags,o|=c.flags,c.return=t,c=c.sibling;return t.subtreeFlags|=o,t.childLanes=r,e}function ix(t,e,r){var o=e.pendingProps;switch(zu(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ft(e),null;case 1:return sn(e.type)&&Ia(),Ft(e),null;case 3:return o=e.stateNode,rs(),Ye(rn),Ye(Ut),Zu(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(t===null||t.child===null)&&(Yo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Pn!==null&&(ou(Pn),Pn=null))),Qc(t,e),Ft(e),null;case 5:qu(e);var c=si(co.current);if(r=e.type,t!==null&&e.stateNode!=null)I1(t,e,r,o,c),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!o){if(e.stateNode===null)throw Error(K(166));return Ft(e),null}if(t=si(qn.current),Yo(e)){o=e.stateNode,r=e.type;var d=e.memoizedProps;switch(o[Yn]=e,o[ao]=d,t=(e.mode&1)!==0,r){case"dialog":Xe("cancel",o),Xe("close",o);break;case"iframe":case"object":case"embed":Xe("load",o);break;case"video":case"audio":for(c=0;c<Ls.length;c++)Xe(Ls[c],o);break;case"source":Xe("error",o);break;case"img":case"image":case"link":Xe("error",o),Xe("load",o);break;case"details":Xe("toggle",o);break;case"input":Yd(o,d),Xe("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!d.multiple},Xe("invalid",o);break;case"textarea":qd(o,d),Xe("invalid",o)}Sc(r,d),c=null;for(var f in d)if(d.hasOwnProperty(f)){var x=d[f];f==="children"?typeof x=="string"?o.textContent!==x&&(d.suppressHydrationWarning!==!0&&$o(o.textContent,x,t),c=["children",x]):typeof x=="number"&&o.textContent!==""+x&&(d.suppressHydrationWarning!==!0&&$o(o.textContent,x,t),c=["children",""+x]):Zs.hasOwnProperty(f)&&x!=null&&f==="onScroll"&&Xe("scroll",o)}switch(r){case"input":jo(o),Kd(o,d,!0);break;case"textarea":jo(o),Zd(o);break;case"select":case"option":break;default:typeof d.onClick=="function"&&(o.onclick=ba)}o=c,e.updateQueue=o,o!==null&&(e.flags|=4)}else{f=c.nodeType===9?c:c.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=tf(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=f.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof o.is=="string"?t=f.createElement(r,{is:o.is}):(t=f.createElement(r),r==="select"&&(f=t,o.multiple?f.multiple=!0:o.size&&(f.size=o.size))):t=f.createElementNS(t,r),t[Yn]=e,t[ao]=o,b1(t,e,!1,!1),e.stateNode=t;e:{switch(f=bc(r,o),r){case"dialog":Xe("cancel",t),Xe("close",t),c=o;break;case"iframe":case"object":case"embed":Xe("load",t),c=o;break;case"video":case"audio":for(c=0;c<Ls.length;c++)Xe(Ls[c],t);c=o;break;case"source":Xe("error",t),c=o;break;case"img":case"image":case"link":Xe("error",t),Xe("load",t),c=o;break;case"details":Xe("toggle",t),c=o;break;case"input":Yd(t,o),c=vc(t,o),Xe("invalid",t);break;case"option":c=o;break;case"select":t._wrapperState={wasMultiple:!!o.multiple},c=rt({},o,{value:void 0}),Xe("invalid",t);break;case"textarea":qd(t,o),c=_c(t,o),Xe("invalid",t);break;default:c=o}Sc(r,c),x=c;for(d in x)if(x.hasOwnProperty(d)){var w=x[d];d==="style"?sf(t,w):d==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,w!=null&&nf(t,w)):d==="children"?typeof w=="string"?(r!=="textarea"||w!=="")&&Qs(t,w):typeof w=="number"&&Qs(t,""+w):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Zs.hasOwnProperty(d)?w!=null&&d==="onScroll"&&Xe("scroll",t):w!=null&&Iu(t,d,w,f))}switch(r){case"input":jo(t),Kd(t,o,!1);break;case"textarea":jo(t),Zd(t);break;case"option":o.value!=null&&t.setAttribute("value",""+Br(o.value));break;case"select":t.multiple=!!o.multiple,d=o.value,d!=null?$i(t,!!o.multiple,d,!1):o.defaultValue!=null&&$i(t,!!o.multiple,o.defaultValue,!0);break;default:typeof c.onClick=="function"&&(t.onclick=ba)}switch(r){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ft(e),null;case 6:if(t&&e.stateNode!=null)T1(t,e,t.memoizedProps,o);else{if(typeof o!="string"&&e.stateNode===null)throw Error(K(166));if(r=si(co.current),si(qn.current),Yo(e)){if(o=e.stateNode,r=e.memoizedProps,o[Yn]=e,(d=o.nodeValue!==r)&&(t=dn,t!==null))switch(t.tag){case 3:$o(o.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&$o(o.nodeValue,r,(t.mode&1)!==0)}d&&(e.flags|=4)}else o=(r.nodeType===9?r:r.ownerDocument).createTextNode(o),o[Yn]=e,e.stateNode=o}return Ft(e),null;case 13:if(Ye(tt),o=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ze&&un!==null&&e.mode&1&&!(e.flags&128))Xf(),ts(),e.flags|=98560,d=!1;else if(d=Yo(e),o!==null&&o.dehydrated!==null){if(t===null){if(!d)throw Error(K(318));if(d=e.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(K(317));d[Yn]=e}else ts(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ft(e),d=!1}else Pn!==null&&(ou(Pn),Pn=null),d=!0;if(!d)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(o=o!==null,o!==(t!==null&&t.memoizedState!==null)&&o&&(e.child.flags|=8192,e.mode&1&&(t===null||tt.current&1?Et===0&&(Et=3):cd())),e.updateQueue!==null&&(e.flags|=4),Ft(e),null);case 4:return rs(),Qc(t,e),t===null&&so(e.stateNode.containerInfo),Ft(e),null;case 10:return Xu(e.type._context),Ft(e),null;case 17:return sn(e.type)&&Ia(),Ft(e),null;case 19:if(Ye(tt),d=e.memoizedState,d===null)return Ft(e),null;if(o=(e.flags&128)!==0,f=d.rendering,f===null)if(o)Os(d,!1);else{if(Et!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(f=Pa(t),f!==null){for(e.flags|=128,Os(d,!1),o=f.updateQueue,o!==null&&(e.updateQueue=o,e.flags|=4),e.subtreeFlags=0,o=r,r=e.child;r!==null;)d=r,t=o,d.flags&=14680066,f=d.alternate,f===null?(d.childLanes=0,d.lanes=t,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=f.childLanes,d.lanes=f.lanes,d.child=f.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=f.memoizedProps,d.memoizedState=f.memoizedState,d.updateQueue=f.updateQueue,d.type=f.type,t=f.dependencies,d.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return He(tt,tt.current&1|2),e.child}t=t.sibling}d.tail!==null&&dt()>ss&&(e.flags|=128,o=!0,Os(d,!1),e.lanes=4194304)}else{if(!o)if(t=Pa(f),t!==null){if(e.flags|=128,o=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Os(d,!0),d.tail===null&&d.tailMode==="hidden"&&!f.alternate&&!Ze)return Ft(e),null}else 2*dt()-d.renderingStartTime>ss&&r!==1073741824&&(e.flags|=128,o=!0,Os(d,!1),e.lanes=4194304);d.isBackwards?(f.sibling=e.child,e.child=f):(r=d.last,r!==null?r.sibling=f:e.child=f,d.last=f)}return d.tail!==null?(e=d.tail,d.rendering=e,d.tail=e.sibling,d.renderingStartTime=dt(),e.sibling=null,r=tt.current,He(tt,o?r&1|2:r&1),e):(Ft(e),null);case 22:case 23:return ld(),o=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==o&&(e.flags|=8192),o&&e.mode&1?cn&1073741824&&(Ft(e),e.subtreeFlags&6&&(e.flags|=8192)):Ft(e),null;case 24:return null;case 25:return null}throw Error(K(156,e.tag))}function sx(t,e){switch(zu(e),e.tag){case 1:return sn(e.type)&&Ia(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return rs(),Ye(rn),Ye(Ut),Zu(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return qu(e),null;case 13:if(Ye(tt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(K(340));ts()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ye(tt),null;case 4:return rs(),null;case 10:return Xu(e.type._context),null;case 22:case 23:return ld(),null;case 24:return null;default:return null}}var Zo=!1,jt=!1,ox=typeof WeakSet=="function"?WeakSet:Set,se=null;function Hi(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(o){ct(t,e,o)}else r.current=null}function Jc(t,e,r){try{r()}catch(o){ct(t,e,o)}}var U0=!1;function ax(t,e){if(Lc=_a,t=Df(),Uu(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var o=r.getSelection&&r.getSelection();if(o&&o.rangeCount!==0){r=o.anchorNode;var c=o.anchorOffset,d=o.focusNode;o=o.focusOffset;try{r.nodeType,d.nodeType}catch{r=null;break e}var f=0,x=-1,w=-1,m=0,C=0,_=t,O=null;t:for(;;){for(var P;_!==r||c!==0&&_.nodeType!==3||(x=f+c),_!==d||o!==0&&_.nodeType!==3||(w=f+o),_.nodeType===3&&(f+=_.nodeValue.length),(P=_.firstChild)!==null;)O=_,_=P;for(;;){if(_===t)break t;if(O===r&&++m===c&&(x=f),O===d&&++C===o&&(w=f),(P=_.nextSibling)!==null)break;_=O,O=_.parentNode}_=P}r=x===-1||w===-1?null:{start:x,end:w}}else r=null}r=r||{start:0,end:0}}else r=null;for(Bc={focusedElem:t,selectionRange:r},_a=!1,se=e;se!==null;)if(e=se,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,se=t;else for(;se!==null;){e=se;try{var M=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(M!==null){var F=M.memoizedProps,G=M.memoizedState,k=e.stateNode,N=k.getSnapshotBeforeUpdate(e.elementType===e.type?F:Rn(e.type,F),G);k.__reactInternalSnapshotBeforeUpdate=N}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(K(163))}}catch(L){ct(e,e.return,L)}if(t=e.sibling,t!==null){t.return=e.return,se=t;break}se=e.return}return M=U0,U0=!1,M}function Hs(t,e,r){var o=e.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var c=o=o.next;do{if((c.tag&t)===t){var d=c.destroy;c.destroy=void 0,d!==void 0&&Jc(e,r,d)}c=c.next}while(c!==o)}}function rl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var o=r.create;r.destroy=o()}r=r.next}while(r!==e)}}function eu(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function N1(t){var e=t.alternate;e!==null&&(t.alternate=null,N1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Yn],delete e[ao],delete e[Uc],delete e[Wp],delete e[Hp])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function O1(t){return t.tag===5||t.tag===3||t.tag===4}function V0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||O1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function tu(t,e,r){var o=t.tag;if(o===5||o===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=ba));else if(o!==4&&(t=t.child,t!==null))for(tu(t,e,r),t=t.sibling;t!==null;)tu(t,e,r),t=t.sibling}function nu(t,e,r){var o=t.tag;if(o===5||o===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(o!==4&&(t=t.child,t!==null))for(nu(t,e,r),t=t.sibling;t!==null;)nu(t,e,r),t=t.sibling}var Rt=null,kn=!1;function yr(t,e,r){for(r=r.child;r!==null;)R1(t,e,r),r=r.sibling}function R1(t,e,r){if(Kn&&typeof Kn.onCommitFiberUnmount=="function")try{Kn.onCommitFiberUnmount(Ka,r)}catch{}switch(r.tag){case 5:jt||Hi(r,e);case 6:var o=Rt,c=kn;Rt=null,yr(t,e,r),Rt=o,kn=c,Rt!==null&&(kn?(t=Rt,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Rt.removeChild(r.stateNode));break;case 18:Rt!==null&&(kn?(t=Rt,r=r.stateNode,t.nodeType===8?Zl(t.parentNode,r):t.nodeType===1&&Zl(t,r),no(t)):Zl(Rt,r.stateNode));break;case 4:o=Rt,c=kn,Rt=r.stateNode.containerInfo,kn=!0,yr(t,e,r),Rt=o,kn=c;break;case 0:case 11:case 14:case 15:if(!jt&&(o=r.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){c=o=o.next;do{var d=c,f=d.destroy;d=d.tag,f!==void 0&&(d&2||d&4)&&Jc(r,e,f),c=c.next}while(c!==o)}yr(t,e,r);break;case 1:if(!jt&&(Hi(r,e),o=r.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=r.memoizedProps,o.state=r.memoizedState,o.componentWillUnmount()}catch(x){ct(r,e,x)}yr(t,e,r);break;case 21:yr(t,e,r);break;case 22:r.mode&1?(jt=(o=jt)||r.memoizedState!==null,yr(t,e,r),jt=o):yr(t,e,r);break;default:yr(t,e,r)}}function z0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new ox),e.forEach(function(o){var c=xx.bind(null,t,o);r.has(o)||(r.add(o),o.then(c,c))})}}function Nn(t,e){var r=e.deletions;if(r!==null)for(var o=0;o<r.length;o++){var c=r[o];try{var d=t,f=e,x=f;e:for(;x!==null;){switch(x.tag){case 5:Rt=x.stateNode,kn=!1;break e;case 3:Rt=x.stateNode.containerInfo,kn=!0;break e;case 4:Rt=x.stateNode.containerInfo,kn=!0;break e}x=x.return}if(Rt===null)throw Error(K(160));R1(d,f,c),Rt=null,kn=!1;var w=c.alternate;w!==null&&(w.return=null),c.return=null}catch(m){ct(c,e,m)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)k1(e,t),e=e.sibling}function k1(t,e){var r=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Nn(e,t),Gn(t),o&4){try{Hs(3,t,t.return),rl(3,t)}catch(F){ct(t,t.return,F)}try{Hs(5,t,t.return)}catch(F){ct(t,t.return,F)}}break;case 1:Nn(e,t),Gn(t),o&512&&r!==null&&Hi(r,r.return);break;case 5:if(Nn(e,t),Gn(t),o&512&&r!==null&&Hi(r,r.return),t.flags&32){var c=t.stateNode;try{Qs(c,"")}catch(F){ct(t,t.return,F)}}if(o&4&&(c=t.stateNode,c!=null)){var d=t.memoizedProps,f=r!==null?r.memoizedProps:d,x=t.type,w=t.updateQueue;if(t.updateQueue=null,w!==null)try{x==="input"&&d.type==="radio"&&d.name!=null&&Jh(c,d),bc(x,f);var m=bc(x,d);for(f=0;f<w.length;f+=2){var C=w[f],_=w[f+1];C==="style"?sf(c,_):C==="dangerouslySetInnerHTML"?nf(c,_):C==="children"?Qs(c,_):Iu(c,C,_,m)}switch(x){case"input":Ec(c,d);break;case"textarea":ef(c,d);break;case"select":var O=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!d.multiple;var P=d.value;P!=null?$i(c,!!d.multiple,P,!1):O!==!!d.multiple&&(d.defaultValue!=null?$i(c,!!d.multiple,d.defaultValue,!0):$i(c,!!d.multiple,d.multiple?[]:"",!1))}c[ao]=d}catch(F){ct(t,t.return,F)}}break;case 6:if(Nn(e,t),Gn(t),o&4){if(t.stateNode===null)throw Error(K(162));c=t.stateNode,d=t.memoizedProps;try{c.nodeValue=d}catch(F){ct(t,t.return,F)}}break;case 3:if(Nn(e,t),Gn(t),o&4&&r!==null&&r.memoizedState.isDehydrated)try{no(e.containerInfo)}catch(F){ct(t,t.return,F)}break;case 4:Nn(e,t),Gn(t);break;case 13:Nn(e,t),Gn(t),c=t.child,c.flags&8192&&(d=c.memoizedState!==null,c.stateNode.isHidden=d,!d||c.alternate!==null&&c.alternate.memoizedState!==null||(od=dt())),o&4&&z0(t);break;case 22:if(C=r!==null&&r.memoizedState!==null,t.mode&1?(jt=(m=jt)||C,Nn(e,t),jt=m):Nn(e,t),Gn(t),o&8192){if(m=t.memoizedState!==null,(t.stateNode.isHidden=m)&&!C&&t.mode&1)for(se=t,C=t.child;C!==null;){for(_=se=C;se!==null;){switch(O=se,P=O.child,O.tag){case 0:case 11:case 14:case 15:Hs(4,O,O.return);break;case 1:Hi(O,O.return);var M=O.stateNode;if(typeof M.componentWillUnmount=="function"){o=O,r=O.return;try{e=o,M.props=e.memoizedProps,M.state=e.memoizedState,M.componentWillUnmount()}catch(F){ct(o,r,F)}}break;case 5:Hi(O,O.return);break;case 22:if(O.memoizedState!==null){H0(_);continue}}P!==null?(P.return=O,se=P):H0(_)}C=C.sibling}e:for(C=null,_=t;;){if(_.tag===5){if(C===null){C=_;try{c=_.stateNode,m?(d=c.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none"):(x=_.stateNode,w=_.memoizedProps.style,f=w!=null&&w.hasOwnProperty("display")?w.display:null,x.style.display=rf("display",f))}catch(F){ct(t,t.return,F)}}}else if(_.tag===6){if(C===null)try{_.stateNode.nodeValue=m?"":_.memoizedProps}catch(F){ct(t,t.return,F)}}else if((_.tag!==22&&_.tag!==23||_.memoizedState===null||_===t)&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===t)break e;for(;_.sibling===null;){if(_.return===null||_.return===t)break e;C===_&&(C=null),_=_.return}C===_&&(C=null),_.sibling.return=_.return,_=_.sibling}}break;case 19:Nn(e,t),Gn(t),o&4&&z0(t);break;case 21:break;default:Nn(e,t),Gn(t)}}function Gn(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(O1(r)){var o=r;break e}r=r.return}throw Error(K(160))}switch(o.tag){case 5:var c=o.stateNode;o.flags&32&&(Qs(c,""),o.flags&=-33);var d=V0(t);nu(t,d,c);break;case 3:case 4:var f=o.stateNode.containerInfo,x=V0(t);tu(t,x,f);break;default:throw Error(K(161))}}catch(w){ct(t,t.return,w)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function lx(t,e,r){se=t,D1(t)}function D1(t,e,r){for(var o=(t.mode&1)!==0;se!==null;){var c=se,d=c.child;if(c.tag===22&&o){var f=c.memoizedState!==null||Zo;if(!f){var x=c.alternate,w=x!==null&&x.memoizedState!==null||jt;x=Zo;var m=jt;if(Zo=f,(jt=w)&&!m)for(se=c;se!==null;)f=se,w=f.child,f.tag===22&&f.memoizedState!==null?G0(c):w!==null?(w.return=f,se=w):G0(c);for(;d!==null;)se=d,D1(d),d=d.sibling;se=c,Zo=x,jt=m}W0(t)}else c.subtreeFlags&8772&&d!==null?(d.return=c,se=d):W0(t)}}function W0(t){for(;se!==null;){var e=se;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:jt||rl(5,e);break;case 1:var o=e.stateNode;if(e.flags&4&&!jt)if(r===null)o.componentDidMount();else{var c=e.elementType===e.type?r.memoizedProps:Rn(e.type,r.memoizedProps);o.componentDidUpdate(c,r.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var d=e.updateQueue;d!==null&&I0(e,d,o);break;case 3:var f=e.updateQueue;if(f!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}I0(e,f,r)}break;case 5:var x=e.stateNode;if(r===null&&e.flags&4){r=x;var w=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":w.autoFocus&&r.focus();break;case"img":w.src&&(r.src=w.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var m=e.alternate;if(m!==null){var C=m.memoizedState;if(C!==null){var _=C.dehydrated;_!==null&&no(_)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(K(163))}jt||e.flags&512&&eu(e)}catch(O){ct(e,e.return,O)}}if(e===t){se=null;break}if(r=e.sibling,r!==null){r.return=e.return,se=r;break}se=e.return}}function H0(t){for(;se!==null;){var e=se;if(e===t){se=null;break}var r=e.sibling;if(r!==null){r.return=e.return,se=r;break}se=e.return}}function G0(t){for(;se!==null;){var e=se;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{rl(4,e)}catch(w){ct(e,r,w)}break;case 1:var o=e.stateNode;if(typeof o.componentDidMount=="function"){var c=e.return;try{o.componentDidMount()}catch(w){ct(e,c,w)}}var d=e.return;try{eu(e)}catch(w){ct(e,d,w)}break;case 5:var f=e.return;try{eu(e)}catch(w){ct(e,f,w)}}}catch(w){ct(e,e.return,w)}if(e===t){se=null;break}var x=e.sibling;if(x!==null){x.return=e.return,se=x;break}se=e.return}}var cx=Math.ceil,Ba=ur.ReactCurrentDispatcher,id=ur.ReactCurrentOwner,_n=ur.ReactCurrentBatchConfig,Oe=0,bt=null,gt=null,Dt=0,cn=0,Gi=Ur(0),Et=0,go=null,di=0,il=0,sd=0,Gs=null,en=null,od=0,ss=1/0,er=null,Fa=!1,ru=null,Pr=null,Qo=!1,Tr=null,ja=0,Xs=0,iu=null,ga=-1,pa=0;function Gt(){return Oe&6?dt():ga!==-1?ga:ga=dt()}function Mr(t){return t.mode&1?Oe&2&&Dt!==0?Dt&-Dt:Xp.transition!==null?(pa===0&&(pa=mf()),pa):(t=Me,t!==0||(t=window.event,t=t===void 0?16:Af(t.type)),t):1}function Ln(t,e,r,o){if(50<Xs)throw Xs=0,iu=null,Error(K(185));mo(t,r,o),(!(Oe&2)||t!==bt)&&(t===bt&&(!(Oe&2)&&(il|=r),Et===4&&Sr(t,Dt)),on(t,o),r===1&&Oe===0&&!(e.mode&1)&&(ss=dt()+500,el&&Vr()))}function on(t,e){var r=t.callbackNode;X2(t,e);var o=Ca(t,t===bt?Dt:0);if(o===0)r!==null&&e0(r),t.callbackNode=null,t.callbackPriority=0;else if(e=o&-o,t.callbackPriority!==e){if(r!=null&&e0(r),e===1)t.tag===0?Gp(X0.bind(null,t)):Wf(X0.bind(null,t)),Vp(function(){!(Oe&6)&&Vr()}),r=null;else{switch(wf(o)){case 1:r=ku;break;case 4:r=pf;break;case 16:r=Ea;break;case 536870912:r=xf;break;default:r=Ea}r=V1(r,P1.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function P1(t,e){if(ga=-1,pa=0,Oe&6)throw Error(K(327));var r=t.callbackNode;if(Qi()&&t.callbackNode!==r)return null;var o=Ca(t,t===bt?Dt:0);if(o===0)return null;if(o&30||o&t.expiredLanes||e)e=Ua(t,o);else{e=o;var c=Oe;Oe|=2;var d=L1();(bt!==t||Dt!==e)&&(er=null,ss=dt()+500,oi(t,e));do try{hx();break}catch(x){M1(t,x)}while(!0);Gu(),Ba.current=d,Oe=c,gt!==null?e=0:(bt=null,Dt=0,e=Et)}if(e!==0){if(e===2&&(c=Rc(t),c!==0&&(o=c,e=su(t,c))),e===1)throw r=go,oi(t,0),Sr(t,o),on(t,dt()),r;if(e===6)Sr(t,o);else{if(c=t.current.alternate,!(o&30)&&!ux(c)&&(e=Ua(t,o),e===2&&(d=Rc(t),d!==0&&(o=d,e=su(t,d))),e===1))throw r=go,oi(t,0),Sr(t,o),on(t,dt()),r;switch(t.finishedWork=c,t.finishedLanes=o,e){case 0:case 1:throw Error(K(345));case 2:ei(t,en,er);break;case 3:if(Sr(t,o),(o&130023424)===o&&(e=od+500-dt(),10<e)){if(Ca(t,0)!==0)break;if(c=t.suspendedLanes,(c&o)!==o){Gt(),t.pingedLanes|=t.suspendedLanes&c;break}t.timeoutHandle=jc(ei.bind(null,t,en,er),e);break}ei(t,en,er);break;case 4:if(Sr(t,o),(o&4194240)===o)break;for(e=t.eventTimes,c=-1;0<o;){var f=31-Mn(o);d=1<<f,f=e[f],f>c&&(c=f),o&=~d}if(o=c,o=dt()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*cx(o/1960))-o,10<o){t.timeoutHandle=jc(ei.bind(null,t,en,er),o);break}ei(t,en,er);break;case 5:ei(t,en,er);break;default:throw Error(K(329))}}}return on(t,dt()),t.callbackNode===r?P1.bind(null,t):null}function su(t,e){var r=Gs;return t.current.memoizedState.isDehydrated&&(oi(t,e).flags|=256),t=Ua(t,e),t!==2&&(e=en,en=r,e!==null&&ou(e)),t}function ou(t){en===null?en=t:en.push.apply(en,t)}function ux(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var o=0;o<r.length;o++){var c=r[o],d=c.getSnapshot;c=c.value;try{if(!Bn(d(),c))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Sr(t,e){for(e&=~sd,e&=~il,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Mn(e),o=1<<r;t[r]=-1,e&=~o}}function X0(t){if(Oe&6)throw Error(K(327));Qi();var e=Ca(t,0);if(!(e&1))return on(t,dt()),null;var r=Ua(t,e);if(t.tag!==0&&r===2){var o=Rc(t);o!==0&&(e=o,r=su(t,o))}if(r===1)throw r=go,oi(t,0),Sr(t,e),on(t,dt()),r;if(r===6)throw Error(K(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ei(t,en,er),on(t,dt()),null}function ad(t,e){var r=Oe;Oe|=1;try{return t(e)}finally{Oe=r,Oe===0&&(ss=dt()+500,el&&Vr())}}function hi(t){Tr!==null&&Tr.tag===0&&!(Oe&6)&&Qi();var e=Oe;Oe|=1;var r=_n.transition,o=Me;try{if(_n.transition=null,Me=1,t)return t()}finally{Me=o,_n.transition=r,Oe=e,!(Oe&6)&&Vr()}}function ld(){cn=Gi.current,Ye(Gi)}function oi(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,Up(r)),gt!==null)for(r=gt.return;r!==null;){var o=r;switch(zu(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&Ia();break;case 3:rs(),Ye(rn),Ye(Ut),Zu();break;case 5:qu(o);break;case 4:rs();break;case 13:Ye(tt);break;case 19:Ye(tt);break;case 10:Xu(o.type._context);break;case 22:case 23:ld()}r=r.return}if(bt=t,gt=t=Lr(t.current,null),Dt=cn=e,Et=0,go=null,sd=il=di=0,en=Gs=null,ii!==null){for(e=0;e<ii.length;e++)if(r=ii[e],o=r.interleaved,o!==null){r.interleaved=null;var c=o.next,d=r.pending;if(d!==null){var f=d.next;d.next=c,o.next=f}r.pending=o}ii=null}return t}function M1(t,e){do{var r=gt;try{if(Gu(),da.current=La,Ma){for(var o=nt.memoizedState;o!==null;){var c=o.queue;c!==null&&(c.pending=null),o=o.next}Ma=!1}if(ui=0,St=vt=nt=null,Ws=!1,uo=0,id.current=null,r===null||r.return===null){Et=1,go=e,gt=null;break}e:{var d=t,f=r.return,x=r,w=e;if(e=Dt,x.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){var m=w,C=x,_=C.tag;if(!(C.mode&1)&&(_===0||_===11||_===15)){var O=C.alternate;O?(C.updateQueue=O.updateQueue,C.memoizedState=O.memoizedState,C.lanes=O.lanes):(C.updateQueue=null,C.memoizedState=null)}var P=D0(f);if(P!==null){P.flags&=-257,P0(P,f,x,d,e),P.mode&1&&k0(d,m,e),e=P,w=m;var M=e.updateQueue;if(M===null){var F=new Set;F.add(w),e.updateQueue=F}else M.add(w);break e}else{if(!(e&1)){k0(d,m,e),cd();break e}w=Error(K(426))}}else if(Ze&&x.mode&1){var G=D0(f);if(G!==null){!(G.flags&65536)&&(G.flags|=256),P0(G,f,x,d,e),Wu(is(w,x));break e}}d=w=is(w,x),Et!==4&&(Et=2),Gs===null?Gs=[d]:Gs.push(d),d=f;do{switch(d.tag){case 3:d.flags|=65536,e&=-e,d.lanes|=e;var k=w1(d,w,e);b0(d,k);break e;case 1:x=w;var N=d.type,b=d.stateNode;if(!(d.flags&128)&&(typeof N.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Pr===null||!Pr.has(b)))){d.flags|=65536,e&=-e,d.lanes|=e;var L=y1(d,x,e);b0(d,L);break e}}d=d.return}while(d!==null)}F1(r)}catch(J){e=J,gt===r&&r!==null&&(gt=r=r.return);continue}break}while(!0)}function L1(){var t=Ba.current;return Ba.current=La,t===null?La:t}function cd(){(Et===0||Et===3||Et===2)&&(Et=4),bt===null||!(di&268435455)&&!(il&268435455)||Sr(bt,Dt)}function Ua(t,e){var r=Oe;Oe|=2;var o=L1();(bt!==t||Dt!==e)&&(er=null,oi(t,e));do try{dx();break}catch(c){M1(t,c)}while(!0);if(Gu(),Oe=r,Ba.current=o,gt!==null)throw Error(K(261));return bt=null,Dt=0,Et}function dx(){for(;gt!==null;)B1(gt)}function hx(){for(;gt!==null&&!B2();)B1(gt)}function B1(t){var e=U1(t.alternate,t,cn);t.memoizedProps=t.pendingProps,e===null?F1(t):gt=e,id.current=null}function F1(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=sx(r,e),r!==null){r.flags&=32767,gt=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Et=6,gt=null;return}}else if(r=ix(r,e,cn),r!==null){gt=r;return}if(e=e.sibling,e!==null){gt=e;return}gt=e=t}while(e!==null);Et===0&&(Et=5)}function ei(t,e,r){var o=Me,c=_n.transition;try{_n.transition=null,Me=1,fx(t,e,r,o)}finally{_n.transition=c,Me=o}return null}function fx(t,e,r,o){do Qi();while(Tr!==null);if(Oe&6)throw Error(K(327));r=t.finishedWork;var c=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(K(177));t.callbackNode=null,t.callbackPriority=0;var d=r.lanes|r.childLanes;if($2(t,d),t===bt&&(gt=bt=null,Dt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Qo||(Qo=!0,V1(Ea,function(){return Qi(),null})),d=(r.flags&15990)!==0,r.subtreeFlags&15990||d){d=_n.transition,_n.transition=null;var f=Me;Me=1;var x=Oe;Oe|=4,id.current=null,ax(t,r),k1(r,t),Dp(Bc),_a=!!Lc,Bc=Lc=null,t.current=r,lx(r),F2(),Oe=x,Me=f,_n.transition=d}else t.current=r;if(Qo&&(Qo=!1,Tr=t,ja=c),d=t.pendingLanes,d===0&&(Pr=null),V2(r.stateNode),on(t,dt()),e!==null)for(o=t.onRecoverableError,r=0;r<e.length;r++)c=e[r],o(c.value,{componentStack:c.stack,digest:c.digest});if(Fa)throw Fa=!1,t=ru,ru=null,t;return ja&1&&t.tag!==0&&Qi(),d=t.pendingLanes,d&1?t===iu?Xs++:(Xs=0,iu=t):Xs=0,Vr(),null}function Qi(){if(Tr!==null){var t=wf(ja),e=_n.transition,r=Me;try{if(_n.transition=null,Me=16>t?16:t,Tr===null)var o=!1;else{if(t=Tr,Tr=null,ja=0,Oe&6)throw Error(K(331));var c=Oe;for(Oe|=4,se=t.current;se!==null;){var d=se,f=d.child;if(se.flags&16){var x=d.deletions;if(x!==null){for(var w=0;w<x.length;w++){var m=x[w];for(se=m;se!==null;){var C=se;switch(C.tag){case 0:case 11:case 15:Hs(8,C,d)}var _=C.child;if(_!==null)_.return=C,se=_;else for(;se!==null;){C=se;var O=C.sibling,P=C.return;if(N1(C),C===m){se=null;break}if(O!==null){O.return=P,se=O;break}se=P}}}var M=d.alternate;if(M!==null){var F=M.child;if(F!==null){M.child=null;do{var G=F.sibling;F.sibling=null,F=G}while(F!==null)}}se=d}}if(d.subtreeFlags&2064&&f!==null)f.return=d,se=f;else e:for(;se!==null;){if(d=se,d.flags&2048)switch(d.tag){case 0:case 11:case 15:Hs(9,d,d.return)}var k=d.sibling;if(k!==null){k.return=d.return,se=k;break e}se=d.return}}var N=t.current;for(se=N;se!==null;){f=se;var b=f.child;if(f.subtreeFlags&2064&&b!==null)b.return=f,se=b;else e:for(f=N;se!==null;){if(x=se,x.flags&2048)try{switch(x.tag){case 0:case 11:case 15:rl(9,x)}}catch(J){ct(x,x.return,J)}if(x===f){se=null;break e}var L=x.sibling;if(L!==null){L.return=x.return,se=L;break e}se=x.return}}if(Oe=c,Vr(),Kn&&typeof Kn.onPostCommitFiberRoot=="function")try{Kn.onPostCommitFiberRoot(Ka,t)}catch{}o=!0}return o}finally{Me=r,_n.transition=e}}return!1}function $0(t,e,r){e=is(r,e),e=w1(t,e,1),t=Dr(t,e,1),e=Gt(),t!==null&&(mo(t,1,e),on(t,e))}function ct(t,e,r){if(t.tag===3)$0(t,t,r);else for(;e!==null;){if(e.tag===3){$0(e,t,r);break}else if(e.tag===1){var o=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Pr===null||!Pr.has(o))){t=is(r,t),t=y1(e,t,1),e=Dr(e,t,1),t=Gt(),e!==null&&(mo(e,1,t),on(e,t));break}}e=e.return}}function gx(t,e,r){var o=t.pingCache;o!==null&&o.delete(e),e=Gt(),t.pingedLanes|=t.suspendedLanes&r,bt===t&&(Dt&r)===r&&(Et===4||Et===3&&(Dt&130023424)===Dt&&500>dt()-od?oi(t,0):sd|=r),on(t,e)}function j1(t,e){e===0&&(t.mode&1?(e=zo,zo<<=1,!(zo&130023424)&&(zo=4194304)):e=1);var r=Gt();t=lr(t,e),t!==null&&(mo(t,e,r),on(t,r))}function px(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),j1(t,r)}function xx(t,e){var r=0;switch(t.tag){case 13:var o=t.stateNode,c=t.memoizedState;c!==null&&(r=c.retryLane);break;case 19:o=t.stateNode;break;default:throw Error(K(314))}o!==null&&o.delete(e),j1(t,r)}var U1;U1=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||rn.current)nn=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return nn=!1,rx(t,e,r);nn=!!(t.flags&131072)}else nn=!1,Ze&&e.flags&1048576&&Hf(e,Oa,e.index);switch(e.lanes=0,e.tag){case 2:var o=e.type;fa(t,e),t=e.pendingProps;var c=es(e,Ut.current);Zi(e,r),c=Ju(null,e,o,t,c,r);var d=ed();return e.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,sn(o)?(d=!0,Ta(e)):d=!1,e.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,Yu(e),c.updater=nl,e.stateNode=c,c._reactInternals=e,Xc(e,o,t,r),e=Kc(null,e,o,!0,d,r)):(e.tag=0,Ze&&d&&Vu(e),Ht(null,e,c,r),e=e.child),e;case 16:o=e.elementType;e:{switch(fa(t,e),t=e.pendingProps,c=o._init,o=c(o._payload),e.type=o,c=e.tag=wx(o),t=Rn(o,t),c){case 0:e=Yc(null,e,o,t,r);break e;case 1:e=B0(null,e,o,t,r);break e;case 11:e=M0(null,e,o,t,r);break e;case 14:e=L0(null,e,o,Rn(o.type,t),r);break e}throw Error(K(306,o,""))}return e;case 0:return o=e.type,c=e.pendingProps,c=e.elementType===o?c:Rn(o,c),Yc(t,e,o,c,r);case 1:return o=e.type,c=e.pendingProps,c=e.elementType===o?c:Rn(o,c),B0(t,e,o,c,r);case 3:e:{if(_1(e),t===null)throw Error(K(387));o=e.pendingProps,d=e.memoizedState,c=d.element,qf(t,e),Da(e,o,null,r);var f=e.memoizedState;if(o=f.element,d.isDehydrated)if(d={element:o,isDehydrated:!1,cache:f.cache,pendingSuspenseBoundaries:f.pendingSuspenseBoundaries,transitions:f.transitions},e.updateQueue.baseState=d,e.memoizedState=d,e.flags&256){c=is(Error(K(423)),e),e=F0(t,e,o,r,c);break e}else if(o!==c){c=is(Error(K(424)),e),e=F0(t,e,o,r,c);break e}else for(un=kr(e.stateNode.containerInfo.firstChild),dn=e,Ze=!0,Pn=null,r=Yf(e,null,o,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ts(),o===c){e=cr(t,e,r);break e}Ht(t,e,o,r)}e=e.child}return e;case 5:return Zf(e),t===null&&Wc(e),o=e.type,c=e.pendingProps,d=t!==null?t.memoizedProps:null,f=c.children,Fc(o,c)?f=null:d!==null&&Fc(o,d)&&(e.flags|=32),C1(t,e),Ht(t,e,f,r),e.child;case 6:return t===null&&Wc(e),null;case 13:return A1(t,e,r);case 4:return Ku(e,e.stateNode.containerInfo),o=e.pendingProps,t===null?e.child=ns(e,null,o,r):Ht(t,e,o,r),e.child;case 11:return o=e.type,c=e.pendingProps,c=e.elementType===o?c:Rn(o,c),M0(t,e,o,c,r);case 7:return Ht(t,e,e.pendingProps,r),e.child;case 8:return Ht(t,e,e.pendingProps.children,r),e.child;case 12:return Ht(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(o=e.type._context,c=e.pendingProps,d=e.memoizedProps,f=c.value,He(Ra,o._currentValue),o._currentValue=f,d!==null)if(Bn(d.value,f)){if(d.children===c.children&&!rn.current){e=cr(t,e,r);break e}}else for(d=e.child,d!==null&&(d.return=e);d!==null;){var x=d.dependencies;if(x!==null){f=d.child;for(var w=x.firstContext;w!==null;){if(w.context===o){if(d.tag===1){w=sr(-1,r&-r),w.tag=2;var m=d.updateQueue;if(m!==null){m=m.shared;var C=m.pending;C===null?w.next=w:(w.next=C.next,C.next=w),m.pending=w}}d.lanes|=r,w=d.alternate,w!==null&&(w.lanes|=r),Hc(d.return,r,e),x.lanes|=r;break}w=w.next}}else if(d.tag===10)f=d.type===e.type?null:d.child;else if(d.tag===18){if(f=d.return,f===null)throw Error(K(341));f.lanes|=r,x=f.alternate,x!==null&&(x.lanes|=r),Hc(f,r,e),f=d.sibling}else f=d.child;if(f!==null)f.return=d;else for(f=d;f!==null;){if(f===e){f=null;break}if(d=f.sibling,d!==null){d.return=f.return,f=d;break}f=f.return}d=f}Ht(t,e,c.children,r),e=e.child}return e;case 9:return c=e.type,o=e.pendingProps.children,Zi(e,r),c=An(c),o=o(c),e.flags|=1,Ht(t,e,o,r),e.child;case 14:return o=e.type,c=Rn(o,e.pendingProps),c=Rn(o.type,c),L0(t,e,o,c,r);case 15:return v1(t,e,e.type,e.pendingProps,r);case 17:return o=e.type,c=e.pendingProps,c=e.elementType===o?c:Rn(o,c),fa(t,e),e.tag=1,sn(o)?(t=!0,Ta(e)):t=!1,Zi(e,r),m1(e,o,c),Xc(e,o,c,r),Kc(null,e,o,!0,t,r);case 19:return S1(t,e,r);case 22:return E1(t,e,r)}throw Error(K(156,e.tag))};function V1(t,e){return gf(t,e)}function mx(t,e,r,o){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cn(t,e,r,o){return new mx(t,e,r,o)}function ud(t){return t=t.prototype,!(!t||!t.isReactComponent)}function wx(t){if(typeof t=="function")return ud(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Nu)return 11;if(t===Ou)return 14}return 2}function Lr(t,e){var r=t.alternate;return r===null?(r=Cn(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function xa(t,e,r,o,c,d){var f=2;if(o=t,typeof t=="function")ud(t)&&(f=1);else if(typeof t=="string")f=5;else e:switch(t){case Mi:return ai(r.children,c,d,e);case Tu:f=8,c|=8;break;case xc:return t=Cn(12,r,e,c|2),t.elementType=xc,t.lanes=d,t;case mc:return t=Cn(13,r,e,c),t.elementType=mc,t.lanes=d,t;case wc:return t=Cn(19,r,e,c),t.elementType=wc,t.lanes=d,t;case qh:return sl(r,c,d,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Yh:f=10;break e;case Kh:f=9;break e;case Nu:f=11;break e;case Ou:f=14;break e;case Cr:f=16,o=null;break e}throw Error(K(130,t==null?t:typeof t,""))}return e=Cn(f,r,e,c),e.elementType=t,e.type=o,e.lanes=d,e}function ai(t,e,r,o){return t=Cn(7,t,o,e),t.lanes=r,t}function sl(t,e,r,o){return t=Cn(22,t,o,e),t.elementType=qh,t.lanes=r,t.stateNode={isHidden:!1},t}function sc(t,e,r){return t=Cn(6,t,null,e),t.lanes=r,t}function oc(t,e,r){return e=Cn(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function yx(t,e,r,o,c){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ul(0),this.expirationTimes=Ul(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ul(0),this.identifierPrefix=o,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function dd(t,e,r,o,c,d,f,x,w){return t=new yx(t,e,r,x,w),e===1?(e=1,d===!0&&(e|=8)):e=0,d=Cn(3,null,null,e),t.current=d,d.stateNode=t,d.memoizedState={element:o,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Yu(d),t}function vx(t,e,r){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Pi,key:o==null?null:""+o,children:t,containerInfo:e,implementation:r}}function z1(t){if(!t)return Fr;t=t._reactInternals;e:{if(gi(t)!==t||t.tag!==1)throw Error(K(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(sn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(K(171))}if(t.tag===1){var r=t.type;if(sn(r))return zf(t,r,e)}return e}function W1(t,e,r,o,c,d,f,x,w){return t=dd(r,o,!0,t,c,d,f,x,w),t.context=z1(null),r=t.current,o=Gt(),c=Mr(r),d=sr(o,c),d.callback=e??null,Dr(r,d,c),t.current.lanes=c,mo(t,c,o),on(t,o),t}function ol(t,e,r,o){var c=e.current,d=Gt(),f=Mr(c);return r=z1(r),e.context===null?e.context=r:e.pendingContext=r,e=sr(d,f),e.payload={element:t},o=o===void 0?null:o,o!==null&&(e.callback=o),t=Dr(c,e,f),t!==null&&(Ln(t,c,f,d),ua(t,c,f)),f}function Va(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Y0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function hd(t,e){Y0(t,e),(t=t.alternate)&&Y0(t,e)}function Ex(){return null}var H1=typeof reportError=="function"?reportError:function(t){console.error(t)};function fd(t){this._internalRoot=t}al.prototype.render=fd.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(K(409));ol(t,e,null,null)};al.prototype.unmount=fd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;hi(function(){ol(null,t,null,null)}),e[ar]=null}};function al(t){this._internalRoot=t}al.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ef();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Ar.length&&e!==0&&e<Ar[r].priority;r++);Ar.splice(r,0,t),r===0&&_f(t)}};function gd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ll(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function K0(){}function Cx(t,e,r,o,c){if(c){if(typeof o=="function"){var d=o;o=function(){var m=Va(f);d.call(m)}}var f=W1(e,o,t,0,null,!1,!1,"",K0);return t._reactRootContainer=f,t[ar]=f.current,so(t.nodeType===8?t.parentNode:t),hi(),f}for(;c=t.lastChild;)t.removeChild(c);if(typeof o=="function"){var x=o;o=function(){var m=Va(w);x.call(m)}}var w=dd(t,0,!1,null,null,!1,!1,"",K0);return t._reactRootContainer=w,t[ar]=w.current,so(t.nodeType===8?t.parentNode:t),hi(function(){ol(e,w,r,o)}),w}function cl(t,e,r,o,c){var d=r._reactRootContainer;if(d){var f=d;if(typeof c=="function"){var x=c;c=function(){var w=Va(f);x.call(w)}}ol(e,f,t,c)}else f=Cx(r,e,t,c,o);return Va(f)}yf=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Ms(e.pendingLanes);r!==0&&(Du(e,r|1),on(e,dt()),!(Oe&6)&&(ss=dt()+500,Vr()))}break;case 13:hi(function(){var o=lr(t,1);if(o!==null){var c=Gt();Ln(o,t,1,c)}}),hd(t,1)}};Pu=function(t){if(t.tag===13){var e=lr(t,134217728);if(e!==null){var r=Gt();Ln(e,t,134217728,r)}hd(t,134217728)}};vf=function(t){if(t.tag===13){var e=Mr(t),r=lr(t,e);if(r!==null){var o=Gt();Ln(r,t,e,o)}hd(t,e)}};Ef=function(){return Me};Cf=function(t,e){var r=Me;try{return Me=t,e()}finally{Me=r}};Tc=function(t,e,r){switch(e){case"input":if(Ec(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var o=r[e];if(o!==t&&o.form===t.form){var c=Ja(o);if(!c)throw Error(K(90));Qh(o),Ec(o,c)}}}break;case"textarea":ef(t,r);break;case"select":e=r.value,e!=null&&$i(t,!!r.multiple,e,!1)}};lf=ad;cf=hi;var _x={usingClientEntryPoint:!1,Events:[yo,ji,Ja,of,af,ad]},Rs={findFiberByHostInstance:ri,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ax={bundleType:Rs.bundleType,version:Rs.version,rendererPackageName:Rs.rendererPackageName,rendererConfig:Rs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ur.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=hf(t),t===null?null:t.stateNode},findFiberByHostInstance:Rs.findFiberByHostInstance||Ex,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jo.isDisabled&&Jo.supportsFiber)try{Ka=Jo.inject(Ax),Kn=Jo}catch{}}fn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_x;fn.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gd(e))throw Error(K(200));return vx(t,e,null,r)};fn.createRoot=function(t,e){if(!gd(t))throw Error(K(299));var r=!1,o="",c=H1;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(o=e.identifierPrefix),e.onRecoverableError!==void 0&&(c=e.onRecoverableError)),e=dd(t,1,!1,null,null,r,!1,o,c),t[ar]=e.current,so(t.nodeType===8?t.parentNode:t),new fd(e)};fn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(K(188)):(t=Object.keys(t).join(","),Error(K(268,t)));return t=hf(e),t=t===null?null:t.stateNode,t};fn.flushSync=function(t){return hi(t)};fn.hydrate=function(t,e,r){if(!ll(e))throw Error(K(200));return cl(null,t,e,!0,r)};fn.hydrateRoot=function(t,e,r){if(!gd(t))throw Error(K(405));var o=r!=null&&r.hydratedSources||null,c=!1,d="",f=H1;if(r!=null&&(r.unstable_strictMode===!0&&(c=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onRecoverableError!==void 0&&(f=r.onRecoverableError)),e=W1(e,null,t,1,r??null,c,!1,d,f),t[ar]=e.current,so(t),o)for(t=0;t<o.length;t++)r=o[t],c=r._getVersion,c=c(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,c]:e.mutableSourceEagerHydrationData.push(r,c);return new al(e)};fn.render=function(t,e,r){if(!ll(e))throw Error(K(200));return cl(null,t,e,!1,r)};fn.unmountComponentAtNode=function(t){if(!ll(t))throw Error(K(40));return t._reactRootContainer?(hi(function(){cl(null,null,t,!1,function(){t._reactRootContainer=null,t[ar]=null})}),!0):!1};fn.unstable_batchedUpdates=ad;fn.unstable_renderSubtreeIntoContainer=function(t,e,r,o){if(!ll(r))throw Error(K(200));if(t==null||t._reactInternals===void 0)throw Error(K(38));return cl(t,e,r,!1,o)};fn.version="18.3.1-next-f1338f8080-20240426";function G1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(G1)}catch(t){console.error(t)}}G1(),Hh.exports=fn;var Sx=Hh.exports,X1,q0=Sx;X1=q0.createRoot,q0.hydrateRoot;const bx="modulepreload",Ix=function(t){return"/"+t},Z0={},Eo=function(e,r,o){let c=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),x=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute("nonce"));c=Promise.allSettled(r.map(w=>{if(w=Ix(w),w in Z0)return;Z0[w]=!0;const m=w.endsWith(".css"),C=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${w}"]${C}`))return;const _=document.createElement("link");if(_.rel=m?"stylesheet":bx,m||(_.as="script"),_.crossOrigin="",_.href=w,x&&_.setAttribute("nonce",x),document.head.appendChild(_),m)return new Promise((O,P)=>{_.addEventListener("load",O),_.addEventListener("error",()=>P(new Error(`Unable to preload CSS for ${w}`)))})}))}function d(f){const x=new Event("vite:preloadError",{cancelable:!0});if(x.payload=f,window.dispatchEvent(x),!x.defaultPrevented)throw f}return c.then(f=>{for(const x of f||[])x.status==="rejected"&&d(x.reason);return e().catch(d)})},Tx=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Eo(async()=>{const{default:o}=await Promise.resolve().then(()=>us);return{default:o}},void 0).then(({default:o})=>o(...r)):e=fetch,(...r)=>e(...r)};class pd extends Error{constructor(e,r="FunctionsError",o){super(e),this.name=r,this.context=o}}class Nx extends pd{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Q0 extends pd{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class J0 extends pd{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var au;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(au||(au={}));var Ox=function(t,e,r,o){function c(d){return d instanceof r?d:new r(function(f){f(d)})}return new(r||(r=Promise))(function(d,f){function x(C){try{m(o.next(C))}catch(_){f(_)}}function w(C){try{m(o.throw(C))}catch(_){f(_)}}function m(C){C.done?d(C.value):c(C.value).then(x,w)}m((o=o.apply(t,e||[])).next())})};class Rx{constructor(e,{headers:r={},customFetch:o,region:c=au.Any}={}){this.url=e,this.headers=r,this.region=c,this.fetch=Tx(o)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,r={}){var o;return Ox(this,void 0,void 0,function*(){try{const{headers:c,method:d,body:f}=r;let x={},{region:w}=r;w||(w=this.region);const m=new URL(`${this.url}/${e}`);w&&w!=="any"&&(x["x-region"]=w,m.searchParams.set("forceFunctionRegion",w));let C;f&&(c&&!Object.prototype.hasOwnProperty.call(c,"Content-Type")||!c)&&(typeof Blob<"u"&&f instanceof Blob||f instanceof ArrayBuffer?(x["Content-Type"]="application/octet-stream",C=f):typeof f=="string"?(x["Content-Type"]="text/plain",C=f):typeof FormData<"u"&&f instanceof FormData?C=f:(x["Content-Type"]="application/json",C=JSON.stringify(f)));const _=yield this.fetch(m.toString(),{method:d||"POST",headers:Object.assign(Object.assign(Object.assign({},x),this.headers),c),body:C}).catch(F=>{throw new Nx(F)}),O=_.headers.get("x-relay-error");if(O&&O==="true")throw new Q0(_);if(!_.ok)throw new J0(_);let P=((o=_.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),M;return P==="application/json"?M=yield _.json():P==="application/octet-stream"?M=yield _.blob():P==="text/event-stream"?M=_:P==="multipart/form-data"?M=yield _.formData():M=yield _.text(),{data:M,error:null,response:_}}catch(c){return{data:null,error:c,response:c instanceof J0||c instanceof Q0?c.context:void 0}}})}}var tn={},xd={},ul={},Co={},dl={},hl={},kx=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},os=kx();const Dx=os.fetch,$1=os.fetch.bind(os),Y1=os.Headers,Px=os.Request,Mx=os.Response,us=Object.freeze(Object.defineProperty({__proto__:null,Headers:Y1,Request:Px,Response:Mx,default:$1,fetch:Dx},Symbol.toStringTag,{value:"Module"})),Lx=Jg(us);var fl={};Object.defineProperty(fl,"__esModule",{value:!0});let Bx=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};fl.default=Bx;var K1=kt&&kt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(hl,"__esModule",{value:!0});const Fx=K1(Lx),jx=K1(fl);let Ux=class{constructor(e){var r,o;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(r=e.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=e.signal,this.isMaybeSingle=(o=e.isMaybeSingle)!==null&&o!==void 0?o:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Fx.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,r){return this.headers=new Headers(this.headers),this.headers.set(e,r),this}then(e,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let c=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async d=>{var f,x,w,m;let C=null,_=null,O=null,P=d.status,M=d.statusText;if(d.ok){if(this.method!=="HEAD"){const N=await d.text();N===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((f=this.headers.get("Accept"))===null||f===void 0)&&f.includes("application/vnd.pgrst.plan+text"))?_=N:_=JSON.parse(N))}const G=(x=this.headers.get("Prefer"))===null||x===void 0?void 0:x.match(/count=(exact|planned|estimated)/),k=(w=d.headers.get("content-range"))===null||w===void 0?void 0:w.split("/");G&&k&&k.length>1&&(O=parseInt(k[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(_)&&(_.length>1?(C={code:"PGRST116",details:`Results contain ${_.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},_=null,O=null,P=406,M="Not Acceptable"):_.length===1?_=_[0]:_=null)}else{const G=await d.text();try{C=JSON.parse(G),Array.isArray(C)&&d.status===404&&(_=[],C=null,P=200,M="OK")}catch{d.status===404&&G===""?(P=204,M="No Content"):C={message:G}}if(C&&this.isMaybeSingle&&(!((m=C==null?void 0:C.details)===null||m===void 0)&&m.includes("0 rows"))&&(C=null,P=200,M="OK"),C&&this.shouldThrowOnError)throw new jx.default(C)}return{error:C,data:_,count:O,status:P,statusText:M}});return this.shouldThrowOnError||(c=c.catch(d=>{var f,x,w;return{error:{message:`${(f=d==null?void 0:d.name)!==null&&f!==void 0?f:"FetchError"}: ${d==null?void 0:d.message}`,details:`${(x=d==null?void 0:d.stack)!==null&&x!==void 0?x:""}`,hint:"",code:`${(w=d==null?void 0:d.code)!==null&&w!==void 0?w:""}`},data:null,count:null,status:0,statusText:""}})),c.then(e,r)}returns(){return this}overrideTypes(){return this}};hl.default=Ux;var Vx=kt&&kt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(dl,"__esModule",{value:!0});const zx=Vx(hl);let Wx=class extends zx.default{select(e){let r=!1;const o=(e??"*").split("").map(c=>/\s/.test(c)&&!r?"":(c==='"'&&(r=!r),c)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:r=!0,nullsFirst:o,foreignTable:c,referencedTable:d=c}={}){const f=d?`${d}.order`:"order",x=this.url.searchParams.get(f);return this.url.searchParams.set(f,`${x?`${x},`:""}${e}.${r?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:r,referencedTable:o=r}={}){const c=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(c,`${e}`),this}range(e,r,{foreignTable:o,referencedTable:c=o}={}){const d=typeof c>"u"?"offset":`${c}.offset`,f=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(d,`${e}`),this.url.searchParams.set(f,`${r-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:r=!1,settings:o=!1,buffers:c=!1,wal:d=!1,format:f="text"}={}){var x;const w=[e?"analyze":null,r?"verbose":null,o?"settings":null,c?"buffers":null,d?"wal":null].filter(Boolean).join("|"),m=(x=this.headers.get("Accept"))!==null&&x!==void 0?x:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${f}; for="${m}"; options=${w};`),f==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};dl.default=Wx;var Hx=kt&&kt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Co,"__esModule",{value:!0});const Gx=Hx(dl);let Xx=class extends Gx.default{eq(e,r){return this.url.searchParams.append(e,`eq.${r}`),this}neq(e,r){return this.url.searchParams.append(e,`neq.${r}`),this}gt(e,r){return this.url.searchParams.append(e,`gt.${r}`),this}gte(e,r){return this.url.searchParams.append(e,`gte.${r}`),this}lt(e,r){return this.url.searchParams.append(e,`lt.${r}`),this}lte(e,r){return this.url.searchParams.append(e,`lte.${r}`),this}like(e,r){return this.url.searchParams.append(e,`like.${r}`),this}likeAllOf(e,r){return this.url.searchParams.append(e,`like(all).{${r.join(",")}}`),this}likeAnyOf(e,r){return this.url.searchParams.append(e,`like(any).{${r.join(",")}}`),this}ilike(e,r){return this.url.searchParams.append(e,`ilike.${r}`),this}ilikeAllOf(e,r){return this.url.searchParams.append(e,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(e,r){return this.url.searchParams.append(e,`ilike(any).{${r.join(",")}}`),this}is(e,r){return this.url.searchParams.append(e,`is.${r}`),this}in(e,r){const o=Array.from(new Set(r)).map(c=>typeof c=="string"&&new RegExp("[,()]").test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(e,`in.(${o})`),this}contains(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cs.{${r.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(r)}`),this}containedBy(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cd.{${r.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(r)}`),this}rangeGt(e,r){return this.url.searchParams.append(e,`sr.${r}`),this}rangeGte(e,r){return this.url.searchParams.append(e,`nxl.${r}`),this}rangeLt(e,r){return this.url.searchParams.append(e,`sl.${r}`),this}rangeLte(e,r){return this.url.searchParams.append(e,`nxr.${r}`),this}rangeAdjacent(e,r){return this.url.searchParams.append(e,`adj.${r}`),this}overlaps(e,r){return typeof r=="string"?this.url.searchParams.append(e,`ov.${r}`):this.url.searchParams.append(e,`ov.{${r.join(",")}}`),this}textSearch(e,r,{config:o,type:c}={}){let d="";c==="plain"?d="pl":c==="phrase"?d="ph":c==="websearch"&&(d="w");const f=o===void 0?"":`(${o})`;return this.url.searchParams.append(e,`${d}fts${f}.${r}`),this}match(e){return Object.entries(e).forEach(([r,o])=>{this.url.searchParams.append(r,`eq.${o}`)}),this}not(e,r,o){return this.url.searchParams.append(e,`not.${r}.${o}`),this}or(e,{foreignTable:r,referencedTable:o=r}={}){const c=o?`${o}.or`:"or";return this.url.searchParams.append(c,`(${e})`),this}filter(e,r,o){return this.url.searchParams.append(e,`${r}.${o}`),this}};Co.default=Xx;var $x=kt&&kt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ul,"__esModule",{value:!0});const ks=$x(Co);let Yx=class{constructor(e,{headers:r={},schema:o,fetch:c}){this.url=e,this.headers=new Headers(r),this.schema=o,this.fetch=c}select(e,{head:r=!1,count:o}={}){const c=r?"HEAD":"GET";let d=!1;const f=(e??"*").split("").map(x=>/\s/.test(x)&&!d?"":(x==='"'&&(d=!d),x)).join("");return this.url.searchParams.set("select",f),o&&this.headers.append("Prefer",`count=${o}`),new ks.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:r,defaultToNull:o=!0}={}){var c;const d="POST";if(r&&this.headers.append("Prefer",`count=${r}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const f=e.reduce((x,w)=>x.concat(Object.keys(w)),[]);if(f.length>0){const x=[...new Set(f)].map(w=>`"${w}"`);this.url.searchParams.set("columns",x.join(","))}}return new ks.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}upsert(e,{onConflict:r,ignoreDuplicates:o=!1,count:c,defaultToNull:d=!0}={}){var f;const x="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),r!==void 0&&this.url.searchParams.set("on_conflict",r),c&&this.headers.append("Prefer",`count=${c}`),d||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const w=e.reduce((m,C)=>m.concat(Object.keys(C)),[]);if(w.length>0){const m=[...new Set(w)].map(C=>`"${C}"`);this.url.searchParams.set("columns",m.join(","))}}return new ks.default({method:x,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}update(e,{count:r}={}){var o;const c="PATCH";return r&&this.headers.append("Prefer",`count=${r}`),new ks.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:e}={}){var r;const o="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new ks.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}};ul.default=Yx;var q1=kt&&kt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(xd,"__esModule",{value:!0});const Kx=q1(ul),qx=q1(Co);let Zx=class Z1{constructor(e,{headers:r={},schema:o,fetch:c}={}){this.url=e,this.headers=new Headers(r),this.schemaName=o,this.fetch=c}from(e){const r=new URL(`${this.url}/${e}`);return new Kx.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Z1(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:o=!1,get:c=!1,count:d}={}){var f;let x;const w=new URL(`${this.url}/rpc/${e}`);let m;o||c?(x=o?"HEAD":"GET",Object.entries(r).filter(([_,O])=>O!==void 0).map(([_,O])=>[_,Array.isArray(O)?`{${O.join(",")}}`:`${O}`]).forEach(([_,O])=>{w.searchParams.append(_,O)})):(x="POST",m=r);const C=new Headers(this.headers);return d&&C.set("Prefer",`count=${d}`),new qx.default({method:x,url:w,headers:C,schema:this.schemaName,body:m,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}};xd.default=Zx;var ds=kt&&kt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(tn,"__esModule",{value:!0});tn.PostgrestError=tn.PostgrestBuilder=tn.PostgrestTransformBuilder=tn.PostgrestFilterBuilder=tn.PostgrestQueryBuilder=tn.PostgrestClient=void 0;const Q1=ds(xd);tn.PostgrestClient=Q1.default;const J1=ds(ul);tn.PostgrestQueryBuilder=J1.default;const eg=ds(Co);tn.PostgrestFilterBuilder=eg.default;const tg=ds(dl);tn.PostgrestTransformBuilder=tg.default;const ng=ds(hl);tn.PostgrestBuilder=ng.default;const rg=ds(fl);tn.PostgrestError=rg.default;var Qx=tn.default={PostgrestClient:Q1.default,PostgrestQueryBuilder:J1.default,PostgrestFilterBuilder:eg.default,PostgrestTransformBuilder:tg.default,PostgrestBuilder:ng.default,PostgrestError:rg.default};const{PostgrestClient:Jx,PostgrestQueryBuilder:zy,PostgrestFilterBuilder:Wy,PostgrestTransformBuilder:Hy,PostgrestBuilder:Gy,PostgrestError:Xy}=Qx;class em{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const o=r.node,c=parseInt(o.replace(/^v/,"").split(".")[0]);return c>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${c} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${c} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const o=this.getWebSocketConstructor();return new o(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const tm="2.15.5",nm=`realtime-js/${tm}`,rm="1.0.0",lu=1e4,im=1e3,sm=100;var $s;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})($s||($s={}));var wt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(wt||(wt={}));var Dn;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Dn||(Dn={}));var cu;(function(t){t.websocket="websocket"})(cu||(cu={}));var ni;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(ni||(ni={}));class om{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),o=new TextDecoder;return this._decodeBroadcast(e,r,o)}_decodeBroadcast(e,r,o){const c=r.getUint8(1),d=r.getUint8(2);let f=this.HEADER_LENGTH+2;const x=o.decode(e.slice(f,f+c));f=f+c;const w=o.decode(e.slice(f,f+d));f=f+d;const m=JSON.parse(o.decode(e.slice(f,e.byteLength)));return{ref:null,topic:x,event:w,payload:m}}}class ig{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var We;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(We||(We={}));const eh=(t,e,r={})=>{var o;const c=(o=r.skipTypes)!==null&&o!==void 0?o:[];return Object.keys(e).reduce((d,f)=>(d[f]=am(f,t,e,c),d),{})},am=(t,e,r,o)=>{const c=e.find(x=>x.name===t),d=c==null?void 0:c.type,f=r[t];return d&&!o.includes(d)?sg(d,f):uu(f)},sg=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return dm(e,r)}switch(t){case We.bool:return lm(e);case We.float4:case We.float8:case We.int2:case We.int4:case We.int8:case We.numeric:case We.oid:return cm(e);case We.json:case We.jsonb:return um(e);case We.timestamp:return hm(e);case We.abstime:case We.date:case We.daterange:case We.int4range:case We.int8range:case We.money:case We.reltime:case We.text:case We.time:case We.timestamptz:case We.timetz:case We.tsrange:case We.tstzrange:return uu(e);default:return uu(e)}},uu=t=>t,lm=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},cm=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},um=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},dm=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,o=t[r];if(t[0]==="{"&&o==="}"){let d;const f=t.slice(1,r);try{d=JSON.parse("["+f+"]")}catch{d=f?f.split(","):[]}return d.map(x=>sg(e,x))}return t},hm=t=>typeof t=="string"?t.replace(" ","T"):t,og=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class ac{constructor(e,r,o={},c=lu){this.channel=e,this.event=r,this.payload=o,this.timeout=c,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var o;return this._hasReceived(e)&&r((o=this.receivedResp)===null||o===void 0?void 0:o.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(o=>o.status===e).forEach(o=>o.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var th;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(th||(th={}));class Ys{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const o=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(o.state,{},c=>{const{onJoin:d,onLeave:f,onSync:x}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ys.syncState(this.state,c,d,f),this.pendingDiffs.forEach(w=>{this.state=Ys.syncDiff(this.state,w,d,f)}),this.pendingDiffs=[],x()}),this.channel._on(o.diff,{},c=>{const{onJoin:d,onLeave:f,onSync:x}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(c):(this.state=Ys.syncDiff(this.state,c,d,f),x())}),this.onJoin((c,d,f)=>{this.channel._trigger("presence",{event:"join",key:c,currentPresences:d,newPresences:f})}),this.onLeave((c,d,f)=>{this.channel._trigger("presence",{event:"leave",key:c,currentPresences:d,leftPresences:f})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,o,c){const d=this.cloneDeep(e),f=this.transformState(r),x={},w={};return this.map(d,(m,C)=>{f[m]||(w[m]=C)}),this.map(f,(m,C)=>{const _=d[m];if(_){const O=C.map(G=>G.presence_ref),P=_.map(G=>G.presence_ref),M=C.filter(G=>P.indexOf(G.presence_ref)<0),F=_.filter(G=>O.indexOf(G.presence_ref)<0);M.length>0&&(x[m]=M),F.length>0&&(w[m]=F)}else x[m]=C}),this.syncDiff(d,{joins:x,leaves:w},o,c)}static syncDiff(e,r,o,c){const{joins:d,leaves:f}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return o||(o=()=>{}),c||(c=()=>{}),this.map(d,(x,w)=>{var m;const C=(m=e[x])!==null&&m!==void 0?m:[];if(e[x]=this.cloneDeep(w),C.length>0){const _=e[x].map(P=>P.presence_ref),O=C.filter(P=>_.indexOf(P.presence_ref)<0);e[x].unshift(...O)}o(x,C,w)}),this.map(f,(x,w)=>{let m=e[x];if(!m)return;const C=w.map(_=>_.presence_ref);m=m.filter(_=>C.indexOf(_.presence_ref)<0),e[x]=m,c(x,m,w),m.length===0&&delete e[x]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(o=>r(o,e[o]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,o)=>{const c=e[o];return"metas"in c?r[o]=c.metas.map(d=>(d.presence_ref=d.phx_ref,delete d.phx_ref,delete d.phx_ref_prev,d)):r[o]=c,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var nh;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(nh||(nh={}));var Ks;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Ks||(Ks={}));var tr;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(tr||(tr={}));class md{constructor(e,r={config:{}},o){this.topic=e,this.params=r,this.socket=o,this.bindings={},this.state=wt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new ac(this,Dn.join,this.params,this.timeout),this.rejoinTimer=new ig(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=wt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=wt.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=wt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=wt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=wt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Dn.reply,{},(c,d)=>{this._trigger(this._replyEventName(d),c)}),this.presence=new Ys(this),this.broadcastEndpointURL=og(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,r=this.timeout){var o,c,d;if(this.socket.isConnected()||this.socket.connect(),this.state==wt.closed){const{config:{broadcast:f,presence:x,private:w}}=this.params,m=(c=(o=this.bindings.postgres_changes)===null||o===void 0?void 0:o.map(P=>P.filter))!==null&&c!==void 0?c:[],C=!!this.bindings[Ks.PRESENCE]&&this.bindings[Ks.PRESENCE].length>0||((d=this.params.config.presence)===null||d===void 0?void 0:d.enabled)===!0,_={},O={broadcast:f,presence:Object.assign(Object.assign({},x),{enabled:C}),postgres_changes:m,private:w};this.socket.accessTokenValue&&(_.access_token=this.socket.accessTokenValue),this._onError(P=>e==null?void 0:e(tr.CHANNEL_ERROR,P)),this._onClose(()=>e==null?void 0:e(tr.CLOSED)),this.updateJoinPayload(Object.assign({config:O},_)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:P})=>{var M;if(this.socket.setAuth(),P===void 0){e==null||e(tr.SUBSCRIBED);return}else{const F=this.bindings.postgres_changes,G=(M=F==null?void 0:F.length)!==null&&M!==void 0?M:0,k=[];for(let N=0;N<G;N++){const b=F[N],{filter:{event:L,schema:J,table:H,filter:U}}=b,q=P&&P[N];if(q&&q.event===L&&q.schema===J&&q.table===H&&q.filter===U)k.push(Object.assign(Object.assign({},b),{id:q.id}));else{this.unsubscribe(),this.state=wt.errored,e==null||e(tr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=k,e&&e(tr.SUBSCRIBED);return}}).receive("error",P=>{this.state=wt.errored,e==null||e(tr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(P).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(tr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,o){return this.state===wt.joined&&e===Ks.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,r,o)}async send(e,r={}){var o,c;if(!this._canPush()&&e.type==="broadcast"){const{event:d,payload:f}=e,w={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:d,payload:f,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,w,(o=r.timeout)!==null&&o!==void 0?o:this.timeout);return await((c=m.body)===null||c===void 0?void 0:c.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(d=>{var f,x,w;const m=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((w=(x=(f=this.params)===null||f===void 0?void 0:f.config)===null||x===void 0?void 0:x.broadcast)===null||w===void 0)&&w.ack)&&d("ok"),m.receive("ok",()=>d("ok")),m.receive("error",()=>d("error")),m.receive("timeout",()=>d("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=wt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Dn.close,"leave",this._joinRef())};this.joinPush.destroy();let o=null;return new Promise(c=>{o=new ac(this,Dn.leave,{},e),o.receive("ok",()=>{r(),c("ok")}).receive("timeout",()=>{r(),c("timed out")}).receive("error",()=>{c("error")}),o.send(),this._canPush()||o.trigger("ok",{})}).finally(()=>{o==null||o.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=wt.closed,this.bindings={}}async _fetchWithTimeout(e,r,o){const c=new AbortController,d=setTimeout(()=>c.abort(),o),f=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:c.signal}));return clearTimeout(d),f}_push(e,r,o=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let c=new ac(this,e,r,o);return this._canPush()?c.send():this._addToPushBuffer(c),c}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>sm){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,o){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,o){var c,d;const f=e.toLocaleLowerCase(),{close:x,error:w,leave:m,join:C}=Dn;if(o&&[x,w,m,C].indexOf(f)>=0&&o!==this._joinRef())return;let O=this._onMessage(f,r,o);if(r&&!O)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(f)?(c=this.bindings.postgres_changes)===null||c===void 0||c.filter(P=>{var M,F,G;return((M=P.filter)===null||M===void 0?void 0:M.event)==="*"||((G=(F=P.filter)===null||F===void 0?void 0:F.event)===null||G===void 0?void 0:G.toLocaleLowerCase())===f}).map(P=>P.callback(O,o)):(d=this.bindings[f])===null||d===void 0||d.filter(P=>{var M,F,G,k,N,b;if(["broadcast","presence","postgres_changes"].includes(f))if("id"in P){const L=P.id,J=(M=P.filter)===null||M===void 0?void 0:M.event;return L&&((F=r.ids)===null||F===void 0?void 0:F.includes(L))&&(J==="*"||(J==null?void 0:J.toLocaleLowerCase())===((G=r.data)===null||G===void 0?void 0:G.type.toLocaleLowerCase()))}else{const L=(N=(k=P==null?void 0:P.filter)===null||k===void 0?void 0:k.event)===null||N===void 0?void 0:N.toLocaleLowerCase();return L==="*"||L===((b=r==null?void 0:r.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return P.type.toLocaleLowerCase()===f}).map(P=>{if(typeof O=="object"&&"ids"in O){const M=O.data,{schema:F,table:G,commit_timestamp:k,type:N,errors:b}=M;O=Object.assign(Object.assign({},{schema:F,table:G,commit_timestamp:k,eventType:N,new:{},old:{},errors:b}),this._getPayloadRecords(M))}P.callback(O,o)})}_isClosed(){return this.state===wt.closed}_isJoined(){return this.state===wt.joined}_isJoining(){return this.state===wt.joining}_isLeaving(){return this.state===wt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,o){const c=e.toLocaleLowerCase(),d={type:c,filter:r,callback:o};return this.bindings[c]?this.bindings[c].push(d):this.bindings[c]=[d],this}_off(e,r){const o=e.toLocaleLowerCase();return this.bindings[o]&&(this.bindings[o]=this.bindings[o].filter(c=>{var d;return!(((d=c.type)===null||d===void 0?void 0:d.toLocaleLowerCase())===o&&md.isEqual(c.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const o in e)if(e[o]!==r[o])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Dn.close,{},e)}_onError(e){this._on(Dn.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=wt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=eh(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=eh(e.columns,e.old_record)),r}}const lc=()=>{},ea={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},fm=[1e3,2e3,5e3,1e4],gm=1e4,pm=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class xm{constructor(e,r){var o;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=lu,this.transport=null,this.heartbeatIntervalMs=ea.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=lc,this.ref=0,this.reconnectTimer=null,this.logger=lc,this.conn=null,this.sendBuffer=[],this.serializer=new om,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=c=>{let d;return c?d=c:typeof fetch>"u"?d=(...f)=>Eo(async()=>{const{default:x}=await Promise.resolve().then(()=>us);return{default:x}},void 0).then(({default:x})=>x(...f)).catch(x=>{throw new Error(`Failed to load @supabase/node-fetch: ${x.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):d=fetch,(...f)=>d(...f)},!(!((o=r==null?void 0:r.params)===null||o===void 0)&&o.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${cu.websocket}`,this.httpEndpoint=og(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=em.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:rm}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const o=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(o),this._setConnectionState("disconnected")},e?this.conn.close(e,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,o){this.logger(e,r,o)}connectionState(){switch(this.conn&&this.conn.readyState){case $s.connecting:return ni.Connecting;case $s.open:return ni.Open;case $s.closing:return ni.Closing;default:return ni.Closed}}isConnected(){return this.connectionState()===ni.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const o=`realtime:${e}`,c=this.getChannels().find(d=>d.topic===o);if(c)return c;{const d=new md(`realtime:${e}`,r,this);return this.channels.push(d),d}}push(e){const{topic:r,event:o,payload:c,ref:d}=e,f=()=>{this.encode(e,x=>{var w;(w=this.conn)===null||w===void 0||w.send(x)})};this.log("push",`${r} ${o} (${d})`,c),this.isConnected()?f():this.sendBuffer.push(f)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(im,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},ea.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(o=>o.topic===e&&(o._isJoined()||o._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(m){this.log("error","error in heartbeat callback",m)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:o,event:c,payload:d,ref:f}=r,x=f?`(${f})`:"",w=d.status||"";this.log("receive",`${w} ${o} ${c} ${x}`.trim(),d),this.channels.filter(m=>m._isMember(o)).forEach(m=>m._trigger(c,d,f)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Dn.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const o=e.match(/\?/)?"&":"?",c=new URLSearchParams(r);return`${e}${o}${c}`}_workerObjectUrl(e){let r;if(e)r=e;else{const o=new Blob([pm],{type:"application/javascript"});r=URL.createObjectURL(o)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r;e?r=e:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(o=>{const c={access_token:r,version:nm};r&&o.updateJoinPayload(c),o.joinedOnce&&o._isJoined()&&o._push(Dn.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(o=>{try{o(r)}catch(c){this.log("error",`error in ${e} callback`,c)}})}catch(o){this.log("error",`error triggering ${e} callbacks`,o)}}_setupReconnectionTimer(){this.reconnectTimer=new ig(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ea.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,o,c,d,f,x,w,m,C;if(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(o=e==null?void 0:e.timeout)!==null&&o!==void 0?o:lu,this.heartbeatIntervalMs=(c=e==null?void 0:e.heartbeatIntervalMs)!==null&&c!==void 0?c:ea.HEARTBEAT_INTERVAL,this.worker=(d=e==null?void 0:e.worker)!==null&&d!==void 0?d:!1,this.accessToken=(f=e==null?void 0:e.accessToken)!==null&&f!==void 0?f:null,this.heartbeatCallback=(x=e==null?void 0:e.heartbeatCallback)!==null&&x!==void 0?x:lc,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(w=e==null?void 0:e.reconnectAfterMs)!==null&&w!==void 0?w:_=>fm[_-1]||gm,this.encode=(m=e==null?void 0:e.encode)!==null&&m!==void 0?m:(_,O)=>O(JSON.stringify(_)),this.decode=(C=e==null?void 0:e.decode)!==null&&C!==void 0?C:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class wd extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function yt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class mm extends wd{constructor(e,r,o){super(e),this.name="StorageApiError",this.status=r,this.statusCode=o}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class du extends wd{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}var wm=function(t,e,r,o){function c(d){return d instanceof r?d:new r(function(f){f(d)})}return new(r||(r=Promise))(function(d,f){function x(C){try{m(o.next(C))}catch(_){f(_)}}function w(C){try{m(o.throw(C))}catch(_){f(_)}}function m(C){C.done?d(C.value):c(C.value).then(x,w)}m((o=o.apply(t,e||[])).next())})};const ag=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Eo(async()=>{const{default:o}=await Promise.resolve().then(()=>us);return{default:o}},void 0).then(({default:o})=>o(...r)):e=fetch,(...r)=>e(...r)},ym=()=>wm(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Eo(()=>Promise.resolve().then(()=>us),void 0)).Response:Response}),hu=t=>{if(Array.isArray(t))return t.map(r=>hu(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,o])=>{const c=r.replace(/([-_][a-z])/gi,d=>d.toUpperCase().replace(/[-_]/g,""));e[c]=hu(o)}),e},vm=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var pi=function(t,e,r,o){function c(d){return d instanceof r?d:new r(function(f){f(d)})}return new(r||(r=Promise))(function(d,f){function x(C){try{m(o.next(C))}catch(_){f(_)}}function w(C){try{m(o.throw(C))}catch(_){f(_)}}function m(C){C.done?d(C.value):c(C.value).then(x,w)}m((o=o.apply(t,e||[])).next())})};const cc=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Em=(t,e,r)=>pi(void 0,void 0,void 0,function*(){const o=yield ym();t instanceof o&&!(r!=null&&r.noResolveJson)?t.json().then(c=>{const d=t.status||500,f=(c==null?void 0:c.statusCode)||d+"";e(new mm(cc(c),d,f))}).catch(c=>{e(new du(cc(c),c))}):e(new du(cc(t),t))}),Cm=(t,e,r,o)=>{const c={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!o?c:(vm(o)?(c.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),c.body=JSON.stringify(o)):c.body=o,e!=null&&e.duplex&&(c.duplex=e.duplex),Object.assign(Object.assign({},c),r))};function _o(t,e,r,o,c,d){return pi(this,void 0,void 0,function*(){return new Promise((f,x)=>{t(r,Cm(e,o,c,d)).then(w=>{if(!w.ok)throw w;return o!=null&&o.noResolveJson?w:w.json()}).then(w=>f(w)).catch(w=>Em(w,x,o))})})}function za(t,e,r,o){return pi(this,void 0,void 0,function*(){return _o(t,"GET",e,r,o)})}function $n(t,e,r,o,c){return pi(this,void 0,void 0,function*(){return _o(t,"POST",e,o,c,r)})}function fu(t,e,r,o,c){return pi(this,void 0,void 0,function*(){return _o(t,"PUT",e,o,c,r)})}function _m(t,e,r,o){return pi(this,void 0,void 0,function*(){return _o(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),o)})}function lg(t,e,r,o,c){return pi(this,void 0,void 0,function*(){return _o(t,"DELETE",e,o,c,r)})}var Wt=function(t,e,r,o){function c(d){return d instanceof r?d:new r(function(f){f(d)})}return new(r||(r=Promise))(function(d,f){function x(C){try{m(o.next(C))}catch(_){f(_)}}function w(C){try{m(o.throw(C))}catch(_){f(_)}}function m(C){C.done?d(C.value):c(C.value).then(x,w)}m((o=o.apply(t,e||[])).next())})};const Am={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},rh={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Sm{constructor(e,r={},o,c){this.shouldThrowOnError=!1,this.url=e,this.headers=r,this.bucketId=o,this.fetch=ag(c)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,r,o,c){return Wt(this,void 0,void 0,function*(){try{let d;const f=Object.assign(Object.assign({},rh),c);let x=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(f.upsert)});const w=f.metadata;typeof Blob<"u"&&o instanceof Blob?(d=new FormData,d.append("cacheControl",f.cacheControl),w&&d.append("metadata",this.encodeMetadata(w)),d.append("",o)):typeof FormData<"u"&&o instanceof FormData?(d=o,d.append("cacheControl",f.cacheControl),w&&d.append("metadata",this.encodeMetadata(w))):(d=o,x["cache-control"]=`max-age=${f.cacheControl}`,x["content-type"]=f.contentType,w&&(x["x-metadata"]=this.toBase64(this.encodeMetadata(w)))),c!=null&&c.headers&&(x=Object.assign(Object.assign({},x),c.headers));const m=this._removeEmptyFolders(r),C=this._getFinalPath(m),_=yield(e=="PUT"?fu:$n)(this.fetch,`${this.url}/object/${C}`,d,Object.assign({headers:x},f!=null&&f.duplex?{duplex:f.duplex}:{}));return{data:{path:m,id:_.Id,fullPath:_.Key},error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(yt(d))return{data:null,error:d};throw d}})}upload(e,r,o){return Wt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,o)})}uploadToSignedUrl(e,r,o,c){return Wt(this,void 0,void 0,function*(){const d=this._removeEmptyFolders(e),f=this._getFinalPath(d),x=new URL(this.url+`/object/upload/sign/${f}`);x.searchParams.set("token",r);try{let w;const m=Object.assign({upsert:rh.upsert},c),C=Object.assign(Object.assign({},this.headers),{"x-upsert":String(m.upsert)});typeof Blob<"u"&&o instanceof Blob?(w=new FormData,w.append("cacheControl",m.cacheControl),w.append("",o)):typeof FormData<"u"&&o instanceof FormData?(w=o,w.append("cacheControl",m.cacheControl)):(w=o,C["cache-control"]=`max-age=${m.cacheControl}`,C["content-type"]=m.contentType);const _=yield fu(this.fetch,x.toString(),w,{headers:C});return{data:{path:d,fullPath:_.Key},error:null}}catch(w){if(this.shouldThrowOnError)throw w;if(yt(w))return{data:null,error:w};throw w}})}createSignedUploadUrl(e,r){return Wt(this,void 0,void 0,function*(){try{let o=this._getFinalPath(e);const c=Object.assign({},this.headers);r!=null&&r.upsert&&(c["x-upsert"]="true");const d=yield $n(this.fetch,`${this.url}/object/upload/sign/${o}`,{},{headers:c}),f=new URL(this.url+d.url),x=f.searchParams.get("token");if(!x)throw new wd("No token returned by API");return{data:{signedUrl:f.toString(),path:e,token:x},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(yt(o))return{data:null,error:o};throw o}})}update(e,r,o){return Wt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,o)})}move(e,r,o){return Wt(this,void 0,void 0,function*(){try{return{data:yield $n(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:o==null?void 0:o.destinationBucket},{headers:this.headers}),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(yt(c))return{data:null,error:c};throw c}})}copy(e,r,o){return Wt(this,void 0,void 0,function*(){try{return{data:{path:(yield $n(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:o==null?void 0:o.destinationBucket},{headers:this.headers})).Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(yt(c))return{data:null,error:c};throw c}})}createSignedUrl(e,r,o){return Wt(this,void 0,void 0,function*(){try{let c=this._getFinalPath(e),d=yield $n(this.fetch,`${this.url}/object/sign/${c}`,Object.assign({expiresIn:r},o!=null&&o.transform?{transform:o.transform}:{}),{headers:this.headers});const f=o!=null&&o.download?`&download=${o.download===!0?"":o.download}`:"";return d={signedUrl:encodeURI(`${this.url}${d.signedURL}${f}`)},{data:d,error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(yt(c))return{data:null,error:c};throw c}})}createSignedUrls(e,r,o){return Wt(this,void 0,void 0,function*(){try{const c=yield $n(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),d=o!=null&&o.download?`&download=${o.download===!0?"":o.download}`:"";return{data:c.map(f=>Object.assign(Object.assign({},f),{signedUrl:f.signedURL?encodeURI(`${this.url}${f.signedURL}${d}`):null})),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(yt(c))return{data:null,error:c};throw c}})}download(e,r){return Wt(this,void 0,void 0,function*(){const c=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",d=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),f=d?`?${d}`:"";try{const x=this._getFinalPath(e);return{data:yield(yield za(this.fetch,`${this.url}/${c}/${x}${f}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(x){if(this.shouldThrowOnError)throw x;if(yt(x))return{data:null,error:x};throw x}})}info(e){return Wt(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const o=yield za(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:hu(o),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(yt(o))return{data:null,error:o};throw o}})}exists(e){return Wt(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield _m(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(yt(o)&&o instanceof du){const c=o.originalError;if([400,404].includes(c==null?void 0:c.status))return{data:!1,error:o}}throw o}})}getPublicUrl(e,r){const o=this._getFinalPath(e),c=[],d=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";d!==""&&c.push(d);const x=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",w=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});w!==""&&c.push(w);let m=c.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${x}/public/${o}${m}`)}}}remove(e){return Wt(this,void 0,void 0,function*(){try{return{data:yield lg(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yt(r))return{data:null,error:r};throw r}})}list(e,r,o){return Wt(this,void 0,void 0,function*(){try{const c=Object.assign(Object.assign(Object.assign({},Am),r),{prefix:e||""});return{data:yield $n(this.fetch,`${this.url}/object/list/${this.bucketId}`,c,{headers:this.headers},o),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(yt(c))return{data:null,error:c};throw c}})}listV2(e,r){return Wt(this,void 0,void 0,function*(){try{const o=Object.assign({},e);return{data:yield $n(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,o,{headers:this.headers},r),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(yt(o))return{data:null,error:o};throw o}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const bm="2.12.1",Im={"X-Client-Info":`storage-js/${bm}`};var Ii=function(t,e,r,o){function c(d){return d instanceof r?d:new r(function(f){f(d)})}return new(r||(r=Promise))(function(d,f){function x(C){try{m(o.next(C))}catch(_){f(_)}}function w(C){try{m(o.throw(C))}catch(_){f(_)}}function m(C){C.done?d(C.value):c(C.value).then(x,w)}m((o=o.apply(t,e||[])).next())})};class Tm{constructor(e,r={},o,c){this.shouldThrowOnError=!1;const d=new URL(e);c!=null&&c.useNewHostname&&/supabase\.(co|in|red)$/.test(d.hostname)&&!d.hostname.includes("storage.supabase.")&&(d.hostname=d.hostname.replace("supabase.","storage.supabase.")),this.url=d.href,this.headers=Object.assign(Object.assign({},Im),r),this.fetch=ag(o)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Ii(this,void 0,void 0,function*(){try{return{data:yield za(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(yt(e))return{data:null,error:e};throw e}})}getBucket(e){return Ii(this,void 0,void 0,function*(){try{return{data:yield za(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yt(r))return{data:null,error:r};throw r}})}createBucket(e,r={public:!1}){return Ii(this,void 0,void 0,function*(){try{return{data:yield $n(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(yt(o))return{data:null,error:o};throw o}})}updateBucket(e,r){return Ii(this,void 0,void 0,function*(){try{return{data:yield fu(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(yt(o))return{data:null,error:o};throw o}})}emptyBucket(e){return Ii(this,void 0,void 0,function*(){try{return{data:yield $n(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yt(r))return{data:null,error:r};throw r}})}deleteBucket(e){return Ii(this,void 0,void 0,function*(){try{return{data:yield lg(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yt(r))return{data:null,error:r};throw r}})}}class Nm extends Tm{constructor(e,r={},o,c){super(e,r,o,c)}from(e){return new Sm(this.url,this.headers,e,this.fetch)}}const Om="2.57.4";let Bs="";typeof Deno<"u"?Bs="deno":typeof document<"u"?Bs="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Bs="react-native":Bs="node";const Rm={"X-Client-Info":`supabase-js-${Bs}/${Om}`},km={headers:Rm},Dm={schema:"public"},Pm={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Mm={};var Lm=function(t,e,r,o){function c(d){return d instanceof r?d:new r(function(f){f(d)})}return new(r||(r=Promise))(function(d,f){function x(C){try{m(o.next(C))}catch(_){f(_)}}function w(C){try{m(o.throw(C))}catch(_){f(_)}}function m(C){C.done?d(C.value):c(C.value).then(x,w)}m((o=o.apply(t,e||[])).next())})};const Bm=t=>{let e;return t?e=t:typeof fetch>"u"?e=$1:e=fetch,(...r)=>e(...r)},Fm=()=>typeof Headers>"u"?Y1:Headers,jm=(t,e,r)=>{const o=Bm(r),c=Fm();return(d,f)=>Lm(void 0,void 0,void 0,function*(){var x;const w=(x=yield e())!==null&&x!==void 0?x:t;let m=new c(f==null?void 0:f.headers);return m.has("apikey")||m.set("apikey",t),m.has("Authorization")||m.set("Authorization",`Bearer ${w}`),o(d,Object.assign(Object.assign({},f),{headers:m}))})};var Um=function(t,e,r,o){function c(d){return d instanceof r?d:new r(function(f){f(d)})}return new(r||(r=Promise))(function(d,f){function x(C){try{m(o.next(C))}catch(_){f(_)}}function w(C){try{m(o.throw(C))}catch(_){f(_)}}function m(C){C.done?d(C.value):c(C.value).then(x,w)}m((o=o.apply(t,e||[])).next())})};function Vm(t){return t.endsWith("/")?t:t+"/"}function zm(t,e){var r,o;const{db:c,auth:d,realtime:f,global:x}=t,{db:w,auth:m,realtime:C,global:_}=e,O={db:Object.assign(Object.assign({},w),c),auth:Object.assign(Object.assign({},m),d),realtime:Object.assign(Object.assign({},C),f),storage:{},global:Object.assign(Object.assign(Object.assign({},_),x),{headers:Object.assign(Object.assign({},(r=_==null?void 0:_.headers)!==null&&r!==void 0?r:{}),(o=x==null?void 0:x.headers)!==null&&o!==void 0?o:{})}),accessToken:()=>Um(this,void 0,void 0,function*(){return""})};return t.accessToken?O.accessToken=t.accessToken:delete O.accessToken,O}function Wm(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Vm(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const cg="2.71.1",ki=30*1e3,gu=3,uc=gu*ki,Hm="http://localhost:9999",Gm="supabase.auth.token",Xm={"X-Client-Info":`gotrue-js/${cg}`},pu="X-Supabase-Api-Version",ug={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},$m=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Ym=10*60*1e3;class yd extends Error{constructor(e,r,o){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=o}}function ve(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Km extends yd{constructor(e,r,o){super(e,r,o),this.name="AuthApiError",this.status=r,this.code=o}}function qm(t){return ve(t)&&t.name==="AuthApiError"}class dg extends yd{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class zr extends yd{constructor(e,r,o,c){super(e,o,c),this.name=r,this.status=o}}class Er extends zr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Zm(t){return ve(t)&&t.name==="AuthSessionMissingError"}class ta extends zr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class na extends zr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class ra extends zr{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Qm(t){return ve(t)&&t.name==="AuthImplicitGrantRedirectError"}class ih extends zr{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class xu extends zr{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function dc(t){return ve(t)&&t.name==="AuthRetryableFetchError"}class sh extends zr{constructor(e,r,o){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=o}}class mu extends zr{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Wa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),oh=` 	
\r=`.split(""),Jm=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<oh.length;e+=1)t[oh[e].charCodeAt(0)]=-2;for(let e=0;e<Wa.length;e+=1)t[Wa[e].charCodeAt(0)]=e;return t})();function ah(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const o=e.queue>>e.queuedBits-6&63;r(Wa[o]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const o=e.queue>>e.queuedBits-6&63;r(Wa[o]),e.queuedBits-=6}}function hg(t,e,r){const o=Jm[t];if(o>-1)for(e.queue=e.queue<<6|o,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(o===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function lh(t){const e=[],r=f=>{e.push(String.fromCodePoint(f))},o={utf8seq:0,codepoint:0},c={queue:0,queuedBits:0},d=f=>{nw(f,o,r)};for(let f=0;f<t.length;f+=1)hg(t.charCodeAt(f),c,d);return e.join("")}function ew(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function tw(t,e){for(let r=0;r<t.length;r+=1){let o=t.charCodeAt(r);if(o>55295&&o<=56319){const c=(o-55296)*1024&65535;o=(t.charCodeAt(r+1)-56320&65535|c)+65536,r+=1}ew(o,e)}}function nw(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let o=1;o<6;o+=1)if(!(t>>7-o&1)){e.utf8seq=o;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function rw(t){const e=[],r={queue:0,queuedBits:0},o=c=>{e.push(c)};for(let c=0;c<t.length;c+=1)hg(t.charCodeAt(c),r,o);return new Uint8Array(e)}function iw(t){const e=[];return tw(t,r=>e.push(r)),new Uint8Array(e)}function sw(t){const e=[],r={queue:0,queuedBits:0},o=c=>{e.push(c)};return t.forEach(c=>ah(c,r,o)),ah(null,r,o),e.join("")}function ow(t){return Math.round(Date.now()/1e3)+t}function aw(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const On=()=>typeof window<"u"&&typeof document<"u",Zr={tested:!1,writable:!1},fg=()=>{if(!On())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Zr.tested)return Zr.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Zr.tested=!0,Zr.writable=!0}catch{Zr.tested=!0,Zr.writable=!1}return Zr.writable};function lw(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((c,d)=>{e[d]=c})}catch{}return r.searchParams.forEach((o,c)=>{e[c]=o}),e}const gg=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Eo(async()=>{const{default:o}=await Promise.resolve().then(()=>us);return{default:o}},void 0).then(({default:o})=>o(...r)):e=fetch,(...r)=>e(...r)},cw=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Di=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},Qr=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},vr=async(t,e)=>{await t.removeItem(e)};class gl{constructor(){this.promise=new gl.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}gl.promiseConstructor=Promise;function hc(t){const e=t.split(".");if(e.length!==3)throw new mu("Invalid JWT structure");for(let o=0;o<e.length;o++)if(!$m.test(e[o]))throw new mu("JWT not in base64url format");return{header:JSON.parse(lh(e[0])),payload:JSON.parse(lh(e[1])),signature:rw(e[2]),raw:{header:e[0],payload:e[1]}}}async function uw(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function dw(t,e){return new Promise((o,c)=>{(async()=>{for(let d=0;d<1/0;d++)try{const f=await t(d);if(!e(d,null,f)){o(f);return}}catch(f){if(!e(d,f)){c(f);return}}})()})}function hw(t){return("0"+t.toString(16)).substr(-2)}function fw(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",o=r.length;let c="";for(let d=0;d<56;d++)c+=r.charAt(Math.floor(Math.random()*o));return c}return crypto.getRandomValues(e),Array.from(e,hw).join("")}async function gw(t){const r=new TextEncoder().encode(t),o=await crypto.subtle.digest("SHA-256",r),c=new Uint8Array(o);return Array.from(c).map(d=>String.fromCharCode(d)).join("")}async function pw(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await gw(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ti(t,e,r=!1){const o=fw();let c=o;r&&(c+="/PASSWORD_RECOVERY"),await Di(t,`${e}-code-verifier`,c);const d=await pw(o);return[d,o===d?"plain":"s256"]}const xw=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function mw(t){const e=t.headers.get(pu);if(!e||!e.match(xw))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function ww(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function yw(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const vw=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ni(t){if(!vw.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function fc(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const o=r.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function ch(t){return JSON.parse(JSON.stringify(t))}var Ew=function(t,e){var r={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(r[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(t);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(t,o[c])&&(r[o[c]]=t[o[c]]);return r};const ti=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Cw=[502,503,504];async function uh(t){var e;if(!cw(t))throw new xu(ti(t),0);if(Cw.includes(t.status))throw new xu(ti(t),t.status);let r;try{r=await t.json()}catch(d){throw new dg(ti(d),d)}let o;const c=mw(t);if(c&&c.getTime()>=ug["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?o=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(o=r.error_code),o){if(o==="weak_password")throw new sh(ti(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(o==="session_not_found")throw new Er}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((d,f)=>d&&typeof f=="string",!0))throw new sh(ti(r),t.status,r.weak_password.reasons);throw new Km(ti(r),t.status||500,o)}const _w=(t,e,r,o)=>{const c={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?c:(c.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),c.body=JSON.stringify(o),Object.assign(Object.assign({},c),r))};async function _e(t,e,r,o){var c;const d=Object.assign({},o==null?void 0:o.headers);d[pu]||(d[pu]=ug["2024-01-01"].name),o!=null&&o.jwt&&(d.Authorization=`Bearer ${o.jwt}`);const f=(c=o==null?void 0:o.query)!==null&&c!==void 0?c:{};o!=null&&o.redirectTo&&(f.redirect_to=o.redirectTo);const x=Object.keys(f).length?"?"+new URLSearchParams(f).toString():"",w=await Aw(t,e,r+x,{headers:d,noResolveJson:o==null?void 0:o.noResolveJson},{},o==null?void 0:o.body);return o!=null&&o.xform?o==null?void 0:o.xform(w):{data:Object.assign({},w),error:null}}async function Aw(t,e,r,o,c,d){const f=_w(e,o,c,d);let x;try{x=await t(r,Object.assign({},f))}catch(w){throw console.error(w),new xu(ti(w),0)}if(x.ok||await uh(x),o!=null&&o.noResolveJson)return x;try{return await x.json()}catch(w){await uh(w)}}function Qn(t){var e;let r=null;Tw(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=ow(t.expires_in)));const o=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:o},error:null}}function dh(t){const e=Qn(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,o)=>r&&typeof o=="string",!0)&&(e.data.weak_password=t.weak_password),e}function br(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Sw(t){return{data:t,error:null}}function bw(t){const{action_link:e,email_otp:r,hashed_token:o,redirect_to:c,verification_type:d}=t,f=Ew(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),x={action_link:e,email_otp:r,hashed_token:o,redirect_to:c,verification_type:d},w=Object.assign({},f);return{data:{properties:x,user:w},error:null}}function Iw(t){return t}function Tw(t){return t.access_token&&t.refresh_token&&t.expires_in}const gc=["global","local","others"];var Nw=function(t,e){var r={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(r[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(t);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(t,o[c])&&(r[o[c]]=t[o[c]]);return r};class Ow{constructor({url:e="",headers:r={},fetch:o}){this.url=e,this.headers=r,this.fetch=gg(o),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,r=gc[0]){if(gc.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${gc.join(", ")}`);try{return await _e(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(o){if(ve(o))return{data:null,error:o};throw o}}async inviteUserByEmail(e,r={}){try{return await _e(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:br})}catch(o){if(ve(o))return{data:{user:null},error:o};throw o}}async generateLink(e){try{const{options:r}=e,o=Nw(e,["options"]),c=Object.assign(Object.assign({},o),r);return"newEmail"in o&&(c.new_email=o==null?void 0:o.newEmail,delete c.newEmail),await _e(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:c,headers:this.headers,xform:bw,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(ve(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await _e(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:br})}catch(r){if(ve(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,o,c,d,f,x,w;try{const m={nextPage:null,lastPage:0,total:0},C=await _e(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&o!==void 0?o:"",per_page:(d=(c=e==null?void 0:e.perPage)===null||c===void 0?void 0:c.toString())!==null&&d!==void 0?d:""},xform:Iw});if(C.error)throw C.error;const _=await C.json(),O=(f=C.headers.get("x-total-count"))!==null&&f!==void 0?f:0,P=(w=(x=C.headers.get("link"))===null||x===void 0?void 0:x.split(","))!==null&&w!==void 0?w:[];return P.length>0&&(P.forEach(M=>{const F=parseInt(M.split(";")[0].split("=")[1].substring(0,1)),G=JSON.parse(M.split(";")[1].split("=")[1]);m[`${G}Page`]=F}),m.total=parseInt(O)),{data:Object.assign(Object.assign({},_),m),error:null}}catch(m){if(ve(m))return{data:{users:[]},error:m};throw m}}async getUserById(e){Ni(e);try{return await _e(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:br})}catch(r){if(ve(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){Ni(e);try{return await _e(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:br})}catch(o){if(ve(o))return{data:{user:null},error:o};throw o}}async deleteUser(e,r=!1){Ni(e);try{return await _e(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:br})}catch(o){if(ve(o))return{data:{user:null},error:o};throw o}}async _listFactors(e){Ni(e.userId);try{const{data:r,error:o}=await _e(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:c=>({data:{factors:c},error:null})});return{data:r,error:o}}catch(r){if(ve(r))return{data:null,error:r};throw r}}async _deleteFactor(e){Ni(e.userId),Ni(e.id);try{return{data:await _e(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(ve(r))return{data:null,error:r};throw r}}}function hh(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}function Rw(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Oi={debug:!!(globalThis&&fg()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class pg extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class kw extends pg{}async function Dw(t,e,r){Oi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const o=new globalThis.AbortController;return e>0&&setTimeout(()=>{o.abort(),Oi.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:o.signal},async c=>{if(c){Oi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,c.name);try{return await r()}finally{Oi.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,c.name)}}else{if(e===0)throw Oi.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new kw(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Oi.debug)try{const d=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(d,null,"  "))}catch(d){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",d)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}Rw();const Pw={url:Hm,storageKey:Gm,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Xm,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function fh(t,e,r){return await r()}const Ri={};class po{constructor(e){var r,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=po.nextInstanceID,po.nextInstanceID+=1,this.instanceID>0&&On()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const c=Object.assign(Object.assign({},Pw),e);if(this.logDebugMessages=!!c.debug,typeof c.debug=="function"&&(this.logger=c.debug),this.persistSession=c.persistSession,this.storageKey=c.storageKey,this.autoRefreshToken=c.autoRefreshToken,this.admin=new Ow({url:c.url,headers:c.headers,fetch:c.fetch}),this.url=c.url,this.headers=c.headers,this.fetch=gg(c.fetch),this.lock=c.lock||fh,this.detectSessionInUrl=c.detectSessionInUrl,this.flowType=c.flowType,this.hasCustomAuthorizationHeader=c.hasCustomAuthorizationHeader,c.lock?this.lock=c.lock:On()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=Dw:this.lock=fh,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(c.storage?this.storage=c.storage:fg()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=hh(this.memoryStorage)),c.userStorage&&(this.userStorage=c.userStorage)):(this.memoryStorage={},this.storage=hh(this.memoryStorage)),On()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(d){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",d)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async d=>{this._debug("received broadcast notification from other tab or client",d),await this._notifyAllSubscribers(d.data.event,d.data.session,!1)})}this.initialize()}get jwks(){var e,r;return(r=(e=Ri[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){Ri[this.storageKey]=Object.assign(Object.assign({},Ri[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=Ri[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Ri[this.storageKey]=Object.assign(Object.assign({},Ri[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${cg}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const r=lw(window.location.href);let o="none";if(this._isImplicitGrantCallback(r)?o="implicit":await this._isPKCECallback(r)&&(o="pkce"),On()&&this.detectSessionInUrl&&o!=="none"){const{data:c,error:d}=await this._getSessionFromURL(r,o);if(d){if(this._debug("#_initialize()","error detecting session from URL",d),Qm(d)){const w=(e=d.details)===null||e===void 0?void 0:e.code;if(w==="identity_already_exists"||w==="identity_not_found"||w==="single_identity_not_deletable")return{error:d}}return await this._removeSession(),{error:d}}const{session:f,redirectType:x}=c;return this._debug("#_initialize()","detected session in URL",f,"redirect type",x),await this._saveSession(f),setTimeout(async()=>{x==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",f):await this._notifyAllSubscribers("SIGNED_IN",f)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return ve(r)?{error:r}:{error:new dg("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,o,c;try{const d=await _e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(o=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:(c=e==null?void 0:e.options)===null||c===void 0?void 0:c.captchaToken}},xform:Qn}),{data:f,error:x}=d;if(x||!f)return{data:{user:null,session:null},error:x};const w=f.session,m=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",w)),{data:{user:m,session:w},error:null}}catch(d){if(ve(d))return{data:{user:null,session:null},error:d};throw d}}async signUp(e){var r,o,c;try{let d;if("email"in e){const{email:C,password:_,options:O}=e;let P=null,M=null;this.flowType==="pkce"&&([P,M]=await Ti(this.storage,this.storageKey)),d=await _e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:O==null?void 0:O.emailRedirectTo,body:{email:C,password:_,data:(r=O==null?void 0:O.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:O==null?void 0:O.captchaToken},code_challenge:P,code_challenge_method:M},xform:Qn})}else if("phone"in e){const{phone:C,password:_,options:O}=e;d=await _e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:C,password:_,data:(o=O==null?void 0:O.data)!==null&&o!==void 0?o:{},channel:(c=O==null?void 0:O.channel)!==null&&c!==void 0?c:"sms",gotrue_meta_security:{captcha_token:O==null?void 0:O.captchaToken}},xform:Qn})}else throw new na("You must provide either an email or phone number and a password");const{data:f,error:x}=d;if(x||!f)return{data:{user:null,session:null},error:x};const w=f.session,m=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",w)),{data:{user:m,session:w},error:null}}catch(d){if(ve(d))return{data:{user:null,session:null},error:d};throw d}}async signInWithPassword(e){try{let r;if("email"in e){const{email:d,password:f,options:x}=e;r=await _e(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:d,password:f,gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken}},xform:dh})}else if("phone"in e){const{phone:d,password:f,options:x}=e;r=await _e(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:d,password:f,gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken}},xform:dh})}else throw new na("You must provide either an email or phone number and a password");const{data:o,error:c}=r;return c?{data:{user:null,session:null},error:c}:!o||!o.session||!o.user?{data:{user:null,session:null},error:new ta}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign({user:o.user,session:o.session},o.weak_password?{weakPassword:o.weak_password}:null),error:c})}catch(r){if(ve(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,o,c,d;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:(d=e.options)===null||d===void 0?void 0:d.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;if(r==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(e){var r,o,c,d,f,x,w,m,C,_,O,P;let M,F;if("message"in e)M=e.message,F=e.signature;else{const{chain:G,wallet:k,statement:N,options:b}=e;let L;if(On())if(typeof k=="object")L=k;else{const H=window;if("solana"in H&&typeof H.solana=="object"&&("signIn"in H.solana&&typeof H.solana.signIn=="function"||"signMessage"in H.solana&&typeof H.solana.signMessage=="function"))L=H.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof k!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");L=k}const J=new URL((r=b==null?void 0:b.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in L&&L.signIn){const H=await L.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:J.host,uri:J.href}),N?{statement:N}:null));let U;if(Array.isArray(H)&&H[0]&&typeof H[0]=="object")U=H[0];else if(H&&typeof H=="object"&&"signedMessage"in H&&"signature"in H)U=H;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in U&&"signature"in U&&(typeof U.signedMessage=="string"||U.signedMessage instanceof Uint8Array)&&U.signature instanceof Uint8Array)M=typeof U.signedMessage=="string"?U.signedMessage:new TextDecoder().decode(U.signedMessage),F=U.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in L)||typeof L.signMessage!="function"||!("publicKey"in L)||typeof L!="object"||!L.publicKey||!("toBase58"in L.publicKey)||typeof L.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");M=[`${J.host} wants you to sign in with your Solana account:`,L.publicKey.toBase58(),...N?["",N,""]:[""],"Version: 1",`URI: ${J.href}`,`Issued At: ${(c=(o=b==null?void 0:b.signInWithSolana)===null||o===void 0?void 0:o.issuedAt)!==null&&c!==void 0?c:new Date().toISOString()}`,...!((d=b==null?void 0:b.signInWithSolana)===null||d===void 0)&&d.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((f=b==null?void 0:b.signInWithSolana)===null||f===void 0)&&f.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((x=b==null?void 0:b.signInWithSolana)===null||x===void 0)&&x.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((w=b==null?void 0:b.signInWithSolana)===null||w===void 0)&&w.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((m=b==null?void 0:b.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((_=(C=b==null?void 0:b.signInWithSolana)===null||C===void 0?void 0:C.resources)===null||_===void 0)&&_.length?["Resources",...b.signInWithSolana.resources.map(U=>`- ${U}`)]:[]].join(`
`);const H=await L.signMessage(new TextEncoder().encode(M),"utf8");if(!H||!(H instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");F=H}}try{const{data:G,error:k}=await _e(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:M,signature:sw(F)},!((O=e.options)===null||O===void 0)&&O.captchaToken?{gotrue_meta_security:{captcha_token:(P=e.options)===null||P===void 0?void 0:P.captchaToken}}:null),xform:Qn});if(k)throw k;return!G||!G.session||!G.user?{data:{user:null,session:null},error:new ta}:(G.session&&(await this._saveSession(G.session),await this._notifyAllSubscribers("SIGNED_IN",G.session)),{data:Object.assign({},G),error:k})}catch(G){if(ve(G))return{data:{user:null,session:null},error:G};throw G}}async _exchangeCodeForSession(e){const r=await Qr(this.storage,`${this.storageKey}-code-verifier`),[o,c]=(r??"").split("/");try{const{data:d,error:f}=await _e(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:o},xform:Qn});if(await vr(this.storage,`${this.storageKey}-code-verifier`),f)throw f;return!d||!d.session||!d.user?{data:{user:null,session:null,redirectType:null},error:new ta}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:Object.assign(Object.assign({},d),{redirectType:c??null}),error:f})}catch(d){if(ve(d))return{data:{user:null,session:null,redirectType:null},error:d};throw d}}async signInWithIdToken(e){try{const{options:r,provider:o,token:c,access_token:d,nonce:f}=e,x=await _e(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:o,id_token:c,access_token:d,nonce:f,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Qn}),{data:w,error:m}=x;return m?{data:{user:null,session:null},error:m}:!w||!w.session||!w.user?{data:{user:null,session:null},error:new ta}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:w,error:m})}catch(r){if(ve(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,o,c,d,f;try{if("email"in e){const{email:x,options:w}=e;let m=null,C=null;this.flowType==="pkce"&&([m,C]=await Ti(this.storage,this.storageKey));const{error:_}=await _e(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:x,data:(r=w==null?void 0:w.data)!==null&&r!==void 0?r:{},create_user:(o=w==null?void 0:w.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:w==null?void 0:w.captchaToken},code_challenge:m,code_challenge_method:C},redirectTo:w==null?void 0:w.emailRedirectTo});return{data:{user:null,session:null},error:_}}if("phone"in e){const{phone:x,options:w}=e,{data:m,error:C}=await _e(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:x,data:(c=w==null?void 0:w.data)!==null&&c!==void 0?c:{},create_user:(d=w==null?void 0:w.shouldCreateUser)!==null&&d!==void 0?d:!0,gotrue_meta_security:{captcha_token:w==null?void 0:w.captchaToken},channel:(f=w==null?void 0:w.channel)!==null&&f!==void 0?f:"sms"}});return{data:{user:null,session:null,messageId:m==null?void 0:m.message_id},error:C}}throw new na("You must provide either an email or phone number.")}catch(x){if(ve(x))return{data:{user:null,session:null},error:x};throw x}}async verifyOtp(e){var r,o;try{let c,d;"options"in e&&(c=(r=e.options)===null||r===void 0?void 0:r.redirectTo,d=(o=e.options)===null||o===void 0?void 0:o.captchaToken);const{data:f,error:x}=await _e(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:d}}),redirectTo:c,xform:Qn});if(x)throw x;if(!f)throw new Error("An error occurred on token verification.");const w=f.session,m=f.user;return w!=null&&w.access_token&&(await this._saveSession(w),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",w)),{data:{user:m,session:w},error:null}}catch(c){if(ve(c))return{data:{user:null,session:null},error:c};throw c}}async signInWithSSO(e){var r,o,c;try{let d=null,f=null;return this.flowType==="pkce"&&([d,f]=await Ti(this.storage,this.storageKey)),await _e(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(o=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&o!==void 0?o:void 0}),!((c=e==null?void 0:e.options)===null||c===void 0)&&c.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:d,code_challenge_method:f}),headers:this.headers,xform:Sw})}catch(d){if(ve(d))return{data:null,error:d};throw d}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:o}=e;if(o)throw o;if(!r)throw new Er;const{error:c}=await _e(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:c}})}catch(e){if(ve(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:o,type:c,options:d}=e,{error:f}=await _e(this.fetch,"POST",r,{headers:this.headers,body:{email:o,type:c,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},redirectTo:d==null?void 0:d.emailRedirectTo});return{data:{user:null,session:null},error:f}}else if("phone"in e){const{phone:o,type:c,options:d}=e,{data:f,error:x}=await _e(this.fetch,"POST",r,{headers:this.headers,body:{phone:o,type:c,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}}});return{data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:x}}throw new na("You must provide either an email or phone number and a type")}catch(r){if(ve(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const o=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),c=(async()=>(await o,await r()))();return this.pendingInLock.push((async()=>{try{await c}catch{}})()),c}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const o=r();for(this.pendingInLock.push((async()=>{try{await o}catch{}})()),await o;this.pendingInLock.length;){const c=[...this.pendingInLock];await Promise.all(c),this.pendingInLock.splice(0,c.length)}return await o}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await Qr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const o=e.expires_at?e.expires_at*1e3-Date.now()<uc:!1;if(this._debug("#__loadSession()",`session has${o?"":" not"} expired`,"expires_at",e.expires_at),!o){if(this.userStorage){const f=await Qr(this.userStorage,this.storageKey+"-user");f!=null&&f.user?e.user=f.user:e.user=fc()}if(this.storage.isServer&&e.user){let f=this.suppressGetSessionWarning;e=new Proxy(e,{get:(w,m,C)=>(!f&&m==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),f=!0,this.suppressGetSessionWarning=!0),Reflect.get(w,m,C))})}return{data:{session:e},error:null}}const{session:c,error:d}=await this._callRefreshToken(e.refresh_token);return d?{data:{session:null},error:d}:{data:{session:c},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await _e(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:br}):await this._useSession(async r=>{var o,c,d;const{data:f,error:x}=r;if(x)throw x;return!(!((o=f.session)===null||o===void 0)&&o.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Er}:await _e(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(d=(c=f.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0,xform:br})})}catch(r){if(ve(r))return Zm(r)&&(await this._removeSession(),await vr(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async o=>{const{data:c,error:d}=o;if(d)throw d;if(!c.session)throw new Er;const f=c.session;let x=null,w=null;this.flowType==="pkce"&&e.email!=null&&([x,w]=await Ti(this.storage,this.storageKey));const{data:m,error:C}=await _e(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:x,code_challenge_method:w}),jwt:f.access_token,xform:br});if(C)throw C;return f.user=m.user,await this._saveSession(f),await this._notifyAllSubscribers("USER_UPDATED",f),{data:{user:f.user},error:null}})}catch(o){if(ve(o))return{data:{user:null},error:o};throw o}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Er;const r=Date.now()/1e3;let o=r,c=!0,d=null;const{payload:f}=hc(e.access_token);if(f.exp&&(o=f.exp,c=o<=r),c){const{session:x,error:w}=await this._callRefreshToken(e.refresh_token);if(w)return{data:{user:null,session:null},error:w};if(!x)return{data:{user:null,session:null},error:null};d=x}else{const{data:x,error:w}=await this._getUser(e.access_token);if(w)throw w;d={access_token:e.access_token,refresh_token:e.refresh_token,user:x.user,token_type:"bearer",expires_in:o-r,expires_at:o},await this._saveSession(d),await this._notifyAllSubscribers("SIGNED_IN",d)}return{data:{user:d.user,session:d},error:null}}catch(r){if(ve(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var o;if(!e){const{data:f,error:x}=r;if(x)throw x;e=(o=f.session)!==null&&o!==void 0?o:void 0}if(!(e!=null&&e.refresh_token))throw new Er;const{session:c,error:d}=await this._callRefreshToken(e.refresh_token);return d?{data:{user:null,session:null},error:d}:c?{data:{user:c.user,session:c},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(ve(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e,r){try{if(!On())throw new ra("No browser detected.");if(e.error||e.error_description||e.error_code)throw new ra(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new ih("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ra("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new ih("No code detected.");const{data:N,error:b}=await this._exchangeCodeForSession(e.code);if(b)throw b;const L=new URL(window.location.href);return L.searchParams.delete("code"),window.history.replaceState(window.history.state,"",L.toString()),{data:{session:N.session,redirectType:null},error:null}}const{provider_token:o,provider_refresh_token:c,access_token:d,refresh_token:f,expires_in:x,expires_at:w,token_type:m}=e;if(!d||!x||!f||!m)throw new ra("No session defined in URL");const C=Math.round(Date.now()/1e3),_=parseInt(x);let O=C+_;w&&(O=parseInt(w));const P=O-C;P*1e3<=ki&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${P}s, should have been closer to ${_}s`);const M=O-_;C-M>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",M,O,C):C-M<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",M,O,C);const{data:F,error:G}=await this._getUser(d);if(G)throw G;const k={provider_token:o,provider_refresh_token:c,access_token:d,expires_in:_,expires_at:O,refresh_token:f,token_type:m,user:F.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:k,redirectType:e.type},error:null}}catch(o){if(ve(o))return{data:{session:null,redirectType:null},error:o};throw o}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await Qr(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var o;const{data:c,error:d}=r;if(d)return{error:d};const f=(o=c.session)===null||o===void 0?void 0:o.access_token;if(f){const{error:x}=await this.admin.signOut(f,e);if(x&&!(qm(x)&&(x.status===404||x.status===401||x.status===403)))return{error:x}}return e!=="others"&&(await this._removeSession(),await vr(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const r=aw(),o={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,o),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:o}}}async _emitInitialSession(e){return await this._useSession(async r=>{var o,c;try{const{data:{session:d},error:f}=r;if(f)throw f;await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",d)),this._debug("INITIAL_SESSION","callback id",e,"session",d)}catch(d){await((c=this.stateChangeEmitters.get(e))===null||c===void 0?void 0:c.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",d),console.error(d)}})}async resetPasswordForEmail(e,r={}){let o=null,c=null;this.flowType==="pkce"&&([o,c]=await Ti(this.storage,this.storageKey,!0));try{return await _e(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:o,code_challenge_method:c,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(d){if(ve(d))return{data:null,error:d};throw d}}async getUserIdentities(){var e;try{const{data:r,error:o}=await this.getUser();if(o)throw o;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(ve(r))return{data:null,error:r};throw r}}async linkIdentity(e){var r;try{const{data:o,error:c}=await this._useSession(async d=>{var f,x,w,m,C;const{data:_,error:O}=d;if(O)throw O;const P=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(f=e.options)===null||f===void 0?void 0:f.redirectTo,scopes:(x=e.options)===null||x===void 0?void 0:x.scopes,queryParams:(w=e.options)===null||w===void 0?void 0:w.queryParams,skipBrowserRedirect:!0});return await _e(this.fetch,"GET",P,{headers:this.headers,jwt:(C=(m=_.session)===null||m===void 0?void 0:m.access_token)!==null&&C!==void 0?C:void 0})});if(c)throw c;return On()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(o==null?void 0:o.url),{data:{provider:e.provider,url:o==null?void 0:o.url},error:null}}catch(o){if(ve(o))return{data:{provider:e.provider,url:null},error:o};throw o}}async unlinkIdentity(e){try{return await this._useSession(async r=>{var o,c;const{data:d,error:f}=r;if(f)throw f;return await _e(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(c=(o=d.session)===null||o===void 0?void 0:o.access_token)!==null&&c!==void 0?c:void 0})})}catch(r){if(ve(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const o=Date.now();return await dw(async c=>(c>0&&await uw(200*Math.pow(2,c-1)),this._debug(r,"refreshing attempt",c),await _e(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Qn})),(c,d)=>{const f=200*Math.pow(2,c);return d&&dc(d)&&Date.now()+f-o<ki})}catch(o){if(this._debug(r,"error",o),ve(o))return{data:{session:null,user:null},error:o};throw o}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const o=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",o),On()&&!r.skipBrowserRedirect&&window.location.assign(o),{data:{provider:e,url:o},error:null}}async _recoverAndRefresh(){var e,r;const o="#_recoverAndRefresh()";this._debug(o,"begin");try{const c=await Qr(this.storage,this.storageKey);if(c&&this.userStorage){let f=await Qr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!f&&(f={user:c.user},await Di(this.userStorage,this.storageKey+"-user",f)),c.user=(e=f==null?void 0:f.user)!==null&&e!==void 0?e:fc()}else if(c&&!c.user&&!c.user){const f=await Qr(this.storage,this.storageKey+"-user");f&&(f!=null&&f.user)?(c.user=f.user,await vr(this.storage,this.storageKey+"-user"),await Di(this.storage,this.storageKey,c)):c.user=fc()}if(this._debug(o,"session from storage",c),!this._isValidSession(c)){this._debug(o,"session is not valid"),c!==null&&await this._removeSession();return}const d=((r=c.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<uc;if(this._debug(o,`session has${d?"":" not"} expired with margin of ${uc}s`),d){if(this.autoRefreshToken&&c.refresh_token){const{error:f}=await this._callRefreshToken(c.refresh_token);f&&(console.error(f),dc(f)||(this._debug(o,"refresh failed with a non-retryable error, removing the session",f),await this._removeSession()))}}else if(c.user&&c.user.__isUserNotAvailableProxy===!0)try{const{data:f,error:x}=await this._getUser(c.access_token);!x&&(f!=null&&f.user)?(c.user=f.user,await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)):this._debug(o,"could not get user data, skipping SIGNED_IN notification")}catch(f){console.error("Error getting user data:",f),this._debug(o,"error getting user data, skipping SIGNED_IN notification",f)}else await this._notifyAllSubscribers("SIGNED_IN",c)}catch(c){this._debug(o,"error",c),console.error(c);return}finally{this._debug(o,"end")}}async _callRefreshToken(e){var r,o;if(!e)throw new Er;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const c=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(c,"begin");try{this.refreshingDeferred=new gl;const{data:d,error:f}=await this._refreshAccessToken(e);if(f)throw f;if(!d.session)throw new Er;await this._saveSession(d.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",d.session);const x={session:d.session,error:null};return this.refreshingDeferred.resolve(x),x}catch(d){if(this._debug(c,"error",d),ve(d)){const f={session:null,error:d};return dc(d)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(f),f}throw(o=this.refreshingDeferred)===null||o===void 0||o.reject(d),d}finally{this.refreshingDeferred=null,this._debug(c,"end")}}async _notifyAllSubscribers(e,r,o=!0){const c=`#_notifyAllSubscribers(${e})`;this._debug(c,"begin",r,`broadcast = ${o}`);try{this.broadcastChannel&&o&&this.broadcastChannel.postMessage({event:e,session:r});const d=[],f=Array.from(this.stateChangeEmitters.values()).map(async x=>{try{await x.callback(e,r)}catch(w){d.push(w)}});if(await Promise.all(f),d.length>0){for(let x=0;x<d.length;x+=1)console.error(d[x]);throw d[0]}}finally{this._debug(c,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const r=Object.assign({},e),o=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!o&&r.user&&await Di(this.userStorage,this.storageKey+"-user",{user:r.user});const c=Object.assign({},r);delete c.user;const d=ch(c);await Di(this.storage,this.storageKey,d)}else{const c=ch(r);await Di(this.storage,this.storageKey,c)}}async _removeSession(){this._debug("#_removeSession()"),await vr(this.storage,this.storageKey),await vr(this.storage,this.storageKey+"-code-verifier"),await vr(this.storage,this.storageKey+"-user"),this.userStorage&&await vr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&On()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ki);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:o}}=r;if(!o||!o.refresh_token||!o.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const c=Math.floor((o.expires_at*1e3-e)/ki);this._debug("#_autoRefreshTokenTick()",`access token expires in ${c} ticks, a tick lasts ${ki}ms, refresh threshold is ${gu} ticks`),c<=gu&&await this._callRefreshToken(o.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof pg)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!On()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,o){const c=[`provider=${encodeURIComponent(r)}`];if(o!=null&&o.redirectTo&&c.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o!=null&&o.scopes&&c.push(`scopes=${encodeURIComponent(o.scopes)}`),this.flowType==="pkce"){const[d,f]=await Ti(this.storage,this.storageKey),x=new URLSearchParams({code_challenge:`${encodeURIComponent(d)}`,code_challenge_method:`${encodeURIComponent(f)}`});c.push(x.toString())}if(o!=null&&o.queryParams){const d=new URLSearchParams(o.queryParams);c.push(d.toString())}return o!=null&&o.skipBrowserRedirect&&c.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${e}?${c.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var o;const{data:c,error:d}=r;return d?{data:null,error:d}:await _e(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(o=c==null?void 0:c.session)===null||o===void 0?void 0:o.access_token})})}catch(r){if(ve(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var o,c;const{data:d,error:f}=r;if(f)return{data:null,error:f};const x=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:w,error:m}=await _e(this.fetch,"POST",`${this.url}/factors`,{body:x,headers:this.headers,jwt:(o=d==null?void 0:d.session)===null||o===void 0?void 0:o.access_token});return m?{data:null,error:m}:(e.factorType==="totp"&&(!((c=w==null?void 0:w.totp)===null||c===void 0)&&c.qr_code)&&(w.totp.qr_code=`data:image/svg+xml;utf-8,${w.totp.qr_code}`),{data:w,error:null})})}catch(r){if(ve(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var o;const{data:c,error:d}=r;if(d)return{data:null,error:d};const{data:f,error:x}=await _e(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(o=c==null?void 0:c.session)===null||o===void 0?void 0:o.access_token});return x?{data:null,error:x}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+f.expires_in},f)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",f),{data:f,error:x})})}catch(r){if(ve(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var o;const{data:c,error:d}=r;return d?{data:null,error:d}:await _e(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(o=c==null?void 0:c.session)===null||o===void 0?void 0:o.access_token})})}catch(r){if(ve(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:o}=await this._challenge({factorId:e.factorId});return o?{data:null,error:o}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){const{data:{user:e},error:r}=await this.getUser();if(r)return{data:null,error:r};const o=(e==null?void 0:e.factors)||[],c=o.filter(f=>f.factor_type==="totp"&&f.status==="verified"),d=o.filter(f=>f.factor_type==="phone"&&f.status==="verified");return{data:{all:o,totp:c,phone:d},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,o;const{data:{session:c},error:d}=e;if(d)return{data:null,error:d};if(!c)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:f}=hc(c.access_token);let x=null;f.aal&&(x=f.aal);let w=x;((o=(r=c.user.factors)===null||r===void 0?void 0:r.filter(_=>_.status==="verified"))!==null&&o!==void 0?o:[]).length>0&&(w="aal2");const C=f.amr||[];return{data:{currentLevel:x,nextLevel:w,currentAuthenticationMethods:C},error:null}}))}async fetchJwk(e,r={keys:[]}){let o=r.keys.find(x=>x.kid===e);if(o)return o;const c=Date.now();if(o=this.jwks.keys.find(x=>x.kid===e),o&&this.jwks_cached_at+Ym>c)return o;const{data:d,error:f}=await _e(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(f)throw f;return!d.keys||d.keys.length===0||(this.jwks=d,this.jwks_cached_at=c,o=d.keys.find(x=>x.kid===e),!o)?null:o}async getClaims(e,r={}){try{let o=e;if(!o){const{data:P,error:M}=await this.getSession();if(M||!P.session)return{data:null,error:M};o=P.session.access_token}const{header:c,payload:d,signature:f,raw:{header:x,payload:w}}=hc(o);r!=null&&r.allowExpired||ww(d.exp);const m=!c.alg||c.alg.startsWith("HS")||!c.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(c.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!m){const{error:P}=await this.getUser(o);if(P)throw P;return{data:{claims:d,header:c,signature:f},error:null}}const C=yw(c.alg),_=await crypto.subtle.importKey("jwk",m,C,!0,["verify"]);if(!await crypto.subtle.verify(C,_,f,iw(`${x}.${w}`)))throw new mu("Invalid JWT signature");return{data:{claims:d,header:c,signature:f},error:null}}catch(o){if(ve(o))return{data:null,error:o};throw o}}}po.nextInstanceID=0;const Mw=po;class Lw extends Mw{constructor(e){super(e)}}var Bw=function(t,e,r,o){function c(d){return d instanceof r?d:new r(function(f){f(d)})}return new(r||(r=Promise))(function(d,f){function x(C){try{m(o.next(C))}catch(_){f(_)}}function w(C){try{m(o.throw(C))}catch(_){f(_)}}function m(C){C.done?d(C.value):c(C.value).then(x,w)}m((o=o.apply(t,e||[])).next())})};class Fw{constructor(e,r,o){var c,d,f;this.supabaseUrl=e,this.supabaseKey=r;const x=Wm(e);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",x),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",x),this.storageUrl=new URL("storage/v1",x),this.functionsUrl=new URL("functions/v1",x);const w=`sb-${x.hostname.split(".")[0]}-auth-token`,m={db:Dm,realtime:Mm,auth:Object.assign(Object.assign({},Pm),{storageKey:w}),global:km},C=zm(o??{},m);this.storageKey=(c=C.auth.storageKey)!==null&&c!==void 0?c:"",this.headers=(d=C.global.headers)!==null&&d!==void 0?d:{},C.accessToken?(this.accessToken=C.accessToken,this.auth=new Proxy({},{get:(_,O)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(O)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((f=C.auth)!==null&&f!==void 0?f:{},this.headers,C.global.fetch),this.fetch=jm(r,this._getAccessToken.bind(this),C.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},C.realtime)),this.rest=new Jx(new URL("rest/v1",x).href,{headers:this.headers,schema:C.db.schema,fetch:this.fetch}),this.storage=new Nm(this.storageUrl.href,this.headers,this.fetch,o==null?void 0:o.storage),C.accessToken||this._listenForAuthEvents()}get functions(){return new Rx(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},o={}){return this.rest.rpc(e,r,o)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,r;return Bw(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:o}=yield this.auth.getSession();return(r=(e=o.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:o,storage:c,userStorage:d,storageKey:f,flowType:x,lock:w,debug:m},C,_){const O={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Lw({url:this.authUrl.href,headers:Object.assign(Object.assign({},O),C),storageKey:f,autoRefreshToken:e,persistSession:r,detectSessionInUrl:o,storage:c,userStorage:d,flowType:x,lock:w,debug:m,fetch:_,hasCustomAuthorizationHeader:Object.keys(this.headers).some(P=>P.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new xm(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,o)=>{this._handleTokenChanged(r,"CLIENT",o==null?void 0:o.access_token)})}_handleTokenChanged(e,r,o){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==o?this.changedAccessToken=o:e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const jw=(t,e,r)=>new Fw(t,e,r);function Uw(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}Uw()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Vw="https://fksfudeaouwcyldiokwq.supabase.co",zw="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZrc2Z1ZGVhb3V3Y3lsZGlva3dxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjUxOTk0MjEsImV4cCI6MjA4MDc3NTQyMX0.d2F2cBm2HxSgPLar56QUUE2h6T-tjwLRj7pP8oBnTDQ",ft=jw(Vw,zw),xg=ue.createContext(void 0);function Ww({children:t}){const[e,r]=ue.useState(null),[o,c]=ue.useState(!0);ue.useEffect(()=>{ft.auth.getSession().then(({data:{session:m}})=>{r((m==null?void 0:m.user)??null),c(!1)});const{data:{subscription:w}}=ft.auth.onAuthStateChange((m,C)=>{(async()=>r((C==null?void 0:C.user)??null))()});return()=>w.unsubscribe()},[]);const d=async(w,m)=>{const{error:C}=await ft.auth.signInWithPassword({email:w,password:m});if(C)throw C},f=async(w,m)=>{const{error:C}=await ft.auth.signUp({email:w,password:m,options:{emailRedirectTo:window.location.origin}});if(C)throw C},x=async()=>{const{error:w}=await ft.auth.signOut();if(w)throw w};return S.jsx(xg.Provider,{value:{user:e,loading:o,signIn:d,signUp:f,signOut:x},children:t})}function Wr(){const t=ue.useContext(xg);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}function Hw({onToggleRegister:t}){const[e,r]=ue.useState(""),[o,c]=ue.useState(""),[d,f]=ue.useState(""),[x,w]=ue.useState(!1),{signIn:m}=Wr(),C=async _=>{_.preventDefault(),f(""),w(!0);try{await m(e,o)}catch(O){f(O instanceof Error?O.message:"Login failed")}finally{w(!1)}};return S.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:S.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 w-full max-w-md",children:[S.jsx("div",{className:"flex justify-center mb-8",children:S.jsx("img",{src:"/image copy.png",alt:"PERTAMINA LUBRICANTS",className:"h-32"})}),S.jsxs("form",{onSubmit:C,className:"space-y-6",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-500 mb-2",children:"USER ID"}),S.jsx("input",{id:"email",type:"email",value:e,onChange:_=>r(_.target.value),className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-600 focus:border-transparent",placeholder:"Enter your email",required:!0})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-500 mb-2",children:"PASSWORD"}),S.jsx("input",{id:"password",type:"password",value:o,onChange:_=>c(_.target.value),className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-600 focus:border-transparent",placeholder:"Enter your password",required:!0})]}),d&&S.jsx("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-lg text-sm",children:d}),S.jsx("button",{type:"submit",disabled:x,className:"w-full bg-red-600 hover:bg-red-700 text-white font-medium py-3 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:x?"LOGGING IN...":"LOGIN"}),S.jsx("div",{className:"text-center",children:S.jsx("button",{type:"button",onClick:t,className:"text-red-600 hover:text-red-700 text-sm font-medium",children:"Don't have an account? Register"})})]})]})})}function Gw({onToggleLogin:t}){const[e,r]=ue.useState(""),[o,c]=ue.useState(""),[d,f]=ue.useState(""),[x,w]=ue.useState(""),[m,C]=ue.useState(!1),[_,O]=ue.useState(!1),{signUp:P}=Wr(),M=async F=>{if(F.preventDefault(),w(""),C(!1),o!==d){w("Passwords do not match");return}if(o.length<6){w("Password must be at least 6 characters");return}O(!0);try{await P(e,o),C(!0),setTimeout(()=>{t()},2e3)}catch(G){w(G instanceof Error?G.message:"Registration failed")}finally{O(!1)}};return S.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:S.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 w-full max-w-md",children:[S.jsx("div",{className:"flex justify-center mb-8",children:S.jsx("img",{src:"/image copy.png",alt:"PERTAMINA LUBRICANTS",className:"h-32"})}),S.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 mb-6",children:"Register Account"}),S.jsxs("form",{onSubmit:M,className:"space-y-6",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-500 mb-2",children:"EMAIL"}),S.jsx("input",{id:"email",type:"email",value:e,onChange:F=>r(F.target.value),className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-600 focus:border-transparent",placeholder:"Enter your email",required:!0})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-500 mb-2",children:"PASSWORD"}),S.jsx("input",{id:"password",type:"password",value:o,onChange:F=>c(F.target.value),className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-600 focus:border-transparent",placeholder:"Minimum 6 characters",required:!0})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-500 mb-2",children:"CONFIRM PASSWORD"}),S.jsx("input",{id:"confirmPassword",type:"password",value:d,onChange:F=>f(F.target.value),className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-600 focus:border-transparent",placeholder:"Re-enter your password",required:!0})]}),x&&S.jsx("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-lg text-sm",children:x}),m&&S.jsx("div",{className:"bg-green-50 border border-green-200 text-green-600 px-4 py-3 rounded-lg text-sm",children:"Registration successful! Redirecting to login..."}),S.jsx("button",{type:"submit",disabled:_,className:"w-full bg-red-600 hover:bg-red-700 text-white font-medium py-3 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:_?"REGISTERING...":"REGISTER"}),S.jsx("div",{className:"text-center",children:S.jsx("button",{type:"button",onClick:t,className:"text-red-600 hover:text-red-700 text-sm font-medium",children:"Already have an account? Login"})})]})]})})}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Xw={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $w=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Qe=(t,e)=>{const r=ue.forwardRef(({color:o="currentColor",size:c=24,strokeWidth:d=2,absoluteStrokeWidth:f,className:x="",children:w,...m},C)=>ue.createElement("svg",{ref:C,...Xw,width:c,height:c,stroke:o,strokeWidth:f?Number(d)*24/Number(c):d,className:["lucide",`lucide-${$w(t)}`,x].join(" "),...m},[...e.map(([_,O])=>ue.createElement(_,O)),...Array.isArray(w)?w:[w]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gh=Qe("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yw=Qe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ph=Qe("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ha=Qe("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ma=Qe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kw=Qe("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qw=Qe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wu=Qe("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xh=Qe("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mh=Qe("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wh=Qe("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yh=Qe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zw=Qe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qw=Qe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jw=Qe("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ey=Qe("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=Qe("ScanLine",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vh=Qe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ty=Qe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ny=Qe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ia=Qe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vd=Qe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ry=Qe("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iy=Qe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function sy({onNavigate:t}){const[e,r]=ue.useState(!1),{user:o,signOut:c}=Wr(),d=async()=>{try{await c()}catch(f){console.error("Logout error:",f)}};return S.jsxs("div",{className:"relative",children:[S.jsxs("button",{onClick:()=>r(!e),className:"flex items-center gap-2 px-4 py-2 hover:bg-red-50 rounded-lg transition-colors text-gray-700",children:[S.jsx("div",{className:"w-8 h-8 bg-red-600 rounded-full flex items-center justify-center text-white",children:S.jsx(vd,{className:"w-5 h-5"})}),S.jsx("span",{className:"text-sm font-medium max-w-[200px] truncate",children:o==null?void 0:o.email}),S.jsx(ma,{className:`w-4 h-4 transition-transform ${e?"rotate-180":""}`})]}),e&&S.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-lg shadow-xl border border-gray-200 py-2 z-50",children:[S.jsxs("div",{className:"px-4 py-3 border-b border-gray-100",children:[S.jsx("p",{className:"text-sm text-gray-600",children:"Logged in as"}),S.jsx("p",{className:"text-sm font-semibold text-gray-900 truncate",children:o==null?void 0:o.email})]}),S.jsx("div",{className:"px-4 py-3 space-y-2 text-sm text-gray-600",children:S.jsxs("div",{children:[S.jsx("p",{className:"text-xs text-gray-500 uppercase font-semibold",children:"Account Status"}),S.jsx("p",{className:"text-green-600 font-medium",children:"Active"})]})}),S.jsxs("button",{onClick:()=>{r(!1),t&&t("edit-profile")},className:"w-full flex items-center gap-2 px-4 py-3 text-gray-700 hover:bg-gray-50 transition-colors text-left border-t border-gray-100",children:[S.jsx(ty,{className:"w-4 h-4"}),S.jsx("span",{className:"font-medium",children:"Edit Profile"})]}),S.jsxs("button",{onClick:()=>{r(!1),d()},className:"w-full flex items-center gap-2 px-4 py-3 text-red-600 hover:bg-red-50 transition-colors text-left border-t border-gray-100",children:[S.jsx(Zw,{className:"w-4 h-4"}),S.jsx("span",{className:"font-medium",children:"Logout"})]})]}),e&&S.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>r(!1)})]})}function oy({children:t,currentPage:e,onNavigate:r}){const[o,c]=ue.useState(!1),d=[{id:"dashboard",icon:wh,label:"Dashboard"},{id:"scanner",icon:qs,label:"Scanner"},{id:"history",icon:mh,label:"History"},{id:"reports",icon:wu,label:"Reports"},{id:"edit-profile",icon:vd,label:"Edit Profile"}],f=[{id:"dashboard",icon:wh,label:"Dashboard"},{id:"scanner",icon:qs,label:"Scanner"},{id:"history",icon:mh,label:"History"},{id:"reports",icon:wu,label:"Reports"}],x=w=>{r(w),c(!1)};return S.jsxs("div",{className:"min-h-screen bg-white flex flex-col",children:[S.jsx("header",{className:"bg-white shadow-md border-b-4 border-red-600 sticky top-0 z-40",children:S.jsx("div",{className:"px-4 sm:px-6 lg:px-8",children:S.jsxs("div",{className:"flex items-center justify-between h-20",children:[S.jsx("button",{onClick:()=>c(!o),className:"flex items-center hover:opacity-80 transition-opacity",title:"Toggle Menu",children:S.jsx("img",{src:"/image copy.png",alt:"PERTAMINA LUBRICANTS",className:"h-12"})}),S.jsx(sy,{onNavigate:x})]})})}),S.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[S.jsx("aside",{className:`fixed left-0 top-20 h-[calc(100vh-80px)] w-64 bg-red-600 shadow-lg transform transition-transform duration-300 z-30 ${o?"translate-x-0":"-translate-x-full"}`,children:S.jsx("div",{className:"overflow-y-auto h-full",children:S.jsx("nav",{className:"space-y-2 p-4",children:d.map(w=>{const m=w.icon,C=e===w.id;return S.jsxs("button",{onClick:()=>x(w.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors font-semibold text-white text-left ${C?"bg-red-700 bg-opacity-80":"hover:bg-red-700 hover:bg-opacity-40"}`,children:[S.jsx(m,{className:"w-6 h-6 flex-shrink-0"}),S.jsx("span",{className:"text-sm",children:w.label})]},w.id)})})})}),o&&S.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-20 top-20",onClick:()=>c(!1)}),S.jsx("main",{className:"flex-1 overflow-auto w-full bg-gray-50",children:S.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-8 max-w-7xl mx-auto w-full",children:t})})]}),S.jsx("nav",{className:"md:hidden bg-white border-t-4 border-red-600 sticky bottom-0 z-30",children:S.jsx("div",{className:"flex overflow-x-auto",children:f.map(w=>{const m=w.icon,C=e===w.id;return S.jsxs("button",{onClick:()=>r(w.id),className:`flex-1 flex flex-col items-center gap-1 px-4 py-3 ${C?"text-red-600 border-t-4 border-red-600":"text-gray-600"}`,children:[S.jsx(m,{className:"w-5 h-5"}),S.jsx("span",{className:"text-xs font-medium",children:w.label})]},w.id)})})})]})}function Eh(){const[t,e]=ue.useState({totalProducts:0,todayScans:0,totalScans:0,recentScans:[]}),{user:r}=Wr();ue.useEffect(()=>{o()},[r]);const o=async()=>{try{const{count:d}=await ft.from("products").select("*",{count:"exact",head:!0}),f=new Date().toISOString().split("T")[0],{count:x}=await ft.from("scan_history").select("*",{count:"exact",head:!0}).eq("user_id",r==null?void 0:r.id).eq("scan_date",f),{count:w}=await ft.from("scan_history").select("*",{count:"exact",head:!0}).eq("user_id",r==null?void 0:r.id),{data:m}=await ft.from("scan_history").select(`
          serial_number,
          scanned_at,
          products (product_name)
        `).eq("user_id",r==null?void 0:r.id).order("scanned_at",{ascending:!1}).limit(5);e({totalProducts:d||0,todayScans:x||0,totalScans:w||0,recentScans:(m==null?void 0:m.map(C=>{var _;return{serial_number:C.serial_number,product_name:((_=C.products)==null?void 0:_.product_name)||"Unknown",scanned_at:C.scanned_at}}))||[]})}catch(d){console.error("Error loading dashboard:",d)}},c=d=>new Date(d).toLocaleString("id-ID",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"});return S.jsxs("div",{className:"space-y-6",children:[S.jsxs("div",{children:[S.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),S.jsx("p",{className:"text-gray-600",children:"Pallet Scanner Management System"})]}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[S.jsxs("div",{className:"bg-white border-4 border-red-600 rounded-lg shadow-lg p-6",children:[S.jsxs("div",{className:"flex items-center justify-between mb-4",children:[S.jsx("div",{className:"bg-red-100 p-3 rounded-lg",children:S.jsx(Jw,{className:"w-6 h-6 text-red-600"})}),S.jsx(ia,{className:"w-5 h-5 text-red-600 opacity-80"})]}),S.jsx("p",{className:"text-gray-600 text-sm font-medium mb-1",children:"Total Products"}),S.jsx("p",{className:"text-3xl font-bold text-gray-900",children:t.totalProducts})]}),S.jsxs("div",{className:"bg-white border-4 border-red-600 rounded-lg shadow-lg p-6",children:[S.jsxs("div",{className:"flex items-center justify-between mb-4",children:[S.jsx("div",{className:"bg-red-100 p-3 rounded-lg",children:S.jsx(qs,{className:"w-6 h-6 text-red-600"})}),S.jsx(ia,{className:"w-5 h-5 text-red-600 opacity-80"})]}),S.jsx("p",{className:"text-gray-600 text-sm font-medium mb-1",children:"Today's Scans"}),S.jsx("p",{className:"text-3xl font-bold text-gray-900",children:t.todayScans})]}),S.jsxs("div",{className:"bg-white border-4 border-red-600 rounded-lg shadow-lg p-6",children:[S.jsxs("div",{className:"flex items-center justify-between mb-4",children:[S.jsx("div",{className:"bg-red-100 p-3 rounded-lg",children:S.jsx(qs,{className:"w-6 h-6 text-red-600"})}),S.jsx(ia,{className:"w-5 h-5 text-red-600 opacity-80"})]}),S.jsx("p",{className:"text-gray-600 text-sm font-medium mb-1",children:"Total Scans"}),S.jsx("p",{className:"text-3xl font-bold text-gray-900",children:t.totalScans})]}),S.jsxs("div",{className:"bg-white border-4 border-red-600 rounded-lg shadow-lg p-6",children:[S.jsxs("div",{className:"flex items-center justify-between mb-4",children:[S.jsx("div",{className:"bg-red-100 p-3 rounded-lg",children:S.jsx(qw,{className:"w-6 h-6 text-red-600"})}),S.jsx(ia,{className:"w-5 h-5 text-red-600 opacity-80"})]}),S.jsx("p",{className:"text-gray-600 text-sm font-medium mb-1",children:"Recent Activity"}),S.jsx("p",{className:"text-3xl font-bold text-gray-900",children:t.recentScans.length})]})]}),S.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[S.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Scans"}),t.recentScans.length===0?S.jsx("div",{className:"text-center py-8 text-gray-500",children:"No scans yet. Start scanning to see history."}):S.jsx("div",{className:"space-y-3",children:t.recentScans.map((d,f)=>S.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsx("div",{className:"bg-red-600 p-2 rounded-lg",children:S.jsx(qs,{className:"w-5 h-5 text-white"})}),S.jsxs("div",{children:[S.jsxs("p",{className:"font-medium text-gray-900",children:["SN: ",d.serial_number]}),S.jsx("p",{className:"text-sm text-gray-600",children:d.product_name})]})]}),S.jsx("div",{className:"text-right",children:S.jsx("p",{className:"text-sm text-gray-500",children:c(d.scanned_at)})})]},f))})]})]})}var ie;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ie||(ie={}));var Ch=new Map([[ie.QR_CODE,"QR_CODE"],[ie.AZTEC,"AZTEC"],[ie.CODABAR,"CODABAR"],[ie.CODE_39,"CODE_39"],[ie.CODE_93,"CODE_93"],[ie.CODE_128,"CODE_128"],[ie.DATA_MATRIX,"DATA_MATRIX"],[ie.MAXICODE,"MAXICODE"],[ie.ITF,"ITF"],[ie.EAN_13,"EAN_13"],[ie.EAN_8,"EAN_8"],[ie.PDF_417,"PDF_417"],[ie.RSS_14,"RSS_14"],[ie.RSS_EXPANDED,"RSS_EXPANDED"],[ie.UPC_A,"UPC_A"],[ie.UPC_E,"UPC_E"],[ie.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),_h;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})(_h||(_h={}));function ay(t){return Object.values(ie).includes(t)}var Ga;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Ga||(Ga={}));var ly=function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[Ga.SCAN_TYPE_CAMERA,Ga.SCAN_TYPE_FILE],t}(),mg=function(){function t(e,r){this.format=e,this.formatName=r}return t.prototype.toString=function(){return this.formatName},t.create=function(e){if(!Ch.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new t(e,Ch.get(e))},t}(),Ah=function(){function t(){}return t.createFromText=function(e){var r={text:e};return{decodedText:e,result:r}},t.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},t}(),yu;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(yu||(yu={}));var cy=function(){function t(){}return t.createFrom=function(e){return{errorMessage:e,type:yu.UNKWOWN_ERROR}},t}(),uy=function(){function t(e){this.verbose=e}return t.prototype.log=function(e){this.verbose&&console.log(e)},t.prototype.warn=function(e){this.verbose&&console.warn(e)},t.prototype.logError=function(e,r){(this.verbose||r===!0)&&console.error(e)},t.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},t}();function Jn(t){return typeof t>"u"||t===null}var Xi=function(){function t(){}return t.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},t.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t}(),wg=function(){function t(){}return t.isMediaStreamConstraintsValid=function(e,r){if(typeof e!="object"){var o=typeof e;return r.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(o,"."),!0),!1}for(var c=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],d=new Set(c),f=Object.keys(e),x=0,w=f;x<w.length;x++){var m=w[x];if(d.has(m))return r.logError("".concat(m," is not supported videoConstaints."),!0),!1}return!0},t}(),vu={exports:{}};(function(t,e){(function(r,o){o(e)})(kt,function(r){function o(v){return v==null}var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,n){v.__proto__=n}||function(v,n){for(var i in n)n.hasOwnProperty(i)&&(v[i]=n[i])};function d(v,n){c(v,n);function i(){this.constructor=v}v.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}function f(v,n){var i=Object.setPrototypeOf;i?i(v,n):v.__proto__=n}function x(v,n){n===void 0&&(n=v.constructor);var i=Error.captureStackTrace;i&&i(v,n)}var w=function(v){d(n,v);function n(i){var s=this.constructor,a=v.call(this,i)||this;return Object.defineProperty(a,"name",{value:s.name,enumerable:!1}),f(a,s.prototype),x(a),a}return n}(Error);class m extends w{constructor(n=void 0){super(n),this.message=n}getKind(){return this.constructor.kind}}m.kind="Exception";class C extends m{}C.kind="ArgumentException";class _ extends m{}_.kind="IllegalArgumentException";class O{constructor(n){if(this.binarizer=n,n===null)throw new _("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(n,i){return this.binarizer.getBlackRow(n,i)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(n,i,s,a){const l=this.binarizer.getLuminanceSource().crop(n,i,s,a);return new O(this.binarizer.createBinarizer(l))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const n=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new O(this.binarizer.createBinarizer(n))}rotateCounterClockwise45(){const n=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new O(this.binarizer.createBinarizer(n))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class P extends m{static getChecksumInstance(){return new P}}P.kind="ChecksumException";class M{constructor(n){this.source=n}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class F{static arraycopy(n,i,s,a,l){for(;l--;)s[a++]=n[i++]}static currentTimeMillis(){return Date.now()}}class G extends m{}G.kind="IndexOutOfBoundsException";class k extends G{constructor(n=void 0,i=void 0){super(i),this.index=n,this.message=i}}k.kind="ArrayIndexOutOfBoundsException";class N{static fill(n,i){for(let s=0,a=n.length;s<a;s++)n[s]=i}static fillWithin(n,i,s,a){N.rangeCheck(n.length,i,s);for(let l=i;l<s;l++)n[l]=a}static rangeCheck(n,i,s){if(i>s)throw new _("fromIndex("+i+") > toIndex("+s+")");if(i<0)throw new k(i);if(s>n)throw new k(s)}static asList(...n){return n}static create(n,i,s){return Array.from({length:n}).map(l=>Array.from({length:i}).fill(s))}static createInt32Array(n,i,s){return Array.from({length:n}).map(l=>Int32Array.from({length:i}).fill(s))}static equals(n,i){if(!n||!i||!n.length||!i.length||n.length!==i.length)return!1;for(let s=0,a=n.length;s<a;s++)if(n[s]!==i[s])return!1;return!0}static hashCode(n){if(n===null)return 0;let i=1;for(const s of n)i=31*i+s;return i}static fillUint8Array(n,i){for(let s=0;s!==n.length;s++)n[s]=i}static copyOf(n,i){return n.slice(0,i)}static copyOfUint8Array(n,i){if(n.length<=i){const s=new Uint8Array(i);return s.set(n),s}return n.slice(0,i)}static copyOfRange(n,i,s){const a=s-i,l=new Int32Array(a);return F.arraycopy(n,i,l,0,a),l}static binarySearch(n,i,s){s===void 0&&(s=N.numberComparator);let a=0,l=n.length-1;for(;a<=l;){const u=l+a>>1,h=s(i,n[u]);if(h>0)a=u+1;else if(h<0)l=u-1;else return u}return-a-1}static numberComparator(n,i){return n-i}}class b{static numberOfTrailingZeros(n){let i;if(n===0)return 32;let s=31;return i=n<<16,i!==0&&(s-=16,n=i),i=n<<8,i!==0&&(s-=8,n=i),i=n<<4,i!==0&&(s-=4,n=i),i=n<<2,i!==0&&(s-=2,n=i),s-(n<<1>>>31)}static numberOfLeadingZeros(n){if(n===0)return 32;let i=1;return n>>>16||(i+=16,n<<=16),n>>>24||(i+=8,n<<=8),n>>>28||(i+=4,n<<=4),n>>>30||(i+=2,n<<=2),i-=n>>>31,i}static toHexString(n){return n.toString(16)}static toBinaryString(n){return String(parseInt(String(n),2))}static bitCount(n){return n=n-(n>>>1&1431655765),n=(n&858993459)+(n>>>2&858993459),n=n+(n>>>4)&252645135,n=n+(n>>>8),n=n+(n>>>16),n&63}static truncDivision(n,i){return Math.trunc(n/i)}static parseInt(n,i=void 0){return parseInt(n,i)}}b.MIN_VALUE_32_BITS=-2147483648,b.MAX_VALUE=Number.MAX_SAFE_INTEGER;class L{constructor(n,i){n===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=n,i==null?this.bits=L.makeArray(n):this.bits=i)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(n){if(n>this.bits.length*32){const i=L.makeArray(n);F.arraycopy(this.bits,0,i,0,this.bits.length),this.bits=i}}get(n){return(this.bits[Math.floor(n/32)]&1<<(n&31))!==0}set(n){this.bits[Math.floor(n/32)]|=1<<(n&31)}flip(n){this.bits[Math.floor(n/32)]^=1<<(n&31)}getNextSet(n){const i=this.size;if(n>=i)return i;const s=this.bits;let a=Math.floor(n/32),l=s[a];l&=~((1<<(n&31))-1);const u=s.length;for(;l===0;){if(++a===u)return i;l=s[a]}const h=a*32+b.numberOfTrailingZeros(l);return h>i?i:h}getNextUnset(n){const i=this.size;if(n>=i)return i;const s=this.bits;let a=Math.floor(n/32),l=~s[a];l&=~((1<<(n&31))-1);const u=s.length;for(;l===0;){if(++a===u)return i;l=~s[a]}const h=a*32+b.numberOfTrailingZeros(l);return h>i?i:h}setBulk(n,i){this.bits[Math.floor(n/32)]=i}setRange(n,i){if(i<n||n<0||i>this.size)throw new _;if(i===n)return;i--;const s=Math.floor(n/32),a=Math.floor(i/32),l=this.bits;for(let u=s;u<=a;u++){const h=u>s?0:n&31,p=(2<<(u<a?31:i&31))-(1<<h);l[u]|=p}}clear(){const n=this.bits.length,i=this.bits;for(let s=0;s<n;s++)i[s]=0}isRange(n,i,s){if(i<n||n<0||i>this.size)throw new _;if(i===n)return!0;i--;const a=Math.floor(n/32),l=Math.floor(i/32),u=this.bits;for(let h=a;h<=l;h++){const g=h>a?0:n&31,y=(2<<(h<l?31:i&31))-(1<<g)&4294967295;if((u[h]&y)!==(s?y:0))return!1}return!0}appendBit(n){this.ensureCapacity(this.size+1),n&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(n,i){if(i<0||i>32)throw new _("Num bits must be between 0 and 32");this.ensureCapacity(this.size+i);for(let s=i;s>0;s--)this.appendBit((n>>s-1&1)===1)}appendBitArray(n){const i=n.size;this.ensureCapacity(this.size+i);for(let s=0;s<i;s++)this.appendBit(n.get(s))}xor(n){if(this.size!==n.size)throw new _("Sizes don't match");const i=this.bits;for(let s=0,a=i.length;s<a;s++)i[s]^=n.bits[s]}toBytes(n,i,s,a){for(let l=0;l<a;l++){let u=0;for(let h=0;h<8;h++)this.get(n)&&(u|=1<<7-h),n++;i[s+l]=u}}getBitArray(){return this.bits}reverse(){const n=new Int32Array(this.bits.length),i=Math.floor((this.size-1)/32),s=i+1,a=this.bits;for(let l=0;l<s;l++){let u=a[l];u=u>>1&1431655765|(u&1431655765)<<1,u=u>>2&858993459|(u&858993459)<<2,u=u>>4&252645135|(u&252645135)<<4,u=u>>8&16711935|(u&16711935)<<8,u=u>>16&65535|(u&65535)<<16,n[i-l]=u}if(this.size!==s*32){const l=s*32-this.size;let u=n[0]>>>l;for(let h=1;h<s;h++){const g=n[h];u|=g<<32-l,n[h-1]=u,u=g>>>l}n[s-1]=u}this.bits=n}static makeArray(n){return new Int32Array(Math.floor((n+31)/32))}equals(n){if(!(n instanceof L))return!1;const i=n;return this.size===i.size&&N.equals(this.bits,i.bits)}hashCode(){return 31*this.size+N.hashCode(this.bits)}toString(){let n="";for(let i=0,s=this.size;i<s;i++)i&7||(n+=" "),n+=this.get(i)?"X":".";return n}clone(){return new L(this.size,this.bits.slice())}}var J;(function(v){v[v.OTHER=0]="OTHER",v[v.PURE_BARCODE=1]="PURE_BARCODE",v[v.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",v[v.TRY_HARDER=3]="TRY_HARDER",v[v.CHARACTER_SET=4]="CHARACTER_SET",v[v.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",v[v.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",v[v.ASSUME_GS1=7]="ASSUME_GS1",v[v.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",v[v.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",v[v.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(J||(J={}));var H=J;class U extends m{static getFormatInstance(){return new U}}U.kind="FormatException";var q;(function(v){v[v.Cp437=0]="Cp437",v[v.ISO8859_1=1]="ISO8859_1",v[v.ISO8859_2=2]="ISO8859_2",v[v.ISO8859_3=3]="ISO8859_3",v[v.ISO8859_4=4]="ISO8859_4",v[v.ISO8859_5=5]="ISO8859_5",v[v.ISO8859_6=6]="ISO8859_6",v[v.ISO8859_7=7]="ISO8859_7",v[v.ISO8859_8=8]="ISO8859_8",v[v.ISO8859_9=9]="ISO8859_9",v[v.ISO8859_10=10]="ISO8859_10",v[v.ISO8859_11=11]="ISO8859_11",v[v.ISO8859_13=12]="ISO8859_13",v[v.ISO8859_14=13]="ISO8859_14",v[v.ISO8859_15=14]="ISO8859_15",v[v.ISO8859_16=15]="ISO8859_16",v[v.SJIS=16]="SJIS",v[v.Cp1250=17]="Cp1250",v[v.Cp1251=18]="Cp1251",v[v.Cp1252=19]="Cp1252",v[v.Cp1256=20]="Cp1256",v[v.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",v[v.UTF8=22]="UTF8",v[v.ASCII=23]="ASCII",v[v.Big5=24]="Big5",v[v.GB18030=25]="GB18030",v[v.EUC_KR=26]="EUC_KR"})(q||(q={}));class X{constructor(n,i,s,...a){this.valueIdentifier=n,this.name=s,typeof i=="number"?this.values=Int32Array.from([i]):this.values=i,this.otherEncodingNames=a,X.VALUE_IDENTIFIER_TO_ECI.set(n,this),X.NAME_TO_ECI.set(s,this);const l=this.values;for(let u=0,h=l.length;u!==h;u++){const g=l[u];X.VALUES_TO_ECI.set(g,this)}for(const u of a)X.NAME_TO_ECI.set(u,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(n){if(n<0||n>=900)throw new U("incorect value");const i=X.VALUES_TO_ECI.get(n);if(i===void 0)throw new U("incorect value");return i}static getCharacterSetECIByName(n){const i=X.NAME_TO_ECI.get(n);if(i===void 0)throw new U("incorect value");return i}equals(n){if(!(n instanceof X))return!1;const i=n;return this.getName()===i.getName()}}X.VALUE_IDENTIFIER_TO_ECI=new Map,X.VALUES_TO_ECI=new Map,X.NAME_TO_ECI=new Map,X.Cp437=new X(q.Cp437,Int32Array.from([0,2]),"Cp437"),X.ISO8859_1=new X(q.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),X.ISO8859_2=new X(q.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),X.ISO8859_3=new X(q.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),X.ISO8859_4=new X(q.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),X.ISO8859_5=new X(q.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),X.ISO8859_6=new X(q.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),X.ISO8859_7=new X(q.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),X.ISO8859_8=new X(q.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),X.ISO8859_9=new X(q.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),X.ISO8859_10=new X(q.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),X.ISO8859_11=new X(q.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),X.ISO8859_13=new X(q.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),X.ISO8859_14=new X(q.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),X.ISO8859_15=new X(q.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),X.ISO8859_16=new X(q.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),X.SJIS=new X(q.SJIS,20,"SJIS","Shift_JIS"),X.Cp1250=new X(q.Cp1250,21,"Cp1250","windows-1250"),X.Cp1251=new X(q.Cp1251,22,"Cp1251","windows-1251"),X.Cp1252=new X(q.Cp1252,23,"Cp1252","windows-1252"),X.Cp1256=new X(q.Cp1256,24,"Cp1256","windows-1256"),X.UnicodeBigUnmarked=new X(q.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),X.UTF8=new X(q.UTF8,26,"UTF8","UTF-8"),X.ASCII=new X(q.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),X.Big5=new X(q.Big5,28,"Big5"),X.GB18030=new X(q.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),X.EUC_KR=new X(q.EUC_KR,30,"EUC_KR","EUC-KR");class me extends m{}me.kind="UnsupportedOperationException";class Le{static decode(n,i){const s=this.encodingName(i);return this.customDecoder?this.customDecoder(n,s):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(s)?this.decodeFallback(n,s):new TextDecoder(s).decode(n)}static shouldDecodeOnFallback(n){return!Le.isBrowser()&&n==="ISO-8859-1"}static encode(n,i){const s=this.encodingName(i);return this.customEncoder?this.customEncoder(n,s):typeof TextEncoder>"u"?this.encodeFallback(n):new TextEncoder().encode(n)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(n){return typeof n=="string"?n:n.getName()}static encodingCharacterSet(n){return n instanceof X?n:X.getCharacterSetECIByName(n)}static decodeFallback(n,i){const s=this.encodingCharacterSet(i);if(Le.isDecodeFallbackSupported(s)){let a="";for(let l=0,u=n.length;l<u;l++){let h=n[l].toString(16);h.length<2&&(h="0"+h),a+="%"+h}return decodeURIComponent(a)}if(s.equals(X.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(n.buffer));throw new me(`Encoding ${this.encodingName(i)} not supported by fallback.`)}static isDecodeFallbackSupported(n){return n.equals(X.UTF8)||n.equals(X.ISO8859_1)||n.equals(X.ASCII)}static encodeFallback(n){const s=btoa(unescape(encodeURIComponent(n))).split(""),a=[];for(let l=0;l<s.length;l++)a.push(s[l].charCodeAt(0));return new Uint8Array(a)}}class ce{static castAsNonUtf8Char(n,i=null){const s=i?i.getName():this.ISO88591;return Le.decode(new Uint8Array([n]),s)}static guessEncoding(n,i){if(i!=null&&i.get(H.CHARACTER_SET)!==void 0)return i.get(H.CHARACTER_SET).toString();const s=n.length;let a=!0,l=!0,u=!0,h=0,g=0,p=0,y=0,E=0,A=0,T=0,R=0,D=0,B=0,z=0;const Z=n.length>3&&n[0]===239&&n[1]===187&&n[2]===191;for(let Q=0;Q<s&&(a||l||u);Q++){const Y=n[Q]&255;u&&(h>0?Y&128?h--:u=!1:Y&128&&(Y&64?(h++,Y&32?(h++,Y&16?(h++,Y&8?u=!1:y++):p++):g++):u=!1)),a&&(Y>127&&Y<160?a=!1:Y>159&&(Y<192||Y===215||Y===247)&&z++),l&&(E>0?Y<64||Y===127||Y>252?l=!1:E--:Y===128||Y===160||Y>239?l=!1:Y>160&&Y<224?(A++,R=0,T++,T>D&&(D=T)):Y>127?(E++,T=0,R++,R>B&&(B=R)):(T=0,R=0))}return u&&h>0&&(u=!1),l&&E>0&&(l=!1),u&&(Z||g+p+y>0)?ce.UTF8:l&&(ce.ASSUME_SHIFT_JIS||D>=3||B>=3)?ce.SHIFT_JIS:a&&l?D===2&&A===2||z*10>=s?ce.SHIFT_JIS:ce.ISO88591:a?ce.ISO88591:l?ce.SHIFT_JIS:u?ce.UTF8:ce.PLATFORM_DEFAULT_ENCODING}static format(n,...i){let s=-1;function a(u,h,g,p,y,E){if(u==="%%")return"%";if(i[++s]===void 0)return;u=p?parseInt(p.substr(1)):void 0;let A=y?parseInt(y.substr(1)):void 0,T;switch(E){case"s":T=i[s];break;case"c":T=i[s][0];break;case"f":T=parseFloat(i[s]).toFixed(u);break;case"p":T=parseFloat(i[s]).toPrecision(u);break;case"e":T=parseFloat(i[s]).toExponential(u);break;case"x":T=parseInt(i[s]).toString(A||16);break;case"d":T=parseFloat(parseInt(i[s],A||10).toPrecision(u)).toFixed(0);break}T=typeof T=="object"?JSON.stringify(T):(+T).toString(A);let R=parseInt(g),D=g&&g[0]+""=="0"?"0":" ";for(;T.length<R;)T=h!==void 0?T+D:D+T;return T}let l=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return n.replace(l,a)}static getBytes(n,i){return Le.encode(n,i)}static getCharCode(n,i=0){return n.charCodeAt(i)}static getCharAt(n){return String.fromCharCode(n)}}ce.SHIFT_JIS=X.SJIS.getName(),ce.GB2312="GB2312",ce.ISO88591=X.ISO8859_1.getName(),ce.EUC_JP="EUC_JP",ce.UTF8=X.UTF8.getName(),ce.PLATFORM_DEFAULT_ENCODING=ce.UTF8,ce.ASSUME_SHIFT_JIS=!1;class ee{constructor(n=""){this.value=n}enableDecoding(n){return this.encoding=n,this}append(n){return typeof n=="string"?this.value+=n.toString():this.encoding?this.value+=ce.castAsNonUtf8Char(n,this.encoding):this.value+=String.fromCharCode(n),this}appendChars(n,i,s){for(let a=i;i<i+s;a++)this.append(n[a]);return this}length(){return this.value.length}charAt(n){return this.value.charAt(n)}deleteCharAt(n){this.value=this.value.substr(0,n)+this.value.substring(n+1)}setCharAt(n,i){this.value=this.value.substr(0,n)+i+this.value.substr(n+1)}substring(n,i){return this.value.substring(n,i)}setLengthToZero(){this.value=""}toString(){return this.value}insert(n,i){this.value=this.value.substr(0,n)+i+this.value.substr(n+i.length)}}class pe{constructor(n,i,s,a){if(this.width=n,this.height=i,this.rowSize=s,this.bits=a,i==null&&(i=n),this.height=i,n<1||i<1)throw new _("Both dimensions must be greater than 0");s==null&&(s=Math.floor((n+31)/32)),this.rowSize=s,a==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(n){const i=n.length,s=n[0].length,a=new pe(s,i);for(let l=0;l<i;l++){const u=n[l];for(let h=0;h<s;h++)u[h]&&a.set(h,l)}return a}static parseFromString(n,i,s){if(n===null)throw new _("stringRepresentation cannot be null");const a=new Array(n.length);let l=0,u=0,h=-1,g=0,p=0;for(;p<n.length;)if(n.charAt(p)===`
`||n.charAt(p)==="\r"){if(l>u){if(h===-1)h=l-u;else if(l-u!==h)throw new _("row lengths do not match");u=l,g++}p++}else if(n.substring(p,p+i.length)===i)p+=i.length,a[l]=!0,l++;else if(n.substring(p,p+s.length)===s)p+=s.length,a[l]=!1,l++;else throw new _("illegal character encountered: "+n.substring(p));if(l>u){if(h===-1)h=l-u;else if(l-u!==h)throw new _("row lengths do not match");g++}const y=new pe(h,g);for(let E=0;E<l;E++)a[E]&&y.set(Math.floor(E%h),Math.floor(E/h));return y}get(n,i){const s=i*this.rowSize+Math.floor(n/32);return(this.bits[s]>>>(n&31)&1)!==0}set(n,i){const s=i*this.rowSize+Math.floor(n/32);this.bits[s]|=1<<(n&31)&4294967295}unset(n,i){const s=i*this.rowSize+Math.floor(n/32);this.bits[s]&=~(1<<(n&31)&4294967295)}flip(n,i){const s=i*this.rowSize+Math.floor(n/32);this.bits[s]^=1<<(n&31)&4294967295}xor(n){if(this.width!==n.getWidth()||this.height!==n.getHeight()||this.rowSize!==n.getRowSize())throw new _("input matrix dimensions do not match");const i=new L(Math.floor(this.width/32)+1),s=this.rowSize,a=this.bits;for(let l=0,u=this.height;l<u;l++){const h=l*s,g=n.getRow(l,i).getBitArray();for(let p=0;p<s;p++)a[h+p]^=g[p]}}clear(){const n=this.bits,i=n.length;for(let s=0;s<i;s++)n[s]=0}setRegion(n,i,s,a){if(i<0||n<0)throw new _("Left and top must be nonnegative");if(a<1||s<1)throw new _("Height and width must be at least 1");const l=n+s,u=i+a;if(u>this.height||l>this.width)throw new _("The region must fit inside the matrix");const h=this.rowSize,g=this.bits;for(let p=i;p<u;p++){const y=p*h;for(let E=n;E<l;E++)g[y+Math.floor(E/32)]|=1<<(E&31)&4294967295}}getRow(n,i){i==null||i.getSize()<this.width?i=new L(this.width):i.clear();const s=this.rowSize,a=this.bits,l=n*s;for(let u=0;u<s;u++)i.setBulk(u*32,a[l+u]);return i}setRow(n,i){F.arraycopy(i.getBitArray(),0,this.bits,n*this.rowSize,this.rowSize)}rotate180(){const n=this.getWidth(),i=this.getHeight();let s=new L(n),a=new L(n);for(let l=0,u=Math.floor((i+1)/2);l<u;l++)s=this.getRow(l,s),a=this.getRow(i-1-l,a),s.reverse(),a.reverse(),this.setRow(l,a),this.setRow(i-1-l,s)}getEnclosingRectangle(){const n=this.width,i=this.height,s=this.rowSize,a=this.bits;let l=n,u=i,h=-1,g=-1;for(let p=0;p<i;p++)for(let y=0;y<s;y++){const E=a[p*s+y];if(E!==0){if(p<u&&(u=p),p>g&&(g=p),y*32<l){let A=0;for(;!(E<<31-A&4294967295);)A++;y*32+A<l&&(l=y*32+A)}if(y*32+31>h){let A=31;for(;!(E>>>A);)A--;y*32+A>h&&(h=y*32+A)}}}return h<l||g<u?null:Int32Array.from([l,u,h-l+1,g-u+1])}getTopLeftOnBit(){const n=this.rowSize,i=this.bits;let s=0;for(;s<i.length&&i[s]===0;)s++;if(s===i.length)return null;const a=s/n;let l=s%n*32;const u=i[s];let h=0;for(;!(u<<31-h&4294967295);)h++;return l+=h,Int32Array.from([l,a])}getBottomRightOnBit(){const n=this.rowSize,i=this.bits;let s=i.length-1;for(;s>=0&&i[s]===0;)s--;if(s<0)return null;const a=Math.floor(s/n);let l=Math.floor(s%n)*32;const u=i[s];let h=31;for(;!(u>>>h);)h--;return l+=h,Int32Array.from([l,a])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(n){if(!(n instanceof pe))return!1;const i=n;return this.width===i.width&&this.height===i.height&&this.rowSize===i.rowSize&&N.equals(this.bits,i.bits)}hashCode(){let n=this.width;return n=31*n+this.width,n=31*n+this.height,n=31*n+this.rowSize,n=31*n+N.hashCode(this.bits),n}toString(n="X ",i="  ",s=`
`){return this.buildToString(n,i,s)}buildToString(n,i,s){let a=new ee;for(let l=0,u=this.height;l<u;l++){for(let h=0,g=this.width;h<g;h++)a.append(this.get(h,l)?n:i);a.append(s)}return a.toString()}clone(){return new pe(this.width,this.height,this.rowSize,this.bits.slice())}}class W extends m{static getNotFoundInstance(){return new W}}W.kind="NotFoundException";class it extends M{constructor(n){super(n),this.luminances=it.EMPTY,this.buckets=new Int32Array(it.LUMINANCE_BUCKETS)}getBlackRow(n,i){const s=this.getLuminanceSource(),a=s.getWidth();i==null||i.getSize()<a?i=new L(a):i.clear(),this.initArrays(a);const l=s.getRow(n,this.luminances),u=this.buckets;for(let g=0;g<a;g++)u[(l[g]&255)>>it.LUMINANCE_SHIFT]++;const h=it.estimateBlackPoint(u);if(a<3)for(let g=0;g<a;g++)(l[g]&255)<h&&i.set(g);else{let g=l[0]&255,p=l[1]&255;for(let y=1;y<a-1;y++){const E=l[y+1]&255;(p*4-g-E)/2<h&&i.set(y),g=p,p=E}}return i}getBlackMatrix(){const n=this.getLuminanceSource(),i=n.getWidth(),s=n.getHeight(),a=new pe(i,s);this.initArrays(i);const l=this.buckets;for(let g=1;g<5;g++){const p=Math.floor(s*g/5),y=n.getRow(p,this.luminances),E=Math.floor(i*4/5);for(let A=Math.floor(i/5);A<E;A++){const T=y[A]&255;l[T>>it.LUMINANCE_SHIFT]++}}const u=it.estimateBlackPoint(l),h=n.getMatrix();for(let g=0;g<s;g++){const p=g*i;for(let y=0;y<i;y++)(h[p+y]&255)<u&&a.set(y,g)}return a}createBinarizer(n){return new it(n)}initArrays(n){this.luminances.length<n&&(this.luminances=new Uint8ClampedArray(n));const i=this.buckets;for(let s=0;s<it.LUMINANCE_BUCKETS;s++)i[s]=0}static estimateBlackPoint(n){const i=n.length;let s=0,a=0,l=0;for(let y=0;y<i;y++)n[y]>l&&(a=y,l=n[y]),n[y]>s&&(s=n[y]);let u=0,h=0;for(let y=0;y<i;y++){const E=y-a,A=n[y]*E*E;A>h&&(u=y,h=A)}if(a>u){const y=a;a=u,u=y}if(u-a<=i/16)throw new W;let g=u-1,p=-1;for(let y=u-1;y>a;y--){const E=y-a,A=E*E*(u-y)*(s-n[y]);A>p&&(g=y,p=A)}return g<<it.LUMINANCE_SHIFT}}it.LUMINANCE_BITS=5,it.LUMINANCE_SHIFT=8-it.LUMINANCE_BITS,it.LUMINANCE_BUCKETS=1<<it.LUMINANCE_BITS,it.EMPTY=Uint8ClampedArray.from([0]);class we extends it{constructor(n){super(n),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const n=this.getLuminanceSource(),i=n.getWidth(),s=n.getHeight();if(i>=we.MINIMUM_DIMENSION&&s>=we.MINIMUM_DIMENSION){const a=n.getMatrix();let l=i>>we.BLOCK_SIZE_POWER;i&we.BLOCK_SIZE_MASK&&l++;let u=s>>we.BLOCK_SIZE_POWER;s&we.BLOCK_SIZE_MASK&&u++;const h=we.calculateBlackPoints(a,l,u,i,s),g=new pe(i,s);we.calculateThresholdForBlock(a,l,u,i,s,h,g),this.matrix=g}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(n){return new we(n)}static calculateThresholdForBlock(n,i,s,a,l,u,h){const g=l-we.BLOCK_SIZE,p=a-we.BLOCK_SIZE;for(let y=0;y<s;y++){let E=y<<we.BLOCK_SIZE_POWER;E>g&&(E=g);const A=we.cap(y,2,s-3);for(let T=0;T<i;T++){let R=T<<we.BLOCK_SIZE_POWER;R>p&&(R=p);const D=we.cap(T,2,i-3);let B=0;for(let Z=-2;Z<=2;Z++){const Q=u[A+Z];B+=Q[D-2]+Q[D-1]+Q[D]+Q[D+1]+Q[D+2]}const z=B/25;we.thresholdBlock(n,R,E,z,a,h)}}}static cap(n,i,s){return n<i?i:n>s?s:n}static thresholdBlock(n,i,s,a,l,u){for(let h=0,g=s*l+i;h<we.BLOCK_SIZE;h++,g+=l)for(let p=0;p<we.BLOCK_SIZE;p++)(n[g+p]&255)<=a&&u.set(i+p,s+h)}static calculateBlackPoints(n,i,s,a,l){const u=l-we.BLOCK_SIZE,h=a-we.BLOCK_SIZE,g=new Array(s);for(let p=0;p<s;p++){g[p]=new Int32Array(i);let y=p<<we.BLOCK_SIZE_POWER;y>u&&(y=u);for(let E=0;E<i;E++){let A=E<<we.BLOCK_SIZE_POWER;A>h&&(A=h);let T=0,R=255,D=0;for(let z=0,Z=y*a+A;z<we.BLOCK_SIZE;z++,Z+=a){for(let Q=0;Q<we.BLOCK_SIZE;Q++){const Y=n[Z+Q]&255;T+=Y,Y<R&&(R=Y),Y>D&&(D=Y)}if(D-R>we.MIN_DYNAMIC_RANGE)for(z++,Z+=a;z<we.BLOCK_SIZE;z++,Z+=a)for(let Q=0;Q<we.BLOCK_SIZE;Q++)T+=n[Z+Q]&255}let B=T>>we.BLOCK_SIZE_POWER*2;if(D-R<=we.MIN_DYNAMIC_RANGE&&(B=R/2,p>0&&E>0)){const z=(g[p-1][E]+2*g[p][E-1]+g[p-1][E-1])/4;R<z&&(B=z)}g[p][E]=B}}return g}}we.BLOCK_SIZE_POWER=3,we.BLOCK_SIZE=1<<we.BLOCK_SIZE_POWER,we.BLOCK_SIZE_MASK=we.BLOCK_SIZE-1,we.MINIMUM_DIMENSION=we.BLOCK_SIZE*5,we.MIN_DYNAMIC_RANGE=24;class ne{constructor(n,i){this.width=n,this.height=i}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(n,i,s,a){throw new me("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new me("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new me("This luminance source does not support rotation by 45 degrees.")}toString(){const n=new Uint8ClampedArray(this.width);let i=new ee;for(let s=0;s<this.height;s++){const a=this.getRow(s,n);for(let l=0;l<this.width;l++){const u=a[l]&255;let h;u<64?h="#":u<128?h="+":u<192?h=".":h=" ",i.append(h)}i.append(`
`)}return i.toString()}}class fe extends ne{constructor(n){super(n.getWidth(),n.getHeight()),this.delegate=n}getRow(n,i){const s=this.delegate.getRow(n,i),a=this.getWidth();for(let l=0;l<a;l++)s[l]=255-(s[l]&255);return s}getMatrix(){const n=this.delegate.getMatrix(),i=this.getWidth()*this.getHeight(),s=new Uint8ClampedArray(i);for(let a=0;a<i;a++)s[a]=255-(n[a]&255);return s}isCropSupported(){return this.delegate.isCropSupported()}crop(n,i,s,a){return new fe(this.delegate.crop(n,i,s,a))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new fe(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new fe(this.delegate.rotateCounterClockwise45())}}class xe extends ne{constructor(n){super(n.width,n.height),this.canvas=n,this.tempCanvasElement=null,this.buffer=xe.makeBufferFromCanvasImageData(n)}static makeBufferFromCanvasImageData(n){const i=n.getContext("2d").getImageData(0,0,n.width,n.height);return xe.toGrayscaleBuffer(i.data,n.width,n.height)}static toGrayscaleBuffer(n,i,s){const a=new Uint8ClampedArray(i*s);for(let l=0,u=0,h=n.length;l<h;l+=4,u++){let g;if(n[l+3]===0)g=255;else{const y=n[l],E=n[l+1],A=n[l+2];g=306*y+601*E+117*A+512>>10}a[u]=g}return a}getRow(n,i){if(n<0||n>=this.getHeight())throw new _("Requested row is outside the image: "+n);const s=this.getWidth(),a=n*s;return i===null?i=this.buffer.slice(a,a+s):(i.length<s&&(i=new Uint8ClampedArray(s)),i.set(this.buffer.slice(a,a+s))),i}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(n,i,s,a){return super.crop(n,i,s,a),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const n=this.canvas.ownerDocument.createElement("canvas");n.width=this.canvas.width,n.height=this.canvas.height,this.tempCanvasElement=n}return this.tempCanvasElement}rotate(n){const i=this.getTempCanvasElement(),s=i.getContext("2d"),a=n*xe.DEGREE_TO_RADIANS,l=this.canvas.width,u=this.canvas.height,h=Math.ceil(Math.abs(Math.cos(a))*l+Math.abs(Math.sin(a))*u),g=Math.ceil(Math.abs(Math.sin(a))*l+Math.abs(Math.cos(a))*u);return i.width=h,i.height=g,s.translate(h/2,g/2),s.rotate(a),s.drawImage(this.canvas,l/-2,u/-2),this.buffer=xe.makeBufferFromCanvasImageData(i),this}invert(){return new fe(this)}}xe.DEGREE_TO_RADIANS=Math.PI/180;class Ke{constructor(n,i,s){this.deviceId=n,this.label=i,this.kind="videoinput",this.groupId=s||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Ie=(globalThis||kt||self||window||void 0)&&(globalThis||kt||self||window||void 0).__awaiter||function(v,n,i,s){function a(l){return l instanceof i?l:new i(function(u){u(l)})}return new(i||(i=Promise))(function(l,u){function h(y){try{p(s.next(y))}catch(E){u(E)}}function g(y){try{p(s.throw(y))}catch(E){u(E)}}function p(y){y.done?l(y.value):a(y.value).then(h,g)}p((s=s.apply(v,n||[])).next())})};class pn{constructor(n,i=500,s){this.reader=n,this.timeBetweenScansMillis=i,this._hints=s,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(n){this._timeBetweenDecodingAttempts=n<0?0:n}set hints(n){this._hints=n||null}get hints(){return this._hints}listVideoInputDevices(){return Ie(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const n=yield navigator.mediaDevices.enumerateDevices(),i=[];for(const s of n){const a=s.kind==="video"?"videoinput":s.kind;if(a!=="videoinput")continue;const l=s.deviceId||s.id,u=s.label||`Video device ${i.length+1}`,h=s.groupId,g={deviceId:l,label:u,kind:a,groupId:h};i.push(g)}return i})}getVideoInputDevices(){return Ie(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(i=>new Ke(i.deviceId,i.label))})}findDeviceById(n){return Ie(this,void 0,void 0,function*(){const i=yield this.listVideoInputDevices();return i?i.find(s=>s.deviceId===n):null})}decodeFromInputVideoDevice(n,i){return Ie(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(n,i)})}decodeOnceFromVideoDevice(n,i){return Ie(this,void 0,void 0,function*(){this.reset();let s;n?s={deviceId:{exact:n}}:s={facingMode:"environment"};const a={video:s};return yield this.decodeOnceFromConstraints(a,i)})}decodeOnceFromConstraints(n,i){return Ie(this,void 0,void 0,function*(){const s=yield navigator.mediaDevices.getUserMedia(n);return yield this.decodeOnceFromStream(s,i)})}decodeOnceFromStream(n,i){return Ie(this,void 0,void 0,function*(){this.reset();const s=yield this.attachStreamToVideo(n,i);return yield this.decodeOnce(s)})}decodeFromInputVideoDeviceContinuously(n,i,s){return Ie(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(n,i,s)})}decodeFromVideoDevice(n,i,s){return Ie(this,void 0,void 0,function*(){let a;n?a={deviceId:{exact:n}}:a={facingMode:"environment"};const l={video:a};return yield this.decodeFromConstraints(l,i,s)})}decodeFromConstraints(n,i,s){return Ie(this,void 0,void 0,function*(){const a=yield navigator.mediaDevices.getUserMedia(n);return yield this.decodeFromStream(a,i,s)})}decodeFromStream(n,i,s){return Ie(this,void 0,void 0,function*(){this.reset();const a=yield this.attachStreamToVideo(n,i);return yield this.decodeContinuously(a,s)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(n,i){return Ie(this,void 0,void 0,function*(){const s=this.prepareVideoElement(i);return this.addVideoSource(s,n),this.videoElement=s,this.stream=n,yield this.playVideoOnLoadAsync(s),s})}playVideoOnLoadAsync(n){return new Promise((i,s)=>this.playVideoOnLoad(n,()=>i()))}playVideoOnLoad(n,i){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(n),n.addEventListener("ended",this.videoEndedListener),n.addEventListener("canplay",this.videoCanPlayListener),n.addEventListener("playing",i),this.tryPlayVideo(n)}isVideoPlaying(n){return n.currentTime>0&&!n.paused&&!n.ended&&n.readyState>2}tryPlayVideo(n){return Ie(this,void 0,void 0,function*(){if(this.isVideoPlaying(n)){console.warn("Trying to play video that is already playing.");return}try{yield n.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(n,i){const s=document.getElementById(n);if(!s)throw new C(`element with id '${n}' not found`);if(s.nodeName.toLowerCase()!==i.toLowerCase())throw new C(`element with id '${n}' must be an ${i} element`);return s}decodeFromImage(n,i){if(!n&&!i)throw new C("either imageElement with a src set or an url must be provided");return i&&!n?this.decodeFromImageUrl(i):this.decodeFromImageElement(n)}decodeFromVideo(n,i){if(!n&&!i)throw new C("Either an element with a src set or an URL must be provided");return i&&!n?this.decodeFromVideoUrl(i):this.decodeFromVideoElement(n)}decodeFromVideoContinuously(n,i,s){if(n===void 0&&i===void 0)throw new C("Either an element with a src set or an URL must be provided");return i&&!n?this.decodeFromVideoUrlContinuously(i,s):this.decodeFromVideoElementContinuously(n,s)}decodeFromImageElement(n){if(!n)throw new C("An image element must be provided.");this.reset();const i=this.prepareImageElement(n);this.imageElement=i;let s;return this.isImageLoaded(i)?s=this.decodeOnce(i,!1,!0):s=this._decodeOnLoadImage(i),s}decodeFromVideoElement(n){const i=this._decodeFromVideoElementSetup(n);return this._decodeOnLoadVideo(i)}decodeFromVideoElementContinuously(n,i){const s=this._decodeFromVideoElementSetup(n);return this._decodeOnLoadVideoContinuously(s,i)}_decodeFromVideoElementSetup(n){if(!n)throw new C("A video element must be provided.");this.reset();const i=this.prepareVideoElement(n);return this.videoElement=i,i}decodeFromImageUrl(n){if(!n)throw new C("An URL must be provided.");this.reset();const i=this.prepareImageElement();this.imageElement=i;const s=this._decodeOnLoadImage(i);return i.src=n,s}decodeFromVideoUrl(n){if(!n)throw new C("An URL must be provided.");this.reset();const i=this.prepareVideoElement(),s=this.decodeFromVideoElement(i);return i.src=n,s}decodeFromVideoUrlContinuously(n,i){if(!n)throw new C("An URL must be provided.");this.reset();const s=this.prepareVideoElement(),a=this.decodeFromVideoElementContinuously(s,i);return s.src=n,a}_decodeOnLoadImage(n){return new Promise((i,s)=>{this.imageLoadedListener=()=>this.decodeOnce(n,!1,!0).then(i,s),n.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(n){return Ie(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(n),yield this.decodeOnce(n)})}_decodeOnLoadVideoContinuously(n,i){return Ie(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(n),this.decodeContinuously(n,i)})}isImageLoaded(n){return!(!n.complete||n.naturalWidth===0)}prepareImageElement(n){let i;return typeof n>"u"&&(i=document.createElement("img"),i.width=200,i.height=200),typeof n=="string"&&(i=this.getMediaElement(n,"img")),n instanceof HTMLImageElement&&(i=n),i}prepareVideoElement(n){let i;return!n&&typeof document<"u"&&(i=document.createElement("video"),i.width=200,i.height=200),typeof n=="string"&&(i=this.getMediaElement(n,"video")),n instanceof HTMLVideoElement&&(i=n),i.setAttribute("autoplay","true"),i.setAttribute("muted","true"),i.setAttribute("playsinline","true"),i}decodeOnce(n,i=!0,s=!0){this._stopAsyncDecode=!1;const a=(l,u)=>{if(this._stopAsyncDecode){u(new W("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const h=this.decode(n);l(h)}catch(h){const g=i&&h instanceof W,y=(h instanceof P||h instanceof U)&&s;if(g||y)return setTimeout(a,this._timeBetweenDecodingAttempts,l,u);u(h)}};return new Promise((l,u)=>a(l,u))}decodeContinuously(n,i){this._stopContinuousDecode=!1;const s=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const a=this.decode(n);i(a,null),setTimeout(s,this.timeBetweenScansMillis)}catch(a){i(null,a);const l=a instanceof P||a instanceof U,u=a instanceof W;(l||u)&&setTimeout(s,this._timeBetweenDecodingAttempts)}};s()}decode(n){const i=this.createBinaryBitmap(n);return this.decodeBitmap(i)}_isHTMLVideoElement(n){return n.videoWidth!==0}drawFrameOnCanvas(n,i,s){i||(i={sx:0,sy:0,sWidth:n.videoWidth,sHeight:n.videoHeight,dx:0,dy:0,dWidth:n.videoWidth,dHeight:n.videoHeight}),s||(s=this.captureCanvasContext),s.drawImage(n,i.sx,i.sy,i.sWidth,i.sHeight,i.dx,i.dy,i.dWidth,i.dHeight)}drawImageOnCanvas(n,i,s=this.captureCanvasContext){i||(i={sx:0,sy:0,sWidth:n.naturalWidth,sHeight:n.naturalHeight,dx:0,dy:0,dWidth:n.naturalWidth,dHeight:n.naturalHeight}),s||(s=this.captureCanvasContext),s.drawImage(n,i.sx,i.sy,i.sWidth,i.sHeight,i.dx,i.dy,i.dWidth,i.dHeight)}createBinaryBitmap(n){this.getCaptureCanvasContext(n),this._isHTMLVideoElement(n)?this.drawFrameOnCanvas(n):this.drawImageOnCanvas(n);const i=this.getCaptureCanvas(n),s=new xe(i),a=new we(s);return new O(a)}getCaptureCanvasContext(n){if(!this.captureCanvasContext){const s=this.getCaptureCanvas(n).getContext("2d");this.captureCanvasContext=s}return this.captureCanvasContext}getCaptureCanvas(n){if(!this.captureCanvas){const i=this.createCaptureCanvas(n);this.captureCanvas=i}return this.captureCanvas}decodeBitmap(n){return this.reader.decode(n,this._hints)}createCaptureCanvas(n){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const i=document.createElement("canvas");let s,a;return typeof n<"u"&&(n instanceof HTMLVideoElement?(s=n.videoWidth,a=n.videoHeight):n instanceof HTMLImageElement&&(s=n.naturalWidth||n.width,a=n.naturalHeight||n.height)),i.style.width=s+"px",i.style.height=a+"px",i.width=s,i.height=a,i}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(n=>n.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(n,i){try{n.srcObject=i}catch{n.src=URL.createObjectURL(i)}}cleanVideoSource(n){try{n.srcObject=null}catch{n.src=""}this.videoElement.removeAttribute("src")}}class Je{constructor(n,i,s=i==null?0:8*i.length,a,l,u=F.currentTimeMillis()){this.text=n,this.rawBytes=i,this.numBits=s,this.resultPoints=a,this.format=l,this.timestamp=u,this.text=n,this.rawBytes=i,s==null?this.numBits=i==null?0:8*i.length:this.numBits=s,this.resultPoints=a,this.format=l,this.resultMetadata=null,u==null?this.timestamp=F.currentTimeMillis():this.timestamp=u}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(n,i){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(n,i)}putAllMetadata(n){n!==null&&(this.resultMetadata===null?this.resultMetadata=n:this.resultMetadata=new Map(n))}addResultPoints(n){const i=this.resultPoints;if(i===null)this.resultPoints=n;else if(n!==null&&n.length>0){const s=new Array(i.length+n.length);F.arraycopy(i,0,s,0,i.length),F.arraycopy(n,0,s,i.length,n.length),this.resultPoints=s}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Hr;(function(v){v[v.AZTEC=0]="AZTEC",v[v.CODABAR=1]="CODABAR",v[v.CODE_39=2]="CODE_39",v[v.CODE_93=3]="CODE_93",v[v.CODE_128=4]="CODE_128",v[v.DATA_MATRIX=5]="DATA_MATRIX",v[v.EAN_8=6]="EAN_8",v[v.EAN_13=7]="EAN_13",v[v.ITF=8]="ITF",v[v.MAXICODE=9]="MAXICODE",v[v.PDF_417=10]="PDF_417",v[v.QR_CODE=11]="QR_CODE",v[v.RSS_14=12]="RSS_14",v[v.RSS_EXPANDED=13]="RSS_EXPANDED",v[v.UPC_A=14]="UPC_A",v[v.UPC_E=15]="UPC_E",v[v.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Hr||(Hr={}));var ae=Hr,dr;(function(v){v[v.OTHER=0]="OTHER",v[v.ORIENTATION=1]="ORIENTATION",v[v.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",v[v.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",v[v.ISSUE_NUMBER=4]="ISSUE_NUMBER",v[v.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",v[v.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",v[v.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",v[v.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",v[v.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",v[v.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(dr||(dr={}));var Ct=dr;class hs{constructor(n,i,s,a,l=-1,u=-1){this.rawBytes=n,this.text=i,this.byteSegments=s,this.ecLevel=a,this.structuredAppendSequenceNumber=l,this.structuredAppendParity=u,this.numBits=n==null?0:8*n.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(n){this.numBits=n}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(n){this.errorsCorrected=n}getErasures(){return this.erasures}setErasures(n){this.erasures=n}getOther(){return this.other}setOther(n){this.other=n}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class fs{exp(n){return this.expTable[n]}log(n){if(n===0)throw new _;return this.logTable[n]}static addOrSubtract(n,i){return n^i}}class Yt{constructor(n,i){if(i.length===0)throw new _;this.field=n;const s=i.length;if(s>1&&i[0]===0){let a=1;for(;a<s&&i[a]===0;)a++;a===s?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(s-a),F.arraycopy(i,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=i}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(n){return this.coefficients[this.coefficients.length-1-n]}evaluateAt(n){if(n===0)return this.getCoefficient(0);const i=this.coefficients;let s;if(n===1){s=0;for(let u=0,h=i.length;u!==h;u++){const g=i[u];s=fs.addOrSubtract(s,g)}return s}s=i[0];const a=i.length,l=this.field;for(let u=1;u<a;u++)s=fs.addOrSubtract(l.multiply(n,s),i[u]);return s}addOrSubtract(n){if(!this.field.equals(n.field))throw new _("GenericGFPolys do not have same GenericGF field");if(this.isZero())return n;if(n.isZero())return this;let i=this.coefficients,s=n.coefficients;if(i.length>s.length){const u=i;i=s,s=u}let a=new Int32Array(s.length);const l=s.length-i.length;F.arraycopy(s,0,a,0,l);for(let u=l;u<s.length;u++)a[u]=fs.addOrSubtract(i[u-l],s[u]);return new Yt(this.field,a)}multiply(n){if(!this.field.equals(n.field))throw new _("GenericGFPolys do not have same GenericGF field");if(this.isZero()||n.isZero())return this.field.getZero();const i=this.coefficients,s=i.length,a=n.coefficients,l=a.length,u=new Int32Array(s+l-1),h=this.field;for(let g=0;g<s;g++){const p=i[g];for(let y=0;y<l;y++)u[g+y]=fs.addOrSubtract(u[g+y],h.multiply(p,a[y]))}return new Yt(h,u)}multiplyScalar(n){if(n===0)return this.field.getZero();if(n===1)return this;const i=this.coefficients.length,s=this.field,a=new Int32Array(i),l=this.coefficients;for(let u=0;u<i;u++)a[u]=s.multiply(l[u],n);return new Yt(s,a)}multiplyByMonomial(n,i){if(n<0)throw new _;if(i===0)return this.field.getZero();const s=this.coefficients,a=s.length,l=new Int32Array(a+n),u=this.field;for(let h=0;h<a;h++)l[h]=u.multiply(s[h],i);return new Yt(u,l)}divide(n){if(!this.field.equals(n.field))throw new _("GenericGFPolys do not have same GenericGF field");if(n.isZero())throw new _("Divide by 0");const i=this.field;let s=i.getZero(),a=this;const l=n.getCoefficient(n.getDegree()),u=i.inverse(l);for(;a.getDegree()>=n.getDegree()&&!a.isZero();){const h=a.getDegree()-n.getDegree(),g=i.multiply(a.getCoefficient(a.getDegree()),u),p=n.multiplyByMonomial(h,g),y=i.buildMonomial(h,g);s=s.addOrSubtract(y),a=a.addOrSubtract(p)}return[s,a]}toString(){let n="";for(let i=this.getDegree();i>=0;i--){let s=this.getCoefficient(i);if(s!==0){if(s<0?(n+=" - ",s=-s):n.length>0&&(n+=" + "),i===0||s!==1){const a=this.field.log(s);a===0?n+="1":a===1?n+="a":(n+="a^",n+=a)}i!==0&&(i===1?n+="x":(n+="x^",n+=i))}}return n}}class Ao extends m{}Ao.kind="ArithmeticException";class Re extends fs{constructor(n,i,s){super(),this.primitive=n,this.size=i,this.generatorBase=s;const a=new Int32Array(i);let l=1;for(let h=0;h<i;h++)a[h]=l,l*=2,l>=i&&(l^=n,l&=i-1);this.expTable=a;const u=new Int32Array(i);for(let h=0;h<i-1;h++)u[a[h]]=h;this.logTable=u,this.zero=new Yt(this,Int32Array.from([0])),this.one=new Yt(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(n,i){if(n<0)throw new _;if(i===0)return this.zero;const s=new Int32Array(n+1);return s[0]=i,new Yt(this,s)}inverse(n){if(n===0)throw new Ao;return this.expTable[this.size-this.logTable[n]-1]}multiply(n,i){return n===0||i===0?0:this.expTable[(this.logTable[n]+this.logTable[i])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+b.toHexString(this.primitive)+","+this.size+")"}equals(n){return n===this}}Re.AZTEC_DATA_12=new Re(4201,4096,1),Re.AZTEC_DATA_10=new Re(1033,1024,1),Re.AZTEC_DATA_6=new Re(67,64,1),Re.AZTEC_PARAM=new Re(19,16,1),Re.QR_CODE_FIELD_256=new Re(285,256,0),Re.DATA_MATRIX_FIELD_256=new Re(301,256,1),Re.AZTEC_DATA_8=Re.DATA_MATRIX_FIELD_256,Re.MAXICODE_FIELD_64=Re.AZTEC_DATA_6;class xi extends m{}xi.kind="ReedSolomonException";class Fn extends m{}Fn.kind="IllegalStateException";class gs{constructor(n){this.field=n}decode(n,i){const s=this.field,a=new Yt(s,n),l=new Int32Array(i);let u=!0;for(let T=0;T<i;T++){const R=a.evaluateAt(s.exp(T+s.getGeneratorBase()));l[l.length-1-T]=R,R!==0&&(u=!1)}if(u)return;const h=new Yt(s,l),g=this.runEuclideanAlgorithm(s.buildMonomial(i,1),h,i),p=g[0],y=g[1],E=this.findErrorLocations(p),A=this.findErrorMagnitudes(y,E);for(let T=0;T<E.length;T++){const R=n.length-1-s.log(E[T]);if(R<0)throw new xi("Bad error location");n[R]=Re.addOrSubtract(n[R],A[T])}}runEuclideanAlgorithm(n,i,s){if(n.getDegree()<i.getDegree()){const T=n;n=i,i=T}const a=this.field;let l=n,u=i,h=a.getZero(),g=a.getOne();for(;u.getDegree()>=(s/2|0);){let T=l,R=h;if(l=u,h=g,l.isZero())throw new xi("r_{i-1} was zero");u=T;let D=a.getZero();const B=l.getCoefficient(l.getDegree()),z=a.inverse(B);for(;u.getDegree()>=l.getDegree()&&!u.isZero();){const Z=u.getDegree()-l.getDegree(),Q=a.multiply(u.getCoefficient(u.getDegree()),z);D=D.addOrSubtract(a.buildMonomial(Z,Q)),u=u.addOrSubtract(l.multiplyByMonomial(Z,Q))}if(g=D.multiply(h).addOrSubtract(R),u.getDegree()>=l.getDegree())throw new Fn("Division algorithm failed to reduce polynomial?")}const p=g.getCoefficient(0);if(p===0)throw new xi("sigmaTilde(0) was zero");const y=a.inverse(p),E=g.multiplyScalar(y),A=u.multiplyScalar(y);return[E,A]}findErrorLocations(n){const i=n.getDegree();if(i===1)return Int32Array.from([n.getCoefficient(1)]);const s=new Int32Array(i);let a=0;const l=this.field;for(let u=1;u<l.getSize()&&a<i;u++)n.evaluateAt(u)===0&&(s[a]=l.inverse(u),a++);if(a!==i)throw new xi("Error locator degree does not match number of roots");return s}findErrorMagnitudes(n,i){const s=i.length,a=new Int32Array(s),l=this.field;for(let u=0;u<s;u++){const h=l.inverse(i[u]);let g=1;for(let p=0;p<s;p++)if(u!==p){const y=l.multiply(i[p],h),E=y&1?y&-2:y|1;g=l.multiply(g,E)}a[u]=l.multiply(n.evaluateAt(h),l.inverse(g)),l.getGeneratorBase()!==0&&(a[u]=l.multiply(a[u],h))}return a}}var It;(function(v){v[v.UPPER=0]="UPPER",v[v.LOWER=1]="LOWER",v[v.MIXED=2]="MIXED",v[v.DIGIT=3]="DIGIT",v[v.PUNCT=4]="PUNCT",v[v.BINARY=5]="BINARY"})(It||(It={}));class Ve{decode(n){this.ddata=n;let i=n.getBits(),s=this.extractBits(i),a=this.correctBits(s),l=Ve.convertBoolArrayToByteArray(a),u=Ve.getEncodedData(a),h=new hs(l,u,null,null);return h.setNumBits(a.length),h}static highLevelDecode(n){return this.getEncodedData(n)}static getEncodedData(n){let i=n.length,s=It.UPPER,a=It.UPPER,l="",u=0;for(;u<i;)if(a===It.BINARY){if(i-u<5)break;let h=Ve.readCode(n,u,5);if(u+=5,h===0){if(i-u<11)break;h=Ve.readCode(n,u,11)+31,u+=11}for(let g=0;g<h;g++){if(i-u<8){u=i;break}const p=Ve.readCode(n,u,8);l+=ce.castAsNonUtf8Char(p),u+=8}a=s}else{let h=a===It.DIGIT?4:5;if(i-u<h)break;let g=Ve.readCode(n,u,h);u+=h;let p=Ve.getCharacter(a,g);p.startsWith("CTRL_")?(s=a,a=Ve.getTable(p.charAt(5)),p.charAt(6)==="L"&&(s=a)):(l+=p,a=s)}return l}static getTable(n){switch(n){case"L":return It.LOWER;case"P":return It.PUNCT;case"M":return It.MIXED;case"D":return It.DIGIT;case"B":return It.BINARY;case"U":default:return It.UPPER}}static getCharacter(n,i){switch(n){case It.UPPER:return Ve.UPPER_TABLE[i];case It.LOWER:return Ve.LOWER_TABLE[i];case It.MIXED:return Ve.MIXED_TABLE[i];case It.PUNCT:return Ve.PUNCT_TABLE[i];case It.DIGIT:return Ve.DIGIT_TABLE[i];default:throw new Fn("Bad table")}}correctBits(n){let i,s;this.ddata.getNbLayers()<=2?(s=6,i=Re.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(s=8,i=Re.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(s=10,i=Re.AZTEC_DATA_10):(s=12,i=Re.AZTEC_DATA_12);let a=this.ddata.getNbDatablocks(),l=n.length/s;if(l<a)throw new U;let u=n.length%s,h=new Int32Array(l);for(let A=0;A<l;A++,u+=s)h[A]=Ve.readCode(n,u,s);try{new gs(i).decode(h,l-a)}catch(A){throw new U(A)}let g=(1<<s)-1,p=0;for(let A=0;A<a;A++){let T=h[A];if(T===0||T===g)throw new U;(T===1||T===g-1)&&p++}let y=new Array(a*s-p),E=0;for(let A=0;A<a;A++){let T=h[A];if(T===1||T===g-1)y.fill(T>1,E,E+s-1),E+=s-1;else for(let R=s-1;R>=0;--R)y[E++]=(T&1<<R)!==0}return y}extractBits(n){let i=this.ddata.isCompact(),s=this.ddata.getNbLayers(),a=(i?11:14)+s*4,l=new Int32Array(a),u=new Array(this.totalBitsInLayer(s,i));if(i)for(let h=0;h<l.length;h++)l[h]=h;else{let h=a+1+2*b.truncDivision(b.truncDivision(a,2)-1,15),g=a/2,p=b.truncDivision(h,2);for(let y=0;y<g;y++){let E=y+b.truncDivision(y,15);l[g-y-1]=p-E-1,l[g+y]=p+E+1}}for(let h=0,g=0;h<s;h++){let p=(s-h)*4+(i?9:12),y=h*2,E=a-1-y;for(let A=0;A<p;A++){let T=A*2;for(let R=0;R<2;R++)u[g+T+R]=n.get(l[y+R],l[y+A]),u[g+2*p+T+R]=n.get(l[y+A],l[E-R]),u[g+4*p+T+R]=n.get(l[E-R],l[E-A]),u[g+6*p+T+R]=n.get(l[E-A],l[y+R])}g+=p*8}return u}static readCode(n,i,s){let a=0;for(let l=i;l<i+s;l++)a<<=1,n[l]&&(a|=1);return a}static readByte(n,i){let s=n.length-i;return s>=8?Ve.readCode(n,i,8):Ve.readCode(n,i,s)<<8-s}static convertBoolArrayToByteArray(n){let i=new Uint8Array((n.length+7)/8);for(let s=0;s<i.length;s++)i[s]=Ve.readByte(n,8*s);return i}totalBitsInLayer(n,i){return((i?88:112)+16*n)*n}}Ve.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Ve.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Ve.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Ve.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Ve.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Te{constructor(){}static round(n){return n===NaN?0:n<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:n>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:n+(n<0?-.5:.5)|0}static distance(n,i,s,a){const l=n-s,u=i-a;return Math.sqrt(l*l+u*u)}static sum(n){let i=0;for(let s=0,a=n.length;s!==a;s++){const l=n[s];i+=l}return i}}class So{static floatToIntBits(n){return n}}So.MAX_VALUE=Number.MAX_SAFE_INTEGER;class oe{constructor(n,i){this.x=n,this.y=i}getX(){return this.x}getY(){return this.y}equals(n){if(n instanceof oe){const i=n;return this.x===i.x&&this.y===i.y}return!1}hashCode(){return 31*So.floatToIntBits(this.x)+So.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(n){const i=this.distance(n[0],n[1]),s=this.distance(n[1],n[2]),a=this.distance(n[0],n[2]);let l,u,h;if(s>=i&&s>=a?(u=n[0],l=n[1],h=n[2]):a>=s&&a>=i?(u=n[1],l=n[0],h=n[2]):(u=n[2],l=n[0],h=n[1]),this.crossProductZ(l,u,h)<0){const g=l;l=h,h=g}n[0]=l,n[1]=u,n[2]=h}static distance(n,i){return Te.distance(n.x,n.y,i.x,i.y)}static crossProductZ(n,i,s){const a=i.x,l=i.y;return(s.x-a)*(n.y-l)-(s.y-l)*(n.x-a)}}class bo{constructor(n,i){this.bits=n,this.points=i}getBits(){return this.bits}getPoints(){return this.points}}class Cd extends bo{constructor(n,i,s,a,l){super(n,i),this.compact=s,this.nbDatablocks=a,this.nbLayers=l}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Zn{constructor(n,i,s,a){this.image=n,this.height=n.getHeight(),this.width=n.getWidth(),i==null&&(i=Zn.INIT_SIZE),s==null&&(s=n.getWidth()/2|0),a==null&&(a=n.getHeight()/2|0);const l=i/2|0;if(this.leftInit=s-l,this.rightInit=s+l,this.upInit=a-l,this.downInit=a+l,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new W}detect(){let n=this.leftInit,i=this.rightInit,s=this.upInit,a=this.downInit,l=!1,u=!0,h=!1,g=!1,p=!1,y=!1,E=!1;const A=this.width,T=this.height;for(;u;){u=!1;let R=!0;for(;(R||!g)&&i<A;)R=this.containsBlackPoint(s,a,i,!1),R?(i++,u=!0,g=!0):g||i++;if(i>=A){l=!0;break}let D=!0;for(;(D||!p)&&a<T;)D=this.containsBlackPoint(n,i,a,!0),D?(a++,u=!0,p=!0):p||a++;if(a>=T){l=!0;break}let B=!0;for(;(B||!y)&&n>=0;)B=this.containsBlackPoint(s,a,n,!1),B?(n--,u=!0,y=!0):y||n--;if(n<0){l=!0;break}let z=!0;for(;(z||!E)&&s>=0;)z=this.containsBlackPoint(n,i,s,!0),z?(s--,u=!0,E=!0):E||s--;if(s<0){l=!0;break}u&&(h=!0)}if(!l&&h){const R=i-n;let D=null;for(let Q=1;D===null&&Q<R;Q++)D=this.getBlackPointOnSegment(n,a-Q,n+Q,a);if(D==null)throw new W;let B=null;for(let Q=1;B===null&&Q<R;Q++)B=this.getBlackPointOnSegment(n,s+Q,n+Q,s);if(B==null)throw new W;let z=null;for(let Q=1;z===null&&Q<R;Q++)z=this.getBlackPointOnSegment(i,s+Q,i-Q,s);if(z==null)throw new W;let Z=null;for(let Q=1;Z===null&&Q<R;Q++)Z=this.getBlackPointOnSegment(i,a-Q,i-Q,a);if(Z==null)throw new W;return this.centerEdges(Z,D,z,B)}else throw new W}getBlackPointOnSegment(n,i,s,a){const l=Te.round(Te.distance(n,i,s,a)),u=(s-n)/l,h=(a-i)/l,g=this.image;for(let p=0;p<l;p++){const y=Te.round(n+p*u),E=Te.round(i+p*h);if(g.get(y,E))return new oe(y,E)}return null}centerEdges(n,i,s,a){const l=n.getX(),u=n.getY(),h=i.getX(),g=i.getY(),p=s.getX(),y=s.getY(),E=a.getX(),A=a.getY(),T=Zn.CORR;return l<this.width/2?[new oe(E-T,A+T),new oe(h+T,g+T),new oe(p-T,y-T),new oe(l+T,u-T)]:[new oe(E+T,A+T),new oe(h+T,g-T),new oe(p-T,y+T),new oe(l-T,u-T)]}containsBlackPoint(n,i,s,a){const l=this.image;if(a){for(let u=n;u<=i;u++)if(l.get(u,s))return!0}else for(let u=n;u<=i;u++)if(l.get(s,u))return!0;return!1}}Zn.INIT_SIZE=10,Zn.CORR=1;class pl{static checkAndNudgePoints(n,i){const s=n.getWidth(),a=n.getHeight();let l=!0;for(let u=0;u<i.length&&l;u+=2){const h=Math.floor(i[u]),g=Math.floor(i[u+1]);if(h<-1||h>s||g<-1||g>a)throw new W;l=!1,h===-1?(i[u]=0,l=!0):h===s&&(i[u]=s-1,l=!0),g===-1?(i[u+1]=0,l=!0):g===a&&(i[u+1]=a-1,l=!0)}l=!0;for(let u=i.length-2;u>=0&&l;u-=2){const h=Math.floor(i[u]),g=Math.floor(i[u+1]);if(h<-1||h>s||g<-1||g>a)throw new W;l=!1,h===-1?(i[u]=0,l=!0):h===s&&(i[u]=s-1,l=!0),g===-1?(i[u+1]=0,l=!0):g===a&&(i[u+1]=a-1,l=!0)}}}class bn{constructor(n,i,s,a,l,u,h,g,p){this.a11=n,this.a21=i,this.a31=s,this.a12=a,this.a22=l,this.a32=u,this.a13=h,this.a23=g,this.a33=p}static quadrilateralToQuadrilateral(n,i,s,a,l,u,h,g,p,y,E,A,T,R,D,B){const z=bn.quadrilateralToSquare(n,i,s,a,l,u,h,g);return bn.squareToQuadrilateral(p,y,E,A,T,R,D,B).times(z)}transformPoints(n){const i=n.length,s=this.a11,a=this.a12,l=this.a13,u=this.a21,h=this.a22,g=this.a23,p=this.a31,y=this.a32,E=this.a33;for(let A=0;A<i;A+=2){const T=n[A],R=n[A+1],D=l*T+g*R+E;n[A]=(s*T+u*R+p)/D,n[A+1]=(a*T+h*R+y)/D}}transformPointsWithValues(n,i){const s=this.a11,a=this.a12,l=this.a13,u=this.a21,h=this.a22,g=this.a23,p=this.a31,y=this.a32,E=this.a33,A=n.length;for(let T=0;T<A;T++){const R=n[T],D=i[T],B=l*R+g*D+E;n[T]=(s*R+u*D+p)/B,i[T]=(a*R+h*D+y)/B}}static squareToQuadrilateral(n,i,s,a,l,u,h,g){const p=n-s+l-h,y=i-a+u-g;if(p===0&&y===0)return new bn(s-n,l-s,n,a-i,u-a,i,0,0,1);{const E=s-l,A=h-l,T=a-u,R=g-u,D=E*R-A*T,B=(p*R-A*y)/D,z=(E*y-p*T)/D;return new bn(s-n+B*s,h-n+z*h,n,a-i+B*a,g-i+z*g,i,B,z,1)}}static quadrilateralToSquare(n,i,s,a,l,u,h,g){return bn.squareToQuadrilateral(n,i,s,a,l,u,h,g).buildAdjoint()}buildAdjoint(){return new bn(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(n){return new bn(this.a11*n.a11+this.a21*n.a12+this.a31*n.a13,this.a11*n.a21+this.a21*n.a22+this.a31*n.a23,this.a11*n.a31+this.a21*n.a32+this.a31*n.a33,this.a12*n.a11+this.a22*n.a12+this.a32*n.a13,this.a12*n.a21+this.a22*n.a22+this.a32*n.a23,this.a12*n.a31+this.a22*n.a32+this.a32*n.a33,this.a13*n.a11+this.a23*n.a12+this.a33*n.a13,this.a13*n.a21+this.a23*n.a22+this.a33*n.a23,this.a13*n.a31+this.a23*n.a32+this.a33*n.a33)}}class _d extends pl{sampleGrid(n,i,s,a,l,u,h,g,p,y,E,A,T,R,D,B,z,Z,Q){const Y=bn.quadrilateralToQuadrilateral(a,l,u,h,g,p,y,E,A,T,R,D,B,z,Z,Q);return this.sampleGridWithTransform(n,i,s,Y)}sampleGridWithTransform(n,i,s,a){if(i<=0||s<=0)throw new W;const l=new pe(i,s),u=new Float32Array(2*i);for(let h=0;h<s;h++){const g=u.length,p=h+.5;for(let y=0;y<g;y+=2)u[y]=y/2+.5,u[y+1]=p;a.transformPoints(u),pl.checkAndNudgePoints(n,u);try{for(let y=0;y<g;y+=2)n.get(Math.floor(u[y]),Math.floor(u[y+1]))&&l.set(y/2,h)}catch{throw new W}}return l}}class hr{static setGridSampler(n){hr.gridSampler=n}static getInstance(){return hr.gridSampler}}hr.gridSampler=new _d;class Vt{constructor(n,i){this.x=n,this.y=i}toResultPoint(){return new oe(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Ad{constructor(n){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=n}detect(){return this.detectMirror(!1)}detectMirror(n){let i=this.getMatrixCenter(),s=this.getBullsEyeCorners(i);if(n){let u=s[0];s[0]=s[2],s[2]=u}this.extractParameters(s);let a=this.sampleGrid(this.image,s[this.shift%4],s[(this.shift+1)%4],s[(this.shift+2)%4],s[(this.shift+3)%4]),l=this.getMatrixCornerPoints(s);return new Cd(a,l,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(n){if(!this.isValidPoint(n[0])||!this.isValidPoint(n[1])||!this.isValidPoint(n[2])||!this.isValidPoint(n[3]))throw new W;let i=2*this.nbCenterLayers,s=new Int32Array([this.sampleLine(n[0],n[1],i),this.sampleLine(n[1],n[2],i),this.sampleLine(n[2],n[3],i),this.sampleLine(n[3],n[0],i)]);this.shift=this.getRotation(s,i);let a=0;for(let u=0;u<4;u++){let h=s[(this.shift+u)%4];this.compact?(a<<=7,a+=h>>1&127):(a<<=10,a+=(h>>2&992)+(h>>1&31))}let l=this.getCorrectedParameterData(a,this.compact);this.compact?(this.nbLayers=(l>>6)+1,this.nbDataBlocks=(l&63)+1):(this.nbLayers=(l>>11)+1,this.nbDataBlocks=(l&2047)+1)}getRotation(n,i){let s=0;n.forEach((a,l,u)=>{let h=(a>>i-2<<1)+(a&1);s=(s<<3)+h}),s=((s&1)<<11)+(s>>1);for(let a=0;a<4;a++)if(b.bitCount(s^this.EXPECTED_CORNER_BITS[a])<=2)return a;throw new W}getCorrectedParameterData(n,i){let s,a;i?(s=7,a=2):(s=10,a=4);let l=s-a,u=new Int32Array(s);for(let g=s-1;g>=0;--g)u[g]=n&15,n>>=4;try{new gs(Re.AZTEC_PARAM).decode(u,l)}catch{throw new W}let h=0;for(let g=0;g<a;g++)h=(h<<4)+u[g];return h}getBullsEyeCorners(n){let i=n,s=n,a=n,l=n,u=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let E=this.getFirstDifferent(i,u,1,-1),A=this.getFirstDifferent(s,u,1,1),T=this.getFirstDifferent(a,u,-1,1),R=this.getFirstDifferent(l,u,-1,-1);if(this.nbCenterLayers>2){let D=this.distancePoint(R,E)*this.nbCenterLayers/(this.distancePoint(l,i)*(this.nbCenterLayers+2));if(D<.75||D>1.25||!this.isWhiteOrBlackRectangle(E,A,T,R))break}i=E,s=A,a=T,l=R,u=!u}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new W;this.compact=this.nbCenterLayers===5;let h=new oe(i.getX()+.5,i.getY()-.5),g=new oe(s.getX()+.5,s.getY()+.5),p=new oe(a.getX()-.5,a.getY()+.5),y=new oe(l.getX()-.5,l.getY()-.5);return this.expandSquare([h,g,p,y],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let n,i,s,a;try{let h=new Zn(this.image).detect();n=h[0],i=h[1],s=h[2],a=h[3]}catch{let g=this.image.getWidth()/2,p=this.image.getHeight()/2;n=this.getFirstDifferent(new Vt(g+7,p-7),!1,1,-1).toResultPoint(),i=this.getFirstDifferent(new Vt(g+7,p+7),!1,1,1).toResultPoint(),s=this.getFirstDifferent(new Vt(g-7,p+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new Vt(g-7,p-7),!1,-1,-1).toResultPoint()}let l=Te.round((n.getX()+a.getX()+i.getX()+s.getX())/4),u=Te.round((n.getY()+a.getY()+i.getY()+s.getY())/4);try{let h=new Zn(this.image,15,l,u).detect();n=h[0],i=h[1],s=h[2],a=h[3]}catch{n=this.getFirstDifferent(new Vt(l+7,u-7),!1,1,-1).toResultPoint(),i=this.getFirstDifferent(new Vt(l+7,u+7),!1,1,1).toResultPoint(),s=this.getFirstDifferent(new Vt(l-7,u+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new Vt(l-7,u-7),!1,-1,-1).toResultPoint()}return l=Te.round((n.getX()+a.getX()+i.getX()+s.getX())/4),u=Te.round((n.getY()+a.getY()+i.getY()+s.getY())/4),new Vt(l,u)}getMatrixCornerPoints(n){return this.expandSquare(n,2*this.nbCenterLayers,this.getDimension())}sampleGrid(n,i,s,a,l){let u=hr.getInstance(),h=this.getDimension(),g=h/2-this.nbCenterLayers,p=h/2+this.nbCenterLayers;return u.sampleGrid(n,h,h,g,g,p,g,p,p,g,p,i.getX(),i.getY(),s.getX(),s.getY(),a.getX(),a.getY(),l.getX(),l.getY())}sampleLine(n,i,s){let a=0,l=this.distanceResultPoint(n,i),u=l/s,h=n.getX(),g=n.getY(),p=u*(i.getX()-n.getX())/l,y=u*(i.getY()-n.getY())/l;for(let E=0;E<s;E++)this.image.get(Te.round(h+E*p),Te.round(g+E*y))&&(a|=1<<s-E-1);return a}isWhiteOrBlackRectangle(n,i,s,a){let l=3;n=new Vt(n.getX()-l,n.getY()+l),i=new Vt(i.getX()-l,i.getY()-l),s=new Vt(s.getX()+l,s.getY()-l),a=new Vt(a.getX()+l,a.getY()+l);let u=this.getColor(a,n);if(u===0)return!1;let h=this.getColor(n,i);return h!==u||(h=this.getColor(i,s),h!==u)?!1:(h=this.getColor(s,a),h===u)}getColor(n,i){let s=this.distancePoint(n,i),a=(i.getX()-n.getX())/s,l=(i.getY()-n.getY())/s,u=0,h=n.getX(),g=n.getY(),p=this.image.get(n.getX(),n.getY()),y=Math.ceil(s);for(let A=0;A<y;A++)h+=a,g+=l,this.image.get(Te.round(h),Te.round(g))!==p&&u++;let E=u/s;return E>.1&&E<.9?0:E<=.1===p?1:-1}getFirstDifferent(n,i,s,a){let l=n.getX()+s,u=n.getY()+a;for(;this.isValid(l,u)&&this.image.get(l,u)===i;)l+=s,u+=a;for(l-=s,u-=a;this.isValid(l,u)&&this.image.get(l,u)===i;)l+=s;for(l-=s;this.isValid(l,u)&&this.image.get(l,u)===i;)u+=a;return u-=a,new Vt(l,u)}expandSquare(n,i,s){let a=s/(2*i),l=n[0].getX()-n[2].getX(),u=n[0].getY()-n[2].getY(),h=(n[0].getX()+n[2].getX())/2,g=(n[0].getY()+n[2].getY())/2,p=new oe(h+a*l,g+a*u),y=new oe(h-a*l,g-a*u);l=n[1].getX()-n[3].getX(),u=n[1].getY()-n[3].getY(),h=(n[1].getX()+n[3].getX())/2,g=(n[1].getY()+n[3].getY())/2;let E=new oe(h+a*l,g+a*u),A=new oe(h-a*l,g-a*u);return[p,E,y,A]}isValid(n,i){return n>=0&&n<this.image.getWidth()&&i>0&&i<this.image.getHeight()}isValidPoint(n){let i=Te.round(n.getX()),s=Te.round(n.getY());return this.isValid(i,s)}distancePoint(n,i){return Te.distance(n.getX(),n.getY(),i.getX(),i.getY())}distanceResultPoint(n,i){return Te.distance(n.getX(),n.getY(),i.getX(),i.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(b.truncDivision(this.nbLayers-4,8)+1)+15}}class Io{decode(n,i=null){let s=null,a=new Ad(n.getBlackMatrix()),l=null,u=null;try{let y=a.detectMirror(!1);l=y.getPoints(),this.reportFoundResultPoints(i,l),u=new Ve().decode(y)}catch(y){s=y}if(u==null)try{let y=a.detectMirror(!0);l=y.getPoints(),this.reportFoundResultPoints(i,l),u=new Ve().decode(y)}catch(y){throw s??y}let h=new Je(u.getText(),u.getRawBytes(),u.getNumBits(),l,ae.AZTEC,F.currentTimeMillis()),g=u.getByteSegments();g!=null&&h.putMetadata(Ct.BYTE_SEGMENTS,g);let p=u.getECLevel();return p!=null&&h.putMetadata(Ct.ERROR_CORRECTION_LEVEL,p),h}reportFoundResultPoints(n,i){if(n!=null){let s=n.get(H.NEED_RESULT_POINT_CALLBACK);s!=null&&i.forEach((a,l,u)=>{s.foundPossibleResultPoint(a)})}}reset(){}}class vg extends pn{constructor(n=500){super(new Io,n)}}class ht{decode(n,i){try{return this.doDecode(n,i)}catch{if(i&&i.get(H.TRY_HARDER)===!0&&n.isRotateSupported()){const l=n.rotateCounterClockwise(),u=this.doDecode(l,i),h=u.getResultMetadata();let g=270;h!==null&&h.get(Ct.ORIENTATION)===!0&&(g=g+h.get(Ct.ORIENTATION)%360),u.putMetadata(Ct.ORIENTATION,g);const p=u.getResultPoints();if(p!==null){const y=l.getHeight();for(let E=0;E<p.length;E++)p[E]=new oe(y-p[E].getY()-1,p[E].getX())}return u}else throw new W}}reset(){}doDecode(n,i){const s=n.getWidth(),a=n.getHeight();let l=new L(s);const u=i&&i.get(H.TRY_HARDER)===!0,h=Math.max(1,a>>(u?8:5));let g;u?g=a:g=15;const p=Math.trunc(a/2);for(let y=0;y<g;y++){const E=Math.trunc((y+1)/2),A=(y&1)===0,T=p+h*(A?E:-E);if(T<0||T>=a)break;try{l=n.getBlackRow(T,l)}catch{continue}for(let R=0;R<2;R++){if(R===1&&(l.reverse(),i&&i.get(H.NEED_RESULT_POINT_CALLBACK)===!0)){const D=new Map;i.forEach((B,z)=>D.set(z,B)),D.delete(H.NEED_RESULT_POINT_CALLBACK),i=D}try{const D=this.decodeRow(T,l,i);if(R===1){D.putMetadata(Ct.ORIENTATION,180);const B=D.getResultPoints();B!==null&&(B[0]=new oe(s-B[0].getX()-1,B[0].getY()),B[1]=new oe(s-B[1].getX()-1,B[1].getY()))}return D}catch{}}}throw new W}static recordPattern(n,i,s){const a=s.length;for(let p=0;p<a;p++)s[p]=0;const l=n.getSize();if(i>=l)throw new W;let u=!n.get(i),h=0,g=i;for(;g<l;){if(n.get(g)!==u)s[h]++;else{if(++h===a)break;s[h]=1,u=!u}g++}if(!(h===a||h===a-1&&g===l))throw new W}static recordPatternInReverse(n,i,s){let a=s.length,l=n.get(i);for(;i>0&&a>=0;)n.get(--i)!==l&&(a--,l=!l);if(a>=0)throw new W;ht.recordPattern(n,i+1,s)}static patternMatchVariance(n,i,s){const a=n.length;let l=0,u=0;for(let p=0;p<a;p++)l+=n[p],u+=i[p];if(l<u)return Number.POSITIVE_INFINITY;const h=l/u;s*=h;let g=0;for(let p=0;p<a;p++){const y=n[p],E=i[p]*h,A=y>E?y-E:E-y;if(A>s)return Number.POSITIVE_INFINITY;g+=A}return g/l}}class te extends ht{static findStartPattern(n){const i=n.getSize(),s=n.getNextSet(0);let a=0,l=Int32Array.from([0,0,0,0,0,0]),u=s,h=!1;const g=6;for(let p=s;p<i;p++)if(n.get(p)!==h)l[a]++;else{if(a===g-1){let y=te.MAX_AVG_VARIANCE,E=-1;for(let A=te.CODE_START_A;A<=te.CODE_START_C;A++){const T=ht.patternMatchVariance(l,te.CODE_PATTERNS[A],te.MAX_INDIVIDUAL_VARIANCE);T<y&&(y=T,E=A)}if(E>=0&&n.isRange(Math.max(0,u-(p-u)/2),u,!1))return Int32Array.from([u,p,E]);u+=l[0]+l[1],l=l.slice(2,l.length-1),l[a-1]=0,l[a]=0,a--}else a++;l[a]=1,h=!h}throw new W}static decodeCode(n,i,s){ht.recordPattern(n,s,i);let a=te.MAX_AVG_VARIANCE,l=-1;for(let u=0;u<te.CODE_PATTERNS.length;u++){const h=te.CODE_PATTERNS[u],g=this.patternMatchVariance(i,h,te.MAX_INDIVIDUAL_VARIANCE);g<a&&(a=g,l=u)}if(l>=0)return l;throw new W}decodeRow(n,i,s){const a=s&&s.get(H.ASSUME_GS1)===!0,l=te.findStartPattern(i),u=l[2];let h=0;const g=new Uint8Array(20);g[h++]=u;let p;switch(u){case te.CODE_START_A:p=te.CODE_CODE_A;break;case te.CODE_START_B:p=te.CODE_CODE_B;break;case te.CODE_START_C:p=te.CODE_CODE_C;break;default:throw new U}let y=!1,E=!1,A="",T=l[0],R=l[1];const D=Int32Array.from([0,0,0,0,0,0]);let B=0,z=0,Z=u,Q=0,Y=!0,Se=!1,ye=!1;for(;!y;){const Si=E;switch(E=!1,B=z,z=te.decodeCode(i,D,R),g[h++]=z,z!==te.CODE_STOP&&(Y=!0),z!==te.CODE_STOP&&(Q++,Z+=Q*z),T=R,R+=D.reduce((Kg,qg)=>Kg+qg,0),z){case te.CODE_START_A:case te.CODE_START_B:case te.CODE_START_C:throw new U}switch(p){case te.CODE_CODE_A:if(z<64)ye===Se?A+=String.fromCharCode(32+z):A+=String.fromCharCode(32+z+128),ye=!1;else if(z<96)ye===Se?A+=String.fromCharCode(z-64):A+=String.fromCharCode(z+64),ye=!1;else switch(z!==te.CODE_STOP&&(Y=!1),z){case te.CODE_FNC_1:a&&(A.length===0?A+="]C1":A+="");break;case te.CODE_FNC_2:case te.CODE_FNC_3:break;case te.CODE_FNC_4_A:!Se&&ye?(Se=!0,ye=!1):Se&&ye?(Se=!1,ye=!1):ye=!0;break;case te.CODE_SHIFT:E=!0,p=te.CODE_CODE_B;break;case te.CODE_CODE_B:p=te.CODE_CODE_B;break;case te.CODE_CODE_C:p=te.CODE_CODE_C;break;case te.CODE_STOP:y=!0;break}break;case te.CODE_CODE_B:if(z<96)ye===Se?A+=String.fromCharCode(32+z):A+=String.fromCharCode(32+z+128),ye=!1;else switch(z!==te.CODE_STOP&&(Y=!1),z){case te.CODE_FNC_1:a&&(A.length===0?A+="]C1":A+="");break;case te.CODE_FNC_2:case te.CODE_FNC_3:break;case te.CODE_FNC_4_B:!Se&&ye?(Se=!0,ye=!1):Se&&ye?(Se=!1,ye=!1):ye=!0;break;case te.CODE_SHIFT:E=!0,p=te.CODE_CODE_A;break;case te.CODE_CODE_A:p=te.CODE_CODE_A;break;case te.CODE_CODE_C:p=te.CODE_CODE_C;break;case te.CODE_STOP:y=!0;break}break;case te.CODE_CODE_C:if(z<100)z<10&&(A+="0"),A+=z;else switch(z!==te.CODE_STOP&&(Y=!1),z){case te.CODE_FNC_1:a&&(A.length===0?A+="]C1":A+="");break;case te.CODE_CODE_A:p=te.CODE_CODE_A;break;case te.CODE_CODE_B:p=te.CODE_CODE_B;break;case te.CODE_STOP:y=!0;break}break}Si&&(p=p===te.CODE_CODE_A?te.CODE_CODE_B:te.CODE_CODE_A)}const Qt=R-T;if(R=i.getNextUnset(R),!i.isRange(R,Math.min(i.getSize(),R+(R-T)/2),!1))throw new W;if(Z-=Q*B,Z%103!==B)throw new P;const Tn=A.length;if(Tn===0)throw new W;Tn>0&&Y&&(p===te.CODE_CODE_C?A=A.substring(0,Tn-2):A=A.substring(0,Tn-1));const Jt=(l[1]+l[0])/2,Ue=T+Qt/2,Ot=g.length,an=new Uint8Array(Ot);for(let Si=0;Si<Ot;Si++)an[Si]=g[Si];const Ai=[new oe(Jt,n),new oe(Ue,n)];return new Je(A,an,0,Ai,ae.CODE_128,new Date().getTime())}}te.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],te.MAX_AVG_VARIANCE=.25,te.MAX_INDIVIDUAL_VARIANCE=.7,te.CODE_SHIFT=98,te.CODE_CODE_C=99,te.CODE_CODE_B=100,te.CODE_CODE_A=101,te.CODE_FNC_1=102,te.CODE_FNC_2=97,te.CODE_FNC_3=96,te.CODE_FNC_4_A=101,te.CODE_FNC_4_B=100,te.CODE_START_A=103,te.CODE_START_B=104,te.CODE_START_C=105,te.CODE_STOP=106;class pt extends ht{constructor(n=!1,i=!1){super(),this.usingCheckDigit=n,this.extendedMode=i,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(n,i,s){let a=this.counters;a.fill(0),this.decodeRowResult="";let l=pt.findAsteriskPattern(i,a),u=i.getNextSet(l[1]),h=i.getSize(),g,p;do{pt.recordPattern(i,u,a);let D=pt.toNarrowWidePattern(a);if(D<0)throw new W;g=pt.patternToChar(D),this.decodeRowResult+=g,p=u;for(let B of a)u+=B;u=i.getNextSet(u)}while(g!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let y=0;for(let D of a)y+=D;let E=u-p-y;if(u!==h&&E*2<y)throw new W;if(this.usingCheckDigit){let D=this.decodeRowResult.length-1,B=0;for(let z=0;z<D;z++)B+=pt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(z));if(this.decodeRowResult.charAt(D)!==pt.ALPHABET_STRING.charAt(B%43))throw new P;this.decodeRowResult=this.decodeRowResult.substring(0,D)}if(this.decodeRowResult.length===0)throw new W;let A;this.extendedMode?A=pt.decodeExtended(this.decodeRowResult):A=this.decodeRowResult;let T=(l[1]+l[0])/2,R=p+y/2;return new Je(A,null,0,[new oe(T,n),new oe(R,n)],ae.CODE_39,new Date().getTime())}static findAsteriskPattern(n,i){let s=n.getSize(),a=n.getNextSet(0),l=0,u=a,h=!1,g=i.length;for(let p=a;p<s;p++)if(n.get(p)!==h)i[l]++;else{if(l===g-1){if(this.toNarrowWidePattern(i)===pt.ASTERISK_ENCODING&&n.isRange(Math.max(0,u-Math.floor((p-u)/2)),u,!1))return[u,p];u+=i[0]+i[1],i.copyWithin(0,2,2+l-1),i[l-1]=0,i[l]=0,l--}else l++;i[l]=1,h=!h}throw new W}static toNarrowWidePattern(n){let i=n.length,s=0,a;do{let l=2147483647;for(let g of n)g<l&&g>s&&(l=g);s=l,a=0;let u=0,h=0;for(let g=0;g<i;g++){let p=n[g];p>s&&(h|=1<<i-1-g,a++,u+=p)}if(a===3){for(let g=0;g<i&&a>0;g++){let p=n[g];if(p>s&&(a--,p*2>=u))return-1}return h}}while(a>3);return-1}static patternToChar(n){for(let i=0;i<pt.CHARACTER_ENCODINGS.length;i++)if(pt.CHARACTER_ENCODINGS[i]===n)return pt.ALPHABET_STRING.charAt(i);if(n===pt.ASTERISK_ENCODING)return"*";throw new W}static decodeExtended(n){let i=n.length,s="";for(let a=0;a<i;a++){let l=n.charAt(a);if(l==="+"||l==="$"||l==="%"||l==="/"){let u=n.charAt(a+1),h="\0";switch(l){case"+":if(u>="A"&&u<="Z")h=String.fromCharCode(u.charCodeAt(0)+32);else throw new U;break;case"$":if(u>="A"&&u<="Z")h=String.fromCharCode(u.charCodeAt(0)-64);else throw new U;break;case"%":if(u>="A"&&u<="E")h=String.fromCharCode(u.charCodeAt(0)-38);else if(u>="F"&&u<="J")h=String.fromCharCode(u.charCodeAt(0)-11);else if(u>="K"&&u<="O")h=String.fromCharCode(u.charCodeAt(0)+16);else if(u>="P"&&u<="T")h=String.fromCharCode(u.charCodeAt(0)+43);else if(u==="U")h="\0";else if(u==="V")h="@";else if(u==="W")h="`";else if(u==="X"||u==="Y"||u==="Z")h="";else throw new U;break;case"/":if(u>="A"&&u<="O")h=String.fromCharCode(u.charCodeAt(0)-32);else if(u==="Z")h=":";else throw new U;break}s+=h,a++}else s+=l}return s}}pt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",pt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],pt.ASTERISK_ENCODING=148;class Fe extends ht{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(n,i,s){let a=this.decodeStart(i),l=this.decodeEnd(i),u=new ee;Fe.decodeMiddle(i,a[1],l[0],u);let h=u.toString(),g=null;s!=null&&(g=s.get(H.ALLOWED_LENGTHS)),g==null&&(g=Fe.DEFAULT_ALLOWED_LENGTHS);let p=h.length,y=!1,E=0;for(let R of g){if(p===R){y=!0;break}R>E&&(E=R)}if(!y&&p>E&&(y=!0),!y)throw new U;const A=[new oe(a[1],n),new oe(l[0],n)];return new Je(h,null,0,A,ae.ITF,new Date().getTime())}static decodeMiddle(n,i,s,a){let l=new Int32Array(10),u=new Int32Array(5),h=new Int32Array(5);for(l.fill(0),u.fill(0),h.fill(0);i<s;){ht.recordPattern(n,i,l);for(let p=0;p<5;p++){let y=2*p;u[p]=l[y],h[p]=l[y+1]}let g=Fe.decodeDigit(u);a.append(g.toString()),g=this.decodeDigit(h),a.append(g.toString()),l.forEach(function(p){i+=p})}}decodeStart(n){let i=Fe.skipWhiteSpace(n),s=Fe.findGuardPattern(n,i,Fe.START_PATTERN);return this.narrowLineWidth=(s[1]-s[0])/4,this.validateQuietZone(n,s[0]),s}validateQuietZone(n,i){let s=this.narrowLineWidth*10;s=s<i?s:i;for(let a=i-1;s>0&&a>=0&&!n.get(a);a--)s--;if(s!==0)throw new W}static skipWhiteSpace(n){const i=n.getSize(),s=n.getNextSet(0);if(s===i)throw new W;return s}decodeEnd(n){n.reverse();try{let i=Fe.skipWhiteSpace(n),s;try{s=Fe.findGuardPattern(n,i,Fe.END_PATTERN_REVERSED[0])}catch(l){l instanceof W&&(s=Fe.findGuardPattern(n,i,Fe.END_PATTERN_REVERSED[1]))}this.validateQuietZone(n,s[0]);let a=s[0];return s[0]=n.getSize()-s[1],s[1]=n.getSize()-a,s}finally{n.reverse()}}static findGuardPattern(n,i,s){let a=s.length,l=new Int32Array(a),u=n.getSize(),h=!1,g=0,p=i;l.fill(0);for(let y=i;y<u;y++)if(n.get(y)!==h)l[g]++;else{if(g===a-1){if(ht.patternMatchVariance(l,s,Fe.MAX_INDIVIDUAL_VARIANCE)<Fe.MAX_AVG_VARIANCE)return[p,y];p+=l[0]+l[1],F.arraycopy(l,2,l,0,g-1),l[g-1]=0,l[g]=0,g--}else g++;l[g]=1,h=!h}throw new W}static decodeDigit(n){let i=Fe.MAX_AVG_VARIANCE,s=-1,a=Fe.PATTERNS.length;for(let l=0;l<a;l++){let u=Fe.PATTERNS[l],h=ht.patternMatchVariance(n,u,Fe.MAX_INDIVIDUAL_VARIANCE);h<i?(i=h,s=l):h===i&&(s=-1)}if(s>=0)return s%10;throw new W}}Fe.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Fe.MAX_AVG_VARIANCE=.38,Fe.MAX_INDIVIDUAL_VARIANCE=.5,Fe.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Fe.START_PATTERN=Int32Array.from([1,1,1,1]),Fe.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class st extends ht{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(n){let i=!1,s,a=0,l=Int32Array.from([0,0,0]);for(;!i;){l=Int32Array.from([0,0,0]),s=st.findGuardPattern(n,a,!1,this.START_END_PATTERN,l);let u=s[0];a=s[1];let h=u-(a-u);h>=0&&(i=n.isRange(h,u,!1))}return s}static checkChecksum(n){return st.checkStandardUPCEANChecksum(n)}static checkStandardUPCEANChecksum(n){let i=n.length;if(i===0)return!1;let s=parseInt(n.charAt(i-1),10);return st.getStandardUPCEANChecksum(n.substring(0,i-1))===s}static getStandardUPCEANChecksum(n){let i=n.length,s=0;for(let a=i-1;a>=0;a-=2){let l=n.charAt(a).charCodeAt(0)-48;if(l<0||l>9)throw new U;s+=l}s*=3;for(let a=i-2;a>=0;a-=2){let l=n.charAt(a).charCodeAt(0)-48;if(l<0||l>9)throw new U;s+=l}return(1e3-s)%10}static decodeEnd(n,i){return st.findGuardPattern(n,i,!1,st.START_END_PATTERN,new Int32Array(st.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(n,i,s,a){return this.findGuardPattern(n,i,s,a,new Int32Array(a.length))}static findGuardPattern(n,i,s,a,l){let u=n.getSize();i=s?n.getNextUnset(i):n.getNextSet(i);let h=0,g=i,p=a.length,y=s;for(let E=i;E<u;E++)if(n.get(E)!==y)l[h]++;else{if(h===p-1){if(ht.patternMatchVariance(l,a,st.MAX_INDIVIDUAL_VARIANCE)<st.MAX_AVG_VARIANCE)return Int32Array.from([g,E]);g+=l[0]+l[1];let A=l.slice(2,l.length-1);for(let T=0;T<h-1;T++)l[T]=A[T];l[h-1]=0,l[h]=0,h--}else h++;l[h]=1,y=!y}throw new W}static decodeDigit(n,i,s,a){this.recordPattern(n,s,i);let l=this.MAX_AVG_VARIANCE,u=-1,h=a.length;for(let g=0;g<h;g++){let p=a[g],y=ht.patternMatchVariance(i,p,st.MAX_INDIVIDUAL_VARIANCE);y<l&&(l=y,u=g)}if(u>=0)return u;throw new W}}st.MAX_AVG_VARIANCE=.48,st.MAX_INDIVIDUAL_VARIANCE=.7,st.START_END_PATTERN=Int32Array.from([1,1,1]),st.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),st.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),st.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class ps{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(n,i,s){let a=this.decodeRowStringBuffer,l=this.decodeMiddle(i,s,a),u=a.toString(),h=ps.parseExtensionString(u),g=[new oe((s[0]+s[1])/2,n),new oe(l,n)],p=new Je(u,null,0,g,ae.UPC_EAN_EXTENSION,new Date().getTime());return h!=null&&p.putAllMetadata(h),p}decodeMiddle(n,i,s){let a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;let l=n.getSize(),u=i[1],h=0;for(let p=0;p<5&&u<l;p++){let y=st.decodeDigit(n,a,u,st.L_AND_G_PATTERNS);s+=String.fromCharCode(48+y%10);for(let E of a)u+=E;y>=10&&(h|=1<<4-p),p!==4&&(u=n.getNextSet(u),u=n.getNextUnset(u))}if(s.length!==5)throw new W;let g=this.determineCheckDigit(h);if(ps.extensionChecksum(s.toString())!==g)throw new W;return u}static extensionChecksum(n){let i=n.length,s=0;for(let a=i-2;a>=0;a-=2)s+=n.charAt(a).charCodeAt(0)-48;s*=3;for(let a=i-1;a>=0;a-=2)s+=n.charAt(a).charCodeAt(0)-48;return s*=3,s%10}determineCheckDigit(n){for(let i=0;i<10;i++)if(n===this.CHECK_DIGIT_ENCODINGS[i])return i;throw new W}static parseExtensionString(n){if(n.length!==5)return null;let i=ps.parseExtension5String(n);return i==null?null:new Map([[Ct.SUGGESTED_PRICE,i]])}static parseExtension5String(n){let i;switch(n.charAt(0)){case"0":i="";break;case"5":i="$";break;case"9":switch(n){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}i="";break;default:i="";break}let s=parseInt(n.substring(1)),a=(s/100).toString(),l=s%100,u=l<10?"0"+l:l.toString();return i+a+"."+u}}class xl{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(n,i,s){let a=this.decodeRowStringBuffer,l=this.decodeMiddle(i,s,a),u=a.toString(),h=xl.parseExtensionString(u),g=[new oe((s[0]+s[1])/2,n),new oe(l,n)],p=new Je(u,null,0,g,ae.UPC_EAN_EXTENSION,new Date().getTime());return h!=null&&p.putAllMetadata(h),p}decodeMiddle(n,i,s){let a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;let l=n.getSize(),u=i[1],h=0;for(let g=0;g<2&&u<l;g++){let p=st.decodeDigit(n,a,u,st.L_AND_G_PATTERNS);s+=String.fromCharCode(48+p%10);for(let y of a)u+=y;p>=10&&(h|=1<<1-g),g!==1&&(u=n.getNextSet(u),u=n.getNextUnset(u))}if(s.length!==2)throw new W;if(parseInt(s.toString())%4!==h)throw new W;return u}static parseExtensionString(n){return n.length!==2?null:new Map([[Ct.ISSUE_NUMBER,parseInt(n)]])}}class Sd{static decodeRow(n,i,s){let a=st.findGuardPattern(i,s,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new ps().decodeRow(n,i,a)}catch{return new xl().decodeRow(n,i,a)}}}Sd.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class ke extends st{constructor(){super(),this.decodeRowStringBuffer="",ke.L_AND_G_PATTERNS=ke.L_PATTERNS.map(n=>Int32Array.from(n));for(let n=10;n<20;n++){let i=ke.L_PATTERNS[n-10],s=new Int32Array(i.length);for(let a=0;a<i.length;a++)s[a]=i[i.length-a-1];ke.L_AND_G_PATTERNS[n]=s}}decodeRow(n,i,s){let a=ke.findStartGuardPattern(i),l=s==null?null:s.get(H.NEED_RESULT_POINT_CALLBACK);if(l!=null){const Y=new oe((a[0]+a[1])/2,n);l.foundPossibleResultPoint(Y)}let u=this.decodeMiddle(i,a,this.decodeRowStringBuffer),h=u.rowOffset,g=u.resultString;if(l!=null){const Y=new oe(h,n);l.foundPossibleResultPoint(Y)}let p=this.decodeEnd(i,h);if(l!=null){const Y=new oe((p[0]+p[1])/2,n);l.foundPossibleResultPoint(Y)}let y=p[1],E=y+(y-p[0]);if(E>=i.getSize()||!i.isRange(y,E,!1))throw new W;let A=g.toString();if(A.length<8)throw new U;if(!ke.checkChecksum(A))throw new P;let T=(a[1]+a[0])/2,R=(p[1]+p[0])/2,D=this.getBarcodeFormat(),B=[new oe(T,n),new oe(R,n)],z=new Je(A,null,0,B,D,new Date().getTime()),Z=0;try{let Y=Sd.decodeRow(n,i,p[1]);z.putMetadata(Ct.UPC_EAN_EXTENSION,Y.getText()),z.putAllMetadata(Y.getResultMetadata()),z.addResultPoints(Y.getResultPoints()),Z=Y.getText().length}catch{}let Q=s==null?null:s.get(H.ALLOWED_EAN_EXTENSIONS);if(Q!=null){let Y=!1;for(let Se in Q)if(Z.toString()===Se){Y=!0;break}if(!Y)throw new W}return z}decodeEnd(n,i){return ke.findGuardPattern(n,i,!1,ke.START_END_PATTERN,new Int32Array(ke.START_END_PATTERN.length).fill(0))}static checkChecksum(n){return ke.checkStandardUPCEANChecksum(n)}static checkStandardUPCEANChecksum(n){let i=n.length;if(i===0)return!1;let s=parseInt(n.charAt(i-1),10);return ke.getStandardUPCEANChecksum(n.substring(0,i-1))===s}static getStandardUPCEANChecksum(n){let i=n.length,s=0;for(let a=i-1;a>=0;a-=2){let l=n.charAt(a).charCodeAt(0)-48;if(l<0||l>9)throw new U;s+=l}s*=3;for(let a=i-2;a>=0;a-=2){let l=n.charAt(a).charCodeAt(0)-48;if(l<0||l>9)throw new U;s+=l}return(1e3-s)%10}}class Gr extends ke{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(n,i,s){let a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;let l=n.getSize(),u=i[1],h=0;for(let p=0;p<6&&u<l;p++){let y=ke.decodeDigit(n,a,u,ke.L_AND_G_PATTERNS);s+=String.fromCharCode(48+y%10);for(let E of a)u+=E;y>=10&&(h|=1<<5-p)}s=Gr.determineFirstDigit(s,h),u=ke.findGuardPattern(n,u,!0,ke.MIDDLE_PATTERN,new Int32Array(ke.MIDDLE_PATTERN.length).fill(0))[1];for(let p=0;p<6&&u<l;p++){let y=ke.decodeDigit(n,a,u,ke.L_PATTERNS);s+=String.fromCharCode(48+y);for(let E of a)u+=E}return{rowOffset:u,resultString:s}}getBarcodeFormat(){return ae.EAN_13}static determineFirstDigit(n,i){for(let s=0;s<10;s++)if(i===this.FIRST_DIGIT_ENCODINGS[s])return n=String.fromCharCode(48+s)+n,n;throw new W}}Gr.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class bd extends ke{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(n,i,s){const a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;let l=n.getSize(),u=i[1];for(let g=0;g<4&&u<l;g++){let p=ke.decodeDigit(n,a,u,ke.L_PATTERNS);s+=String.fromCharCode(48+p);for(let y of a)u+=y}u=ke.findGuardPattern(n,u,!0,ke.MIDDLE_PATTERN,new Int32Array(ke.MIDDLE_PATTERN.length).fill(0))[1];for(let g=0;g<4&&u<l;g++){let p=ke.decodeDigit(n,a,u,ke.L_PATTERNS);s+=String.fromCharCode(48+p);for(let y of a)u+=y}return{rowOffset:u,resultString:s}}getBarcodeFormat(){return ae.EAN_8}}class Id extends ke{constructor(){super(...arguments),this.ean13Reader=new Gr}getBarcodeFormat(){return ae.UPC_A}decode(n,i){return this.maybeReturnResult(this.ean13Reader.decode(n))}decodeRow(n,i,s){return this.maybeReturnResult(this.ean13Reader.decodeRow(n,i,s))}decodeMiddle(n,i,s){return this.ean13Reader.decodeMiddle(n,i,s)}maybeReturnResult(n){let i=n.getText();if(i.charAt(0)==="0"){let s=new Je(i.substring(1),null,null,n.getResultPoints(),ae.UPC_A);return n.getResultMetadata()!=null&&s.putAllMetadata(n.getResultMetadata()),s}else throw new W}reset(){this.ean13Reader.reset()}}class In extends ke{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(n,i,s){const a=this.decodeMiddleCounters.map(p=>p);a[0]=0,a[1]=0,a[2]=0,a[3]=0;const l=n.getSize();let u=i[1],h=0;for(let p=0;p<6&&u<l;p++){const y=In.decodeDigit(n,a,u,In.L_AND_G_PATTERNS);s+=String.fromCharCode(48+y%10);for(let E of a)u+=E;y>=10&&(h|=1<<5-p)}let g=In.determineNumSysAndCheckDigit(s,h);return{rowOffset:u,resultString:g}}decodeEnd(n,i){return In.findGuardPatternWithoutCounters(n,i,!0,In.MIDDLE_END_PATTERN)}checkChecksum(n){return ke.checkChecksum(In.convertUPCEtoUPCA(n))}static determineNumSysAndCheckDigit(n,i){for(let s=0;s<=1;s++)for(let a=0;a<10;a++)if(i===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[s][a]){let l=String.fromCharCode(48+s),u=String.fromCharCode(48+a);return l+n+u}throw W.getNotFoundInstance()}getBarcodeFormat(){return ae.UPC_E}static convertUPCEtoUPCA(n){const i=n.slice(1,7).split("").map(l=>l.charCodeAt(0)),s=new ee;s.append(n.charAt(0));let a=i[5];switch(a){case 0:case 1:case 2:s.appendChars(i,0,2),s.append(a),s.append("0000"),s.appendChars(i,2,3);break;case 3:s.appendChars(i,0,3),s.append("00000"),s.appendChars(i,3,2);break;case 4:s.appendChars(i,0,4),s.append("00000"),s.append(i[4]);break;default:s.appendChars(i,0,5),s.append("0000"),s.append(a);break}return n.length>=8&&s.append(n.charAt(7)),s.toString()}}In.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),In.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class ml extends ht{constructor(n){super();let i=n==null?null:n.get(H.POSSIBLE_FORMATS),s=[];o(i)?(s.push(new Gr),s.push(new Id),s.push(new bd),s.push(new In)):(i.indexOf(ae.EAN_13)>-1&&s.push(new Gr),i.indexOf(ae.UPC_A)>-1&&s.push(new Id),i.indexOf(ae.EAN_8)>-1&&s.push(new bd),i.indexOf(ae.UPC_E)>-1&&s.push(new In)),this.readers=s}decodeRow(n,i,s){for(let a of this.readers)try{const l=a.decodeRow(n,i,s),u=l.getBarcodeFormat()===ae.EAN_13&&l.getText().charAt(0)==="0",h=s==null?null:s.get(H.POSSIBLE_FORMATS),g=h==null||h.includes(ae.UPC_A);if(u&&g){const p=l.getRawBytes(),y=new Je(l.getText().substring(1),p,p?p.length:null,l.getResultPoints(),ae.UPC_A);return y.putAllMetadata(l.getResultMetadata()),y}return l}catch{}throw new W}reset(){for(let n of this.readers)n.reset()}}class Mt extends ht{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(n,i){for(let s=0;s<i.length;s++)if(ht.patternMatchVariance(n,i[s],Mt.MAX_INDIVIDUAL_VARIANCE)<Mt.MAX_AVG_VARIANCE)return s;throw new W}static count(n){return Te.sum(new Int32Array(n))}static increment(n,i){let s=0,a=i[0];for(let l=1;l<n.length;l++)i[l]>a&&(a=i[l],s=l);n[s]++}static decrement(n,i){let s=0,a=i[0];for(let l=1;l<n.length;l++)i[l]<a&&(a=i[l],s=l);n[s]--}static isFinderPattern(n){let i=n[0]+n[1],s=i+n[2]+n[3],a=i/s;if(a>=Mt.MIN_FINDER_PATTERN_RATIO&&a<=Mt.MAX_FINDER_PATTERN_RATIO){let l=Number.MAX_SAFE_INTEGER,u=Number.MIN_SAFE_INTEGER;for(let h of n)h>u&&(u=h),h<l&&(l=h);return u<10*l}return!1}}Mt.MAX_AVG_VARIANCE=.2,Mt.MAX_INDIVIDUAL_VARIANCE=.45,Mt.MIN_FINDER_PATTERN_RATIO=9.5/12,Mt.MAX_FINDER_PATTERN_RATIO=12.5/14;class mi{constructor(n,i){this.value=n,this.checksumPortion=i}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(n){if(!(n instanceof mi))return!1;const i=n;return this.value===i.value&&this.checksumPortion===i.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class To{constructor(n,i,s,a,l){this.value=n,this.startEnd=i,this.value=n,this.startEnd=i,this.resultPoints=new Array,this.resultPoints.push(new oe(s,l)),this.resultPoints.push(new oe(a,l))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(n){if(!(n instanceof To))return!1;const i=n;return this.value===i.value}hashCode(){return this.value}}class jn{constructor(){}static getRSSvalue(n,i,s){let a=0;for(let g of n)a+=g;let l=0,u=0,h=n.length;for(let g=0;g<h-1;g++){let p;for(p=1,u|=1<<g;p<n[g];p++,u&=~(1<<g)){let y=jn.combins(a-p-1,h-g-2);if(s&&u===0&&a-p-(h-g-1)>=h-g-1&&(y-=jn.combins(a-p-(h-g),h-g-2)),h-g-1>1){let E=0;for(let A=a-p-(h-g-2);A>i;A--)E+=jn.combins(a-p-A-1,h-g-3);y-=E*(h-1-g)}else a-p>i&&y--;l+=y}a-=p}return l}static combins(n,i){let s,a;n-i>i?(a=i,s=n-i):(a=n-i,s=i);let l=1,u=1;for(let h=n;h>s;h--)l*=h,u<=a&&(l/=u,u++);for(;u<=a;)l/=u,u++;return l}}class Eg{static buildBitArray(n){let i=n.length*2-1;n[n.length-1].getRightChar()==null&&(i-=1);let s=12*i,a=new L(s),l=0,h=n[0].getRightChar().getValue();for(let g=11;g>=0;--g)h&1<<g&&a.set(l),l++;for(let g=1;g<n.length;++g){let p=n[g],y=p.getLeftChar().getValue();for(let E=11;E>=0;--E)y&1<<E&&a.set(l),l++;if(p.getRightChar()!=null){let E=p.getRightChar().getValue();for(let A=11;A>=0;--A)E&1<<A&&a.set(l),l++}}return a}}class Xr{constructor(n,i){i?this.decodedInformation=null:(this.finished=n,this.decodedInformation=i)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class wl{constructor(n){this.newPosition=n}getNewPosition(){return this.newPosition}}class Kt extends wl{constructor(n,i){super(n),this.value=i}getValue(){return this.value}isFNC1(){return this.value===Kt.FNC1}}Kt.FNC1="$";class $r extends wl{constructor(n,i,s){super(n),s?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=i}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class xn extends wl{constructor(n,i,s){if(super(n),i<0||i>10||s<0||s>10)throw new U;this.firstDigit=i,this.secondDigit=s}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===xn.FNC1}isSecondDigitFNC1(){return this.secondDigit===xn.FNC1}isAnyFNC1(){return this.firstDigit===xn.FNC1||this.secondDigit===xn.FNC1}}xn.FNC1=10;class re{constructor(){}static parseFieldsInGeneralPurpose(n){if(!n)return null;if(n.length<2)throw new W;let i=n.substring(0,2);for(let l of re.TWO_DIGIT_DATA_LENGTH)if(l[0]===i)return l[1]===re.VARIABLE_LENGTH?re.processVariableAI(2,l[2],n):re.processFixedAI(2,l[1],n);if(n.length<3)throw new W;let s=n.substring(0,3);for(let l of re.THREE_DIGIT_DATA_LENGTH)if(l[0]===s)return l[1]===re.VARIABLE_LENGTH?re.processVariableAI(3,l[2],n):re.processFixedAI(3,l[1],n);for(let l of re.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(l[0]===s)return l[1]===re.VARIABLE_LENGTH?re.processVariableAI(4,l[2],n):re.processFixedAI(4,l[1],n);if(n.length<4)throw new W;let a=n.substring(0,4);for(let l of re.FOUR_DIGIT_DATA_LENGTH)if(l[0]===a)return l[1]===re.VARIABLE_LENGTH?re.processVariableAI(4,l[2],n):re.processFixedAI(4,l[1],n);throw new W}static processFixedAI(n,i,s){if(s.length<n)throw new W;let a=s.substring(0,n);if(s.length<n+i)throw new W;let l=s.substring(n,n+i),u=s.substring(n+i),h="("+a+")"+l,g=re.parseFieldsInGeneralPurpose(u);return g==null?h:h+g}static processVariableAI(n,i,s){let a=s.substring(0,n),l;s.length<n+i?l=s.length:l=n+i;let u=s.substring(n,l),h=s.substring(l),g="("+a+")"+u,p=re.parseFieldsInGeneralPurpose(h);return p==null?g:g+p}}re.VARIABLE_LENGTH=[],re.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",re.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",re.VARIABLE_LENGTH,20],["22",re.VARIABLE_LENGTH,29],["30",re.VARIABLE_LENGTH,8],["37",re.VARIABLE_LENGTH,8],["90",re.VARIABLE_LENGTH,30],["91",re.VARIABLE_LENGTH,30],["92",re.VARIABLE_LENGTH,30],["93",re.VARIABLE_LENGTH,30],["94",re.VARIABLE_LENGTH,30],["95",re.VARIABLE_LENGTH,30],["96",re.VARIABLE_LENGTH,30],["97",re.VARIABLE_LENGTH,3],["98",re.VARIABLE_LENGTH,30],["99",re.VARIABLE_LENGTH,30]],re.THREE_DIGIT_DATA_LENGTH=[["240",re.VARIABLE_LENGTH,30],["241",re.VARIABLE_LENGTH,30],["242",re.VARIABLE_LENGTH,6],["250",re.VARIABLE_LENGTH,30],["251",re.VARIABLE_LENGTH,30],["253",re.VARIABLE_LENGTH,17],["254",re.VARIABLE_LENGTH,20],["400",re.VARIABLE_LENGTH,30],["401",re.VARIABLE_LENGTH,30],["402",17],["403",re.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",re.VARIABLE_LENGTH,20],["421",re.VARIABLE_LENGTH,15],["422",3],["423",re.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],re.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",re.VARIABLE_LENGTH,15],["391",re.VARIABLE_LENGTH,18],["392",re.VARIABLE_LENGTH,15],["393",re.VARIABLE_LENGTH,18],["703",re.VARIABLE_LENGTH,30]],re.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",re.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",re.VARIABLE_LENGTH,20],["8003",re.VARIABLE_LENGTH,30],["8004",re.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",re.VARIABLE_LENGTH,30],["8008",re.VARIABLE_LENGTH,12],["8018",18],["8020",re.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",re.VARIABLE_LENGTH,70],["8200",re.VARIABLE_LENGTH,70]];class wi{constructor(n){this.buffer=new ee,this.information=n}decodeAllCodes(n,i){let s=i,a=null;do{let l=this.decodeGeneralPurposeField(s,a),u=re.parseFieldsInGeneralPurpose(l.getNewString());if(u!=null&&n.append(u),l.isRemaining()?a=""+l.getRemainingValue():a=null,s===l.getNewPosition())break;s=l.getNewPosition()}while(!0);return n.toString()}isStillNumeric(n){if(n+7>this.information.getSize())return n+4<=this.information.getSize();for(let i=n;i<n+3;++i)if(this.information.get(i))return!0;return this.information.get(n+3)}decodeNumeric(n){if(n+7>this.information.getSize()){let l=this.extractNumericValueFromBitArray(n,4);return l===0?new xn(this.information.getSize(),xn.FNC1,xn.FNC1):new xn(this.information.getSize(),l-1,xn.FNC1)}let i=this.extractNumericValueFromBitArray(n,7),s=(i-8)/11,a=(i-8)%11;return new xn(n+7,s,a)}extractNumericValueFromBitArray(n,i){return wi.extractNumericValueFromBitArray(this.information,n,i)}static extractNumericValueFromBitArray(n,i,s){let a=0;for(let l=0;l<s;++l)n.get(i+l)&&(a|=1<<s-l-1);return a}decodeGeneralPurposeField(n,i){this.buffer.setLengthToZero(),i!=null&&this.buffer.append(i),this.current.setPosition(n);let s=this.parseBlocks();return s!=null&&s.isRemaining()?new $r(this.current.getPosition(),this.buffer.toString(),s.getRemainingValue()):new $r(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let n,i;do{let s=this.current.getPosition();if(this.current.isAlpha()?(i=this.parseAlphaBlock(),n=i.isFinished()):this.current.isIsoIec646()?(i=this.parseIsoIec646Block(),n=i.isFinished()):(i=this.parseNumericBlock(),n=i.isFinished()),!(s!==this.current.getPosition())&&!n)break}while(!n);return i.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let n=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(n.getNewPosition()),n.isFirstDigitFNC1()){let i;return n.isSecondDigitFNC1()?i=new $r(this.current.getPosition(),this.buffer.toString()):i=new $r(this.current.getPosition(),this.buffer.toString(),n.getSecondDigit()),new Xr(!0,i)}if(this.buffer.append(n.getFirstDigit()),n.isSecondDigitFNC1()){let i=new $r(this.current.getPosition(),this.buffer.toString());return new Xr(!0,i)}this.buffer.append(n.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Xr(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let n=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(n.getNewPosition()),n.isFNC1()){let i=new $r(this.current.getPosition(),this.buffer.toString());return new Xr(!0,i)}this.buffer.append(n.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Xr(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let n=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(n.getNewPosition()),n.isFNC1()){let i=new $r(this.current.getPosition(),this.buffer.toString());return new Xr(!0,i)}this.buffer.append(n.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Xr(!1)}isStillIsoIec646(n){if(n+5>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(n,5);if(i>=5&&i<16)return!0;if(n+7>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(n,7);if(s>=64&&s<116)return!0;if(n+8>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(n,8);return a>=232&&a<253}decodeIsoIec646(n){let i=this.extractNumericValueFromBitArray(n,5);if(i===15)return new Kt(n+5,Kt.FNC1);if(i>=5&&i<15)return new Kt(n+5,"0"+(i-5));let s=this.extractNumericValueFromBitArray(n,7);if(s>=64&&s<90)return new Kt(n+7,""+(s+1));if(s>=90&&s<116)return new Kt(n+7,""+(s+7));let a=this.extractNumericValueFromBitArray(n,8),l;switch(a){case 232:l="!";break;case 233:l='"';break;case 234:l="%";break;case 235:l="&";break;case 236:l="'";break;case 237:l="(";break;case 238:l=")";break;case 239:l="*";break;case 240:l="+";break;case 241:l=",";break;case 242:l="-";break;case 243:l=".";break;case 244:l="/";break;case 245:l=":";break;case 246:l=";";break;case 247:l="<";break;case 248:l="=";break;case 249:l=">";break;case 250:l="?";break;case 251:l="_";break;case 252:l=" ";break;default:throw new U}return new Kt(n+8,l)}isStillAlpha(n){if(n+5>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(n,5);if(i>=5&&i<16)return!0;if(n+6>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(n,6);return s>=16&&s<63}decodeAlphanumeric(n){let i=this.extractNumericValueFromBitArray(n,5);if(i===15)return new Kt(n+5,Kt.FNC1);if(i>=5&&i<15)return new Kt(n+5,"0"+(i-5));let s=this.extractNumericValueFromBitArray(n,6);if(s>=32&&s<58)return new Kt(n+6,""+(s+33));let a;switch(s){case 58:a="*";break;case 59:a=",";break;case 60:a="-";break;case 61:a=".";break;case 62:a="/";break;default:throw new Fn("Decoding invalid alphanumeric value: "+s)}return new Kt(n+6,a)}isAlphaTo646ToAlphaLatch(n){if(n+1>this.information.getSize())return!1;for(let i=0;i<5&&i+n<this.information.getSize();++i)if(i===2){if(!this.information.get(n+2))return!1}else if(this.information.get(n+i))return!1;return!0}isAlphaOr646ToNumericLatch(n){if(n+3>this.information.getSize())return!1;for(let i=n;i<n+3;++i)if(this.information.get(i))return!1;return!0}isNumericToAlphaNumericLatch(n){if(n+1>this.information.getSize())return!1;for(let i=0;i<4&&i+n<this.information.getSize();++i)if(this.information.get(n+i))return!1;return!0}}class yl{constructor(n){this.information=n,this.generalDecoder=new wi(n)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class qt extends yl{constructor(n){super(n)}encodeCompressedGtin(n,i){n.append("(01)");let s=n.length();n.append("9"),this.encodeCompressedGtinWithoutAI(n,i,s)}encodeCompressedGtinWithoutAI(n,i,s){for(let a=0;a<4;++a){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(i+10*a,10);l/100===0&&n.append("0"),l/10===0&&n.append("0"),n.append(l)}qt.appendCheckDigit(n,s)}static appendCheckDigit(n,i){let s=0;for(let a=0;a<13;a++){let l=n.charAt(a+i).charCodeAt(0)-48;s+=a&1?l:3*l}s=10-s%10,s===10&&(s=0),n.append(s)}}qt.GTIN_SIZE=40;class yi extends qt{constructor(n){super(n)}parseInformation(){let n=new ee;n.append("(01)");let i=n.length(),s=this.getGeneralDecoder().extractNumericValueFromBitArray(yi.HEADER_SIZE,4);return n.append(s),this.encodeCompressedGtinWithoutAI(n,yi.HEADER_SIZE+4,i),this.getGeneralDecoder().decodeAllCodes(n,yi.HEADER_SIZE+44)}}yi.HEADER_SIZE=4;class No extends yl{constructor(n){super(n)}parseInformation(){let n=new ee;return this.getGeneralDecoder().decodeAllCodes(n,No.HEADER_SIZE)}}No.HEADER_SIZE=5;class Oo extends qt{constructor(n){super(n)}encodeCompressedWeight(n,i,s){let a=this.getGeneralDecoder().extractNumericValueFromBitArray(i,s);this.addWeightCode(n,a);let l=this.checkWeight(a),u=1e5;for(let h=0;h<5;++h)l/u===0&&n.append("0"),u/=10;n.append(l)}}class Un extends Oo{constructor(n){super(n)}parseInformation(){if(this.getInformation().getSize()!=Un.HEADER_SIZE+Oo.GTIN_SIZE+Un.WEIGHT_SIZE)throw new W;let n=new ee;return this.encodeCompressedGtin(n,Un.HEADER_SIZE),this.encodeCompressedWeight(n,Un.HEADER_SIZE+Oo.GTIN_SIZE,Un.WEIGHT_SIZE),n.toString()}}Un.HEADER_SIZE=5,Un.WEIGHT_SIZE=15;class Cg extends Un{constructor(n){super(n)}addWeightCode(n,i){n.append("(3103)")}checkWeight(n){return n}}class _g extends Un{constructor(n){super(n)}addWeightCode(n,i){i<1e4?n.append("(3202)"):n.append("(3203)")}checkWeight(n){return n<1e4?n:n-1e4}}class Vn extends qt{constructor(n){super(n)}parseInformation(){if(this.getInformation().getSize()<Vn.HEADER_SIZE+qt.GTIN_SIZE)throw new W;let n=new ee;this.encodeCompressedGtin(n,Vn.HEADER_SIZE);let i=this.getGeneralDecoder().extractNumericValueFromBitArray(Vn.HEADER_SIZE+qt.GTIN_SIZE,Vn.LAST_DIGIT_SIZE);n.append("(392"),n.append(i),n.append(")");let s=this.getGeneralDecoder().decodeGeneralPurposeField(Vn.HEADER_SIZE+qt.GTIN_SIZE+Vn.LAST_DIGIT_SIZE,null);return n.append(s.getNewString()),n.toString()}}Vn.HEADER_SIZE=8,Vn.LAST_DIGIT_SIZE=2;class zt extends qt{constructor(n){super(n)}parseInformation(){if(this.getInformation().getSize()<zt.HEADER_SIZE+qt.GTIN_SIZE)throw new W;let n=new ee;this.encodeCompressedGtin(n,zt.HEADER_SIZE);let i=this.getGeneralDecoder().extractNumericValueFromBitArray(zt.HEADER_SIZE+qt.GTIN_SIZE,zt.LAST_DIGIT_SIZE);n.append("(393"),n.append(i),n.append(")");let s=this.getGeneralDecoder().extractNumericValueFromBitArray(zt.HEADER_SIZE+qt.GTIN_SIZE+zt.LAST_DIGIT_SIZE,zt.FIRST_THREE_DIGITS_SIZE);s/100==0&&n.append("0"),s/10==0&&n.append("0"),n.append(s);let a=this.getGeneralDecoder().decodeGeneralPurposeField(zt.HEADER_SIZE+qt.GTIN_SIZE+zt.LAST_DIGIT_SIZE+zt.FIRST_THREE_DIGITS_SIZE,null);return n.append(a.getNewString()),n.toString()}}zt.HEADER_SIZE=8,zt.LAST_DIGIT_SIZE=2,zt.FIRST_THREE_DIGITS_SIZE=10;class qe extends Oo{constructor(n,i,s){super(n),this.dateCode=s,this.firstAIdigits=i}parseInformation(){if(this.getInformation().getSize()!=qe.HEADER_SIZE+qe.GTIN_SIZE+qe.WEIGHT_SIZE+qe.DATE_SIZE)throw new W;let n=new ee;return this.encodeCompressedGtin(n,qe.HEADER_SIZE),this.encodeCompressedWeight(n,qe.HEADER_SIZE+qe.GTIN_SIZE,qe.WEIGHT_SIZE),this.encodeCompressedDate(n,qe.HEADER_SIZE+qe.GTIN_SIZE+qe.WEIGHT_SIZE),n.toString()}encodeCompressedDate(n,i){let s=this.getGeneralDecoder().extractNumericValueFromBitArray(i,qe.DATE_SIZE);if(s==38400)return;n.append("("),n.append(this.dateCode),n.append(")");let a=s%32;s/=32;let l=s%12+1;s/=12;let u=s;u/10==0&&n.append("0"),n.append(u),l/10==0&&n.append("0"),n.append(l),a/10==0&&n.append("0"),n.append(a)}addWeightCode(n,i){n.append("("),n.append(this.firstAIdigits),n.append(i/1e5),n.append(")")}checkWeight(n){return n%1e5}}qe.HEADER_SIZE=8,qe.WEIGHT_SIZE=20,qe.DATE_SIZE=16;function Td(v){try{if(v.get(1))return new yi(v);if(!v.get(2))return new No(v);switch(wi.extractNumericValueFromBitArray(v,1,4)){case 4:return new Cg(v);case 5:return new _g(v)}switch(wi.extractNumericValueFromBitArray(v,1,5)){case 12:return new Vn(v);case 13:return new zt(v)}switch(wi.extractNumericValueFromBitArray(v,1,7)){case 56:return new qe(v,"310","11");case 57:return new qe(v,"320","11");case 58:return new qe(v,"310","13");case 59:return new qe(v,"320","13");case 60:return new qe(v,"310","15");case 61:return new qe(v,"320","15");case 62:return new qe(v,"310","17");case 63:return new qe(v,"320","17")}}catch(n){throw console.log(n),new Fn("unknown decoder: "+v)}}class fr{constructor(n,i,s,a){this.leftchar=n,this.rightchar=i,this.finderpattern=s,this.maybeLast=a}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(n,i){return n instanceof fr?fr.equalsOrNull(n.leftchar,i.leftchar)&&fr.equalsOrNull(n.rightchar,i.rightchar)&&fr.equalsOrNull(n.finderpattern,i.finderpattern):!1}static equalsOrNull(n,i){return n===null?i===null:fr.equals(n,i)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class vl{constructor(n,i,s){this.pairs=n,this.rowNumber=i,this.wasReversed=s}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(n){return this.checkEqualitity(this,n)}toString(){return"{ "+this.pairs+" }"}equals(n,i){return n instanceof vl?this.checkEqualitity(n,i)&&n.wasReversed===i.wasReversed:!1}checkEqualitity(n,i){if(!n||!i)return;let s;return n.forEach((a,l)=>{i.forEach(u=>{a.getLeftChar().getValue()===u.getLeftChar().getValue()&&a.getRightChar().getValue()===u.getRightChar().getValue()&&a.getFinderPatter().getValue()===u.getFinderPatter().getValue()&&(s=!0)})}),s}}class $ extends Mt{constructor(n){super(...arguments),this.pairs=new Array($.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=n===!0}decodeRow(n,i,s){this.pairs.length=0,this.startFromEven=!1;try{return $.constructResult(this.decodeRow2pairs(n,i))}catch(a){this.verbose&&console.log(a)}return this.pairs.length=0,this.startFromEven=!0,$.constructResult(this.decodeRow2pairs(n,i))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(n,i){let s=!1;for(;!s;)try{this.pairs.push(this.retrieveNextPair(i,this.pairs,n))}catch(l){if(l instanceof W){if(!this.pairs.length)throw new W;s=!0}}if(this.checkChecksum())return this.pairs;let a;if(this.rows.length?a=!0:a=!1,this.storeRow(n,!1),a){let l=this.checkRowsBoolean(!1);if(l!=null||(l=this.checkRowsBoolean(!0),l!=null))return l}throw new W}checkRowsBoolean(n){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,n&&(this.rows=this.rows.reverse());let i=null;try{i=this.checkRows(new Array,0)}catch(s){this.verbose&&console.log(s)}return n&&(this.rows=this.rows.reverse()),i}checkRows(n,i){for(let s=i;s<this.rows.length;s++){let a=this.rows[s];this.pairs.length=0;for(let u of n)this.pairs.push(u.getPairs());if(this.pairs.push(a.getPairs()),!$.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let l=new Array(n);l.push(a);try{return this.checkRows(l,s+1)}catch(u){this.verbose&&console.log(u)}}throw new W}static isValidSequence(n){for(let i of $.FINDER_PATTERN_SEQUENCES){if(n.length>i.length)continue;let s=!0;for(let a=0;a<n.length;a++)if(n[a].getFinderPattern().getValue()!=i[a]){s=!1;break}if(s)return!0}return!1}storeRow(n,i){let s=0,a=!1,l=!1;for(;s<this.rows.length;){let u=this.rows[s];if(u.getRowNumber()>n){l=u.isEquivalent(this.pairs);break}a=u.isEquivalent(this.pairs),s++}l||a||$.isPartialRow(this.pairs,this.rows)||(this.rows.push(s,new vl(this.pairs,n,i)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(n,i){for(let s of i)if(s.getPairs().length!==n.length){for(let a of s.getPairs())for(let l of n)if(fr.equals(a,l))break}}static isPartialRow(n,i){for(let s of i){let a=!0;for(let l of n){let u=!1;for(let h of s.getPairs())if(l.equals(h)){u=!0;break}if(!u){a=!1;break}}if(a)return!0}return!1}getRows(){return this.rows}static constructResult(n){let i=Eg.buildBitArray(n),a=Td(i).parseInformation(),l=n[0].getFinderPattern().getResultPoints(),u=n[n.length-1].getFinderPattern().getResultPoints(),h=[l[0],l[1],u[0],u[1]];return new Je(a,null,null,h,ae.RSS_EXPANDED,null)}checkChecksum(){let n=this.pairs.get(0),i=n.getLeftChar(),s=n.getRightChar();if(s==null)return!1;let a=s.getChecksumPortion(),l=2;for(let h=1;h<this.pairs.size();++h){let g=this.pairs.get(h);a+=g.getLeftChar().getChecksumPortion(),l++;let p=g.getRightChar();p!=null&&(a+=p.getChecksumPortion(),l++)}return a%=211,211*(l-4)+a==i.getValue()}static getNextSecondBar(n,i){let s;return n.get(i)?(s=n.getNextUnset(i),s=n.getNextSet(s)):(s=n.getNextSet(i),s=n.getNextUnset(s)),s}retrieveNextPair(n,i,s){let a=i.length%2==0;this.startFromEven&&(a=!a);let l,u=!0,h=-1;do this.findNextPair(n,i,h),l=this.parseFoundFinderPattern(n,s,a),l==null?h=$.getNextSecondBar(n,this.startEnd[0]):u=!1;while(u);let g=this.decodeDataCharacter(n,l,a,!0);if(!this.isEmptyPair(i)&&i[i.length-1].mustBeLast())throw new W;let p;try{p=this.decodeDataCharacter(n,l,a,!1)}catch(y){p=null,this.verbose&&console.log(y)}return new fr(g,p,l,!0)}isEmptyPair(n){return n.length===0}findNextPair(n,i,s){let a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;let l=n.getSize(),u;s>=0?u=s:this.isEmptyPair(i)?u=0:u=i[i.length-1].getFinderPattern().getStartEnd()[1];let h=i.length%2!=0;this.startFromEven&&(h=!h);let g=!1;for(;u<l&&(g=!n.get(u),!!g);)u++;let p=0,y=u;for(let E=u;E<l;E++)if(n.get(E)!=g)a[p]++;else{if(p==3){if(h&&$.reverseCounters(a),$.isFinderPattern(a)){this.startEnd[0]=y,this.startEnd[1]=E;return}h&&$.reverseCounters(a),y+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,p--}else p++;a[p]=1,g=!g}throw new W}static reverseCounters(n){let i=n.length;for(let s=0;s<i/2;++s){let a=n[s];n[s]=n[i-s-1],n[i-s-1]=a}}parseFoundFinderPattern(n,i,s){let a,l,u;if(s){let p=this.startEnd[0]-1;for(;p>=0&&!n.get(p);)p--;p++,a=this.startEnd[0]-p,l=p,u=this.startEnd[1]}else l=this.startEnd[0],u=n.getNextUnset(this.startEnd[1]+1),a=u-this.startEnd[1];let h=this.getDecodeFinderCounters();F.arraycopy(h,0,h,1,h.length-1),h[0]=a;let g;try{g=this.parseFinderValue(h,$.FINDER_PATTERNS)}catch{return null}return new To(g,[l,u],l,u,i)}decodeDataCharacter(n,i,s,a){let l=this.getDataCharacterCounters();for(let Ue=0;Ue<l.length;Ue++)l[Ue]=0;if(a)$.recordPatternInReverse(n,i.getStartEnd()[0],l);else{$.recordPattern(n,i.getStartEnd()[1],l);for(let Ue=0,Ot=l.length-1;Ue<Ot;Ue++,Ot--){let an=l[Ue];l[Ue]=l[Ot],l[Ot]=an}}let u=17,h=Te.sum(new Int32Array(l))/u,g=(i.getStartEnd()[1]-i.getStartEnd()[0])/15;if(Math.abs(h-g)/g>.3)throw new W;let p=this.getOddCounts(),y=this.getEvenCounts(),E=this.getOddRoundingErrors(),A=this.getEvenRoundingErrors();for(let Ue=0;Ue<l.length;Ue++){let Ot=1*l[Ue]/h,an=Ot+.5;if(an<1){if(Ot<.3)throw new W;an=1}else if(an>8){if(Ot>8.7)throw new W;an=8}let Ai=Ue/2;Ue&1?(y[Ai]=an,A[Ai]=Ot-an):(p[Ai]=an,E[Ai]=Ot-an)}this.adjustOddEvenCounts(u);let T=4*i.getValue()+(s?0:2)+(a?0:1)-1,R=0,D=0;for(let Ue=p.length-1;Ue>=0;Ue--){if($.isNotA1left(i,s,a)){let Ot=$.WEIGHTS[T][2*Ue];D+=p[Ue]*Ot}R+=p[Ue]}let B=0;for(let Ue=y.length-1;Ue>=0;Ue--)if($.isNotA1left(i,s,a)){let Ot=$.WEIGHTS[T][2*Ue+1];B+=y[Ue]*Ot}let z=D+B;if(R&1||R>13||R<4)throw new W;let Z=(13-R)/2,Q=$.SYMBOL_WIDEST[Z],Y=9-Q,Se=jn.getRSSvalue(p,Q,!0),ye=jn.getRSSvalue(y,Y,!1),Qt=$.EVEN_TOTAL_SUBSET[Z],Tn=$.GSUM[Z],Jt=Se*Qt+ye+Tn;return new mi(Jt,z)}static isNotA1left(n,i,s){return!(n.getValue()==0&&i&&s)}adjustOddEvenCounts(n){let i=Te.sum(new Int32Array(this.getOddCounts())),s=Te.sum(new Int32Array(this.getEvenCounts())),a=!1,l=!1;i>13?l=!0:i<4&&(a=!0);let u=!1,h=!1;s>13?h=!0:s<4&&(u=!0);let g=i+s-n,p=(i&1)==1,y=(s&1)==0;if(g==1)if(p){if(y)throw new W;l=!0}else{if(!y)throw new W;h=!0}else if(g==-1)if(p){if(y)throw new W;a=!0}else{if(!y)throw new W;u=!0}else if(g==0){if(p){if(!y)throw new W;i<s?(a=!0,h=!0):(l=!0,u=!0)}else if(y)throw new W}else throw new W;if(a){if(l)throw new W;$.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(l&&$.decrement(this.getOddCounts(),this.getOddRoundingErrors()),u){if(h)throw new W;$.increment(this.getEvenCounts(),this.getOddRoundingErrors())}h&&$.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}$.SYMBOL_WIDEST=[7,5,4,3,1],$.EVEN_TOTAL_SUBSET=[4,20,52,104,204],$.GSUM=[0,348,1388,2948,3988],$.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],$.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],$.FINDER_PAT_A=0,$.FINDER_PAT_B=1,$.FINDER_PAT_C=2,$.FINDER_PAT_D=3,$.FINDER_PAT_E=4,$.FINDER_PAT_F=5,$.FINDER_PATTERN_SEQUENCES=[[$.FINDER_PAT_A,$.FINDER_PAT_A],[$.FINDER_PAT_A,$.FINDER_PAT_B,$.FINDER_PAT_B],[$.FINDER_PAT_A,$.FINDER_PAT_C,$.FINDER_PAT_B,$.FINDER_PAT_D],[$.FINDER_PAT_A,$.FINDER_PAT_E,$.FINDER_PAT_B,$.FINDER_PAT_D,$.FINDER_PAT_C],[$.FINDER_PAT_A,$.FINDER_PAT_E,$.FINDER_PAT_B,$.FINDER_PAT_D,$.FINDER_PAT_D,$.FINDER_PAT_F],[$.FINDER_PAT_A,$.FINDER_PAT_E,$.FINDER_PAT_B,$.FINDER_PAT_D,$.FINDER_PAT_E,$.FINDER_PAT_F,$.FINDER_PAT_F],[$.FINDER_PAT_A,$.FINDER_PAT_A,$.FINDER_PAT_B,$.FINDER_PAT_B,$.FINDER_PAT_C,$.FINDER_PAT_C,$.FINDER_PAT_D,$.FINDER_PAT_D],[$.FINDER_PAT_A,$.FINDER_PAT_A,$.FINDER_PAT_B,$.FINDER_PAT_B,$.FINDER_PAT_C,$.FINDER_PAT_C,$.FINDER_PAT_D,$.FINDER_PAT_E,$.FINDER_PAT_E],[$.FINDER_PAT_A,$.FINDER_PAT_A,$.FINDER_PAT_B,$.FINDER_PAT_B,$.FINDER_PAT_C,$.FINDER_PAT_C,$.FINDER_PAT_D,$.FINDER_PAT_E,$.FINDER_PAT_F,$.FINDER_PAT_F],[$.FINDER_PAT_A,$.FINDER_PAT_A,$.FINDER_PAT_B,$.FINDER_PAT_B,$.FINDER_PAT_C,$.FINDER_PAT_D,$.FINDER_PAT_D,$.FINDER_PAT_E,$.FINDER_PAT_E,$.FINDER_PAT_F,$.FINDER_PAT_F]],$.MAX_PAIRS=11;class Ag extends mi{constructor(n,i,s){super(n,i),this.count=0,this.finderPattern=s}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class ot extends Mt{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(n,i,s){const a=this.decodePair(i,!1,n,s);ot.addOrTally(this.possibleLeftPairs,a),i.reverse();let l=this.decodePair(i,!0,n,s);ot.addOrTally(this.possibleRightPairs,l),i.reverse();for(let u of this.possibleLeftPairs)if(u.getCount()>1){for(let h of this.possibleRightPairs)if(h.getCount()>1&&ot.checkChecksum(u,h))return ot.constructResult(u,h)}throw new W}static addOrTally(n,i){if(i==null)return;let s=!1;for(let a of n)if(a.getValue()===i.getValue()){a.incrementCount(),s=!0;break}s||n.push(i)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(n,i){let s=4537077*n.getValue()+i.getValue(),a=new String(s).toString(),l=new ee;for(let p=13-a.length;p>0;p--)l.append("0");l.append(a);let u=0;for(let p=0;p<13;p++){let y=l.charAt(p).charCodeAt(0)-48;u+=p&1?y:3*y}u=10-u%10,u===10&&(u=0),l.append(u.toString());let h=n.getFinderPattern().getResultPoints(),g=i.getFinderPattern().getResultPoints();return new Je(l.toString(),null,0,[h[0],h[1],g[0],g[1]],ae.RSS_14,new Date().getTime())}static checkChecksum(n,i){let s=(n.getChecksumPortion()+16*i.getChecksumPortion())%79,a=9*n.getFinderPattern().getValue()+i.getFinderPattern().getValue();return a>72&&a--,a>8&&a--,s===a}decodePair(n,i,s,a){try{let l=this.findFinderPattern(n,i),u=this.parseFoundFinderPattern(n,s,i,l),h=a==null?null:a.get(H.NEED_RESULT_POINT_CALLBACK);if(h!=null){let y=(l[0]+l[1])/2;i&&(y=n.getSize()-1-y),h.foundPossibleResultPoint(new oe(y,s))}let g=this.decodeDataCharacter(n,u,!0),p=this.decodeDataCharacter(n,u,!1);return new Ag(1597*g.getValue()+p.getValue(),g.getChecksumPortion()+4*p.getChecksumPortion(),u)}catch{return null}}decodeDataCharacter(n,i,s){let a=this.getDataCharacterCounters();for(let B=0;B<a.length;B++)a[B]=0;if(s)ht.recordPatternInReverse(n,i.getStartEnd()[0],a);else{ht.recordPattern(n,i.getStartEnd()[1]+1,a);for(let B=0,z=a.length-1;B<z;B++,z--){let Z=a[B];a[B]=a[z],a[z]=Z}}let l=s?16:15,u=Te.sum(new Int32Array(a))/l,h=this.getOddCounts(),g=this.getEvenCounts(),p=this.getOddRoundingErrors(),y=this.getEvenRoundingErrors();for(let B=0;B<a.length;B++){let z=a[B]/u,Z=Math.floor(z+.5);Z<1?Z=1:Z>8&&(Z=8);let Q=Math.floor(B/2);B&1?(g[Q]=Z,y[Q]=z-Z):(h[Q]=Z,p[Q]=z-Z)}this.adjustOddEvenCounts(s,l);let E=0,A=0;for(let B=h.length-1;B>=0;B--)A*=9,A+=h[B],E+=h[B];let T=0,R=0;for(let B=g.length-1;B>=0;B--)T*=9,T+=g[B],R+=g[B];let D=A+3*T;if(s){if(E&1||E>12||E<4)throw new W;let B=(12-E)/2,z=ot.OUTSIDE_ODD_WIDEST[B],Z=9-z,Q=jn.getRSSvalue(h,z,!1),Y=jn.getRSSvalue(g,Z,!0),Se=ot.OUTSIDE_EVEN_TOTAL_SUBSET[B],ye=ot.OUTSIDE_GSUM[B];return new mi(Q*Se+Y+ye,D)}else{if(R&1||R>10||R<4)throw new W;let B=(10-R)/2,z=ot.INSIDE_ODD_WIDEST[B],Z=9-z,Q=jn.getRSSvalue(h,z,!0),Y=jn.getRSSvalue(g,Z,!1),Se=ot.INSIDE_ODD_TOTAL_SUBSET[B],ye=ot.INSIDE_GSUM[B];return new mi(Y*Se+Q+ye,D)}}findFinderPattern(n,i){let s=this.getDecodeFinderCounters();s[0]=0,s[1]=0,s[2]=0,s[3]=0;let a=n.getSize(),l=!1,u=0;for(;u<a&&(l=!n.get(u),i!==l);)u++;let h=0,g=u;for(let p=u;p<a;p++)if(n.get(p)!==l)s[h]++;else{if(h===3){if(Mt.isFinderPattern(s))return[g,p];g+=s[0]+s[1],s[0]=s[2],s[1]=s[3],s[2]=0,s[3]=0,h--}else h++;s[h]=1,l=!l}throw new W}parseFoundFinderPattern(n,i,s,a){let l=n.get(a[0]),u=a[0]-1;for(;u>=0&&l!==n.get(u);)u--;u++;const h=a[0]-u,g=this.getDecodeFinderCounters(),p=new Int32Array(g.length);F.arraycopy(g,0,p,1,g.length-1),p[0]=h;const y=this.parseFinderValue(p,ot.FINDER_PATTERNS);let E=u,A=a[1];return s&&(E=n.getSize()-1-E,A=n.getSize()-1-A),new To(y,[u,a[1]],E,A,i)}adjustOddEvenCounts(n,i){let s=Te.sum(new Int32Array(this.getOddCounts())),a=Te.sum(new Int32Array(this.getEvenCounts())),l=!1,u=!1,h=!1,g=!1;n?(s>12?u=!0:s<4&&(l=!0),a>12?g=!0:a<4&&(h=!0)):(s>11?u=!0:s<5&&(l=!0),a>10?g=!0:a<4&&(h=!0));let p=s+a-i,y=(s&1)===(n?1:0),E=(a&1)===1;if(p===1)if(y){if(E)throw new W;u=!0}else{if(!E)throw new W;g=!0}else if(p===-1)if(y){if(E)throw new W;l=!0}else{if(!E)throw new W;h=!0}else if(p===0){if(y){if(!E)throw new W;s<a?(l=!0,g=!0):(u=!0,h=!0)}else if(E)throw new W}else throw new W;if(l){if(u)throw new W;Mt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(u&&Mt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),h){if(g)throw new W;Mt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}g&&Mt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ot.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],ot.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],ot.OUTSIDE_GSUM=[0,161,961,2015,2715],ot.INSIDE_GSUM=[0,336,1036,1516],ot.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],ot.INSIDE_ODD_WIDEST=[2,4,6,8],ot.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class vi extends ht{constructor(n,i){super(),this.readers=[],this.verbose=i===!0;const s=n?n.get(H.POSSIBLE_FORMATS):null,a=n&&n.get(H.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;s?((s.includes(ae.EAN_13)||s.includes(ae.UPC_A)||s.includes(ae.EAN_8)||s.includes(ae.UPC_E))&&this.readers.push(new ml(n)),s.includes(ae.CODE_39)&&this.readers.push(new pt(a)),s.includes(ae.CODE_128)&&this.readers.push(new te),s.includes(ae.ITF)&&this.readers.push(new Fe),s.includes(ae.RSS_14)&&this.readers.push(new ot),s.includes(ae.RSS_EXPANDED)&&this.readers.push(new $(this.verbose))):(this.readers.push(new ml(n)),this.readers.push(new pt),this.readers.push(new ml(n)),this.readers.push(new te),this.readers.push(new Fe),this.readers.push(new ot),this.readers.push(new $(this.verbose)))}decodeRow(n,i,s){for(let a=0;a<this.readers.length;a++)try{return this.readers[a].decodeRow(n,i,s)}catch{}throw new W}reset(){this.readers.forEach(n=>n.reset())}}class Sg extends pn{constructor(n=500,i){super(new vi(i),n,i)}}class Pe{constructor(n,i,s){this.ecCodewords=n,this.ecBlocks=[i],s&&this.ecBlocks.push(s)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class De{constructor(n,i){this.count=n,this.dataCodewords=i}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class be{constructor(n,i,s,a,l,u){this.versionNumber=n,this.symbolSizeRows=i,this.symbolSizeColumns=s,this.dataRegionSizeRows=a,this.dataRegionSizeColumns=l,this.ecBlocks=u;let h=0;const g=u.getECCodewords(),p=u.getECBlocks();for(let y of p)h+=y.getCount()*(y.getDataCodewords()+g);this.totalCodewords=h}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(n,i){if(n&1||i&1)throw new U;for(let s of be.VERSIONS)if(s.symbolSizeRows===n&&s.symbolSizeColumns===i)return s;throw new U}toString(){return""+this.versionNumber}static buildVersions(){return[new be(1,10,10,8,8,new Pe(5,new De(1,3))),new be(2,12,12,10,10,new Pe(7,new De(1,5))),new be(3,14,14,12,12,new Pe(10,new De(1,8))),new be(4,16,16,14,14,new Pe(12,new De(1,12))),new be(5,18,18,16,16,new Pe(14,new De(1,18))),new be(6,20,20,18,18,new Pe(18,new De(1,22))),new be(7,22,22,20,20,new Pe(20,new De(1,30))),new be(8,24,24,22,22,new Pe(24,new De(1,36))),new be(9,26,26,24,24,new Pe(28,new De(1,44))),new be(10,32,32,14,14,new Pe(36,new De(1,62))),new be(11,36,36,16,16,new Pe(42,new De(1,86))),new be(12,40,40,18,18,new Pe(48,new De(1,114))),new be(13,44,44,20,20,new Pe(56,new De(1,144))),new be(14,48,48,22,22,new Pe(68,new De(1,174))),new be(15,52,52,24,24,new Pe(42,new De(2,102))),new be(16,64,64,14,14,new Pe(56,new De(2,140))),new be(17,72,72,16,16,new Pe(36,new De(4,92))),new be(18,80,80,18,18,new Pe(48,new De(4,114))),new be(19,88,88,20,20,new Pe(56,new De(4,144))),new be(20,96,96,22,22,new Pe(68,new De(4,174))),new be(21,104,104,24,24,new Pe(56,new De(6,136))),new be(22,120,120,18,18,new Pe(68,new De(6,175))),new be(23,132,132,20,20,new Pe(62,new De(8,163))),new be(24,144,144,22,22,new Pe(62,new De(8,156),new De(2,155))),new be(25,8,18,6,16,new Pe(7,new De(1,5))),new be(26,8,32,6,14,new Pe(11,new De(1,10))),new be(27,12,26,10,24,new Pe(14,new De(1,16))),new be(28,12,36,10,16,new Pe(18,new De(1,22))),new be(29,16,36,14,16,new Pe(24,new De(1,32))),new be(30,16,48,14,22,new Pe(28,new De(1,49)))]}}be.VERSIONS=be.buildVersions();class El{constructor(n){const i=n.getHeight();if(i<8||i>144||i&1)throw new U;this.version=El.readVersion(n),this.mappingBitMatrix=this.extractDataRegion(n),this.readMappingMatrix=new pe(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(n){const i=n.getHeight(),s=n.getWidth();return be.getVersionForDimensions(i,s)}readCodewords(){const n=new Int8Array(this.version.getTotalCodewords());let i=0,s=4,a=0;const l=this.mappingBitMatrix.getHeight(),u=this.mappingBitMatrix.getWidth();let h=!1,g=!1,p=!1,y=!1;do if(s===l&&a===0&&!h)n[i++]=this.readCorner1(l,u)&255,s-=2,a+=2,h=!0;else if(s===l-2&&a===0&&u&3&&!g)n[i++]=this.readCorner2(l,u)&255,s-=2,a+=2,g=!0;else if(s===l+4&&a===2&&!(u&7)&&!p)n[i++]=this.readCorner3(l,u)&255,s-=2,a+=2,p=!0;else if(s===l-2&&a===0&&(u&7)===4&&!y)n[i++]=this.readCorner4(l,u)&255,s-=2,a+=2,y=!0;else{do s<l&&a>=0&&!this.readMappingMatrix.get(a,s)&&(n[i++]=this.readUtah(s,a,l,u)&255),s-=2,a+=2;while(s>=0&&a<u);s+=1,a+=3;do s>=0&&a<u&&!this.readMappingMatrix.get(a,s)&&(n[i++]=this.readUtah(s,a,l,u)&255),s+=2,a-=2;while(s<l&&a>=0);s+=3,a+=1}while(s<l||a<u);if(i!==this.version.getTotalCodewords())throw new U;return n}readModule(n,i,s,a){return n<0&&(n+=s,i+=4-(s+4&7)),i<0&&(i+=a,n+=4-(a+4&7)),this.readMappingMatrix.set(i,n),this.mappingBitMatrix.get(i,n)}readUtah(n,i,s,a){let l=0;return this.readModule(n-2,i-2,s,a)&&(l|=1),l<<=1,this.readModule(n-2,i-1,s,a)&&(l|=1),l<<=1,this.readModule(n-1,i-2,s,a)&&(l|=1),l<<=1,this.readModule(n-1,i-1,s,a)&&(l|=1),l<<=1,this.readModule(n-1,i,s,a)&&(l|=1),l<<=1,this.readModule(n,i-2,s,a)&&(l|=1),l<<=1,this.readModule(n,i-1,s,a)&&(l|=1),l<<=1,this.readModule(n,i,s,a)&&(l|=1),l}readCorner1(n,i){let s=0;return this.readModule(n-1,0,n,i)&&(s|=1),s<<=1,this.readModule(n-1,1,n,i)&&(s|=1),s<<=1,this.readModule(n-1,2,n,i)&&(s|=1),s<<=1,this.readModule(0,i-2,n,i)&&(s|=1),s<<=1,this.readModule(0,i-1,n,i)&&(s|=1),s<<=1,this.readModule(1,i-1,n,i)&&(s|=1),s<<=1,this.readModule(2,i-1,n,i)&&(s|=1),s<<=1,this.readModule(3,i-1,n,i)&&(s|=1),s}readCorner2(n,i){let s=0;return this.readModule(n-3,0,n,i)&&(s|=1),s<<=1,this.readModule(n-2,0,n,i)&&(s|=1),s<<=1,this.readModule(n-1,0,n,i)&&(s|=1),s<<=1,this.readModule(0,i-4,n,i)&&(s|=1),s<<=1,this.readModule(0,i-3,n,i)&&(s|=1),s<<=1,this.readModule(0,i-2,n,i)&&(s|=1),s<<=1,this.readModule(0,i-1,n,i)&&(s|=1),s<<=1,this.readModule(1,i-1,n,i)&&(s|=1),s}readCorner3(n,i){let s=0;return this.readModule(n-1,0,n,i)&&(s|=1),s<<=1,this.readModule(n-1,i-1,n,i)&&(s|=1),s<<=1,this.readModule(0,i-3,n,i)&&(s|=1),s<<=1,this.readModule(0,i-2,n,i)&&(s|=1),s<<=1,this.readModule(0,i-1,n,i)&&(s|=1),s<<=1,this.readModule(1,i-3,n,i)&&(s|=1),s<<=1,this.readModule(1,i-2,n,i)&&(s|=1),s<<=1,this.readModule(1,i-1,n,i)&&(s|=1),s}readCorner4(n,i){let s=0;return this.readModule(n-3,0,n,i)&&(s|=1),s<<=1,this.readModule(n-2,0,n,i)&&(s|=1),s<<=1,this.readModule(n-1,0,n,i)&&(s|=1),s<<=1,this.readModule(0,i-2,n,i)&&(s|=1),s<<=1,this.readModule(0,i-1,n,i)&&(s|=1),s<<=1,this.readModule(1,i-1,n,i)&&(s|=1),s<<=1,this.readModule(2,i-1,n,i)&&(s|=1),s<<=1,this.readModule(3,i-1,n,i)&&(s|=1),s}extractDataRegion(n){const i=this.version.getSymbolSizeRows(),s=this.version.getSymbolSizeColumns();if(n.getHeight()!==i)throw new _("Dimension of bitMatrix must match the version size");const a=this.version.getDataRegionSizeRows(),l=this.version.getDataRegionSizeColumns(),u=i/a|0,h=s/l|0,g=u*a,p=h*l,y=new pe(p,g);for(let E=0;E<u;++E){const A=E*a;for(let T=0;T<h;++T){const R=T*l;for(let D=0;D<a;++D){const B=E*(a+2)+1+D,z=A+D;for(let Z=0;Z<l;++Z){const Q=T*(l+2)+1+Z;if(n.get(Q,B)){const Y=R+Z;y.set(Y,z)}}}}}return y}}class Cl{constructor(n,i){this.numDataCodewords=n,this.codewords=i}static getDataBlocks(n,i){const s=i.getECBlocks();let a=0;const l=s.getECBlocks();for(let D of l)a+=D.getCount();const u=new Array(a);let h=0;for(let D of l)for(let B=0;B<D.getCount();B++){const z=D.getDataCodewords(),Z=s.getECCodewords()+z;u[h++]=new Cl(z,new Uint8Array(Z))}const p=u[0].codewords.length-s.getECCodewords(),y=p-1;let E=0;for(let D=0;D<y;D++)for(let B=0;B<h;B++)u[B].codewords[D]=n[E++];const A=i.getVersionNumber()===24,T=A?8:h;for(let D=0;D<T;D++)u[D].codewords[p-1]=n[E++];const R=u[0].codewords.length;for(let D=p;D<R;D++)for(let B=0;B<h;B++){const z=A?(B+8)%h:B,Z=A&&z>7?D-1:D;u[z].codewords[Z]=n[E++]}if(E!==n.length)throw new _;return u}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class _l{constructor(n){this.bytes=n,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(n){if(n<1||n>32||n>this.available())throw new _(""+n);let i=0,s=this.bitOffset,a=this.byteOffset;const l=this.bytes;if(s>0){const u=8-s,h=n<u?n:u,g=u-h,p=255>>8-h<<g;i=(l[a]&p)>>g,n-=h,s+=h,s===8&&(s=0,a++)}if(n>0){for(;n>=8;)i=i<<8|l[a]&255,a++,n-=8;if(n>0){const u=8-n,h=255>>u<<u;i=i<<n|(l[a]&h)>>u,s+=n}}return this.bitOffset=s,this.byteOffset=a,i}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var xt;(function(v){v[v.PAD_ENCODE=0]="PAD_ENCODE",v[v.ASCII_ENCODE=1]="ASCII_ENCODE",v[v.C40_ENCODE=2]="C40_ENCODE",v[v.TEXT_ENCODE=3]="TEXT_ENCODE",v[v.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",v[v.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",v[v.BASE256_ENCODE=6]="BASE256_ENCODE"})(xt||(xt={}));class gr{static decode(n){const i=new _l(n),s=new ee,a=new ee,l=new Array;let u=xt.ASCII_ENCODE;do if(u===xt.ASCII_ENCODE)u=this.decodeAsciiSegment(i,s,a);else{switch(u){case xt.C40_ENCODE:this.decodeC40Segment(i,s);break;case xt.TEXT_ENCODE:this.decodeTextSegment(i,s);break;case xt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(i,s);break;case xt.EDIFACT_ENCODE:this.decodeEdifactSegment(i,s);break;case xt.BASE256_ENCODE:this.decodeBase256Segment(i,s,l);break;default:throw new U}u=xt.ASCII_ENCODE}while(u!==xt.PAD_ENCODE&&i.available()>0);return a.length()>0&&s.append(a.toString()),new hs(n,s.toString(),l.length===0?null:l,null)}static decodeAsciiSegment(n,i,s){let a=!1;do{let l=n.readBits(8);if(l===0)throw new U;if(l<=128)return a&&(l+=128),i.append(String.fromCharCode(l-1)),xt.ASCII_ENCODE;if(l===129)return xt.PAD_ENCODE;if(l<=229){const u=l-130;u<10&&i.append("0"),i.append(""+u)}else switch(l){case 230:return xt.C40_ENCODE;case 231:return xt.BASE256_ENCODE;case 232:i.append("");break;case 233:case 234:break;case 235:a=!0;break;case 236:i.append("[)>05"),s.insert(0,"");break;case 237:i.append("[)>06"),s.insert(0,"");break;case 238:return xt.ANSIX12_ENCODE;case 239:return xt.TEXT_ENCODE;case 240:return xt.EDIFACT_ENCODE;case 241:break;default:if(l!==254||n.available()!==0)throw new U;break}}while(n.available()>0);return xt.ASCII_ENCODE}static decodeC40Segment(n,i){let s=!1;const a=[];let l=0;do{if(n.available()===8)return;const u=n.readBits(8);if(u===254)return;this.parseTwoBytes(u,n.readBits(8),a);for(let h=0;h<3;h++){const g=a[h];switch(l){case 0:if(g<3)l=g+1;else if(g<this.C40_BASIC_SET_CHARS.length){const p=this.C40_BASIC_SET_CHARS[g];s?(i.append(String.fromCharCode(p.charCodeAt(0)+128)),s=!1):i.append(p)}else throw new U;break;case 1:s?(i.append(String.fromCharCode(g+128)),s=!1):i.append(String.fromCharCode(g)),l=0;break;case 2:if(g<this.C40_SHIFT2_SET_CHARS.length){const p=this.C40_SHIFT2_SET_CHARS[g];s?(i.append(String.fromCharCode(p.charCodeAt(0)+128)),s=!1):i.append(p)}else switch(g){case 27:i.append("");break;case 30:s=!0;break;default:throw new U}l=0;break;case 3:s?(i.append(String.fromCharCode(g+224)),s=!1):i.append(String.fromCharCode(g+96)),l=0;break;default:throw new U}}}while(n.available()>0)}static decodeTextSegment(n,i){let s=!1,a=[],l=0;do{if(n.available()===8)return;const u=n.readBits(8);if(u===254)return;this.parseTwoBytes(u,n.readBits(8),a);for(let h=0;h<3;h++){const g=a[h];switch(l){case 0:if(g<3)l=g+1;else if(g<this.TEXT_BASIC_SET_CHARS.length){const p=this.TEXT_BASIC_SET_CHARS[g];s?(i.append(String.fromCharCode(p.charCodeAt(0)+128)),s=!1):i.append(p)}else throw new U;break;case 1:s?(i.append(String.fromCharCode(g+128)),s=!1):i.append(String.fromCharCode(g)),l=0;break;case 2:if(g<this.TEXT_SHIFT2_SET_CHARS.length){const p=this.TEXT_SHIFT2_SET_CHARS[g];s?(i.append(String.fromCharCode(p.charCodeAt(0)+128)),s=!1):i.append(p)}else switch(g){case 27:i.append("");break;case 30:s=!0;break;default:throw new U}l=0;break;case 3:if(g<this.TEXT_SHIFT3_SET_CHARS.length){const p=this.TEXT_SHIFT3_SET_CHARS[g];s?(i.append(String.fromCharCode(p.charCodeAt(0)+128)),s=!1):i.append(p),l=0}else throw new U;break;default:throw new U}}}while(n.available()>0)}static decodeAnsiX12Segment(n,i){const s=[];do{if(n.available()===8)return;const a=n.readBits(8);if(a===254)return;this.parseTwoBytes(a,n.readBits(8),s);for(let l=0;l<3;l++){const u=s[l];switch(u){case 0:i.append("\r");break;case 1:i.append("*");break;case 2:i.append(">");break;case 3:i.append(" ");break;default:if(u<14)i.append(String.fromCharCode(u+44));else if(u<40)i.append(String.fromCharCode(u+51));else throw new U;break}}}while(n.available()>0)}static parseTwoBytes(n,i,s){let a=(n<<8)+i-1,l=Math.floor(a/1600);s[0]=l,a-=l*1600,l=Math.floor(a/40),s[1]=l,s[2]=a-l*40}static decodeEdifactSegment(n,i){do{if(n.available()<=16)return;for(let s=0;s<4;s++){let a=n.readBits(6);if(a===31){const l=8-n.getBitOffset();l!==8&&n.readBits(l);return}a&32||(a|=64),i.append(String.fromCharCode(a))}}while(n.available()>0)}static decodeBase256Segment(n,i,s){let a=1+n.getByteOffset();const l=this.unrandomize255State(n.readBits(8),a++);let u;if(l===0?u=n.available()/8|0:l<250?u=l:u=250*(l-249)+this.unrandomize255State(n.readBits(8),a++),u<0)throw new U;const h=new Uint8Array(u);for(let g=0;g<u;g++){if(n.available()<8)throw new U;h[g]=this.unrandomize255State(n.readBits(8),a++)}s.push(h);try{i.append(Le.decode(h,ce.ISO88591))}catch(g){throw new Fn("Platform does not support required encoding: "+g.message)}}static unrandomize255State(n,i){const s=149*i%255+1,a=n-s;return a>=0?a:a+256}}gr.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],gr.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],gr.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],gr.TEXT_SHIFT2_SET_CHARS=gr.C40_SHIFT2_SET_CHARS,gr.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class bg{constructor(){this.rsDecoder=new gs(Re.DATA_MATRIX_FIELD_256)}decode(n){const i=new El(n),s=i.getVersion(),a=i.readCodewords(),l=Cl.getDataBlocks(a,s);let u=0;for(let p of l)u+=p.getNumDataCodewords();const h=new Uint8Array(u),g=l.length;for(let p=0;p<g;p++){const y=l[p],E=y.getCodewords(),A=y.getNumDataCodewords();this.correctErrors(E,A);for(let T=0;T<A;T++)h[T*g+p]=E[T]}return gr.decode(h)}correctErrors(n,i){const s=new Int32Array(n);try{this.rsDecoder.decode(s,n.length-i)}catch{throw new P}for(let a=0;a<i;a++)n[a]=s[a]}}class ut{constructor(n){this.image=n,this.rectangleDetector=new Zn(this.image)}detect(){const n=this.rectangleDetector.detect();let i=this.detectSolid1(n);if(i=this.detectSolid2(i),i[3]=this.correctTopRight(i),!i[3])throw new W;i=this.shiftToModuleCenter(i);const s=i[0],a=i[1],l=i[2],u=i[3];let h=this.transitionsBetween(s,u)+1,g=this.transitionsBetween(l,u)+1;(h&1)===1&&(h+=1),(g&1)===1&&(g+=1),4*h<7*g&&4*g<7*h&&(h=g=Math.max(h,g));let p=ut.sampleGrid(this.image,s,a,l,u,h,g);return new bo(p,[s,a,l,u])}static shiftPoint(n,i,s){let a=(i.getX()-n.getX())/(s+1),l=(i.getY()-n.getY())/(s+1);return new oe(n.getX()+a,n.getY()+l)}static moveAway(n,i,s){let a=n.getX(),l=n.getY();return a<i?a-=1:a+=1,l<s?l-=1:l+=1,new oe(a,l)}detectSolid1(n){let i=n[0],s=n[1],a=n[3],l=n[2],u=this.transitionsBetween(i,s),h=this.transitionsBetween(s,a),g=this.transitionsBetween(a,l),p=this.transitionsBetween(l,i),y=u,E=[l,i,s,a];return y>h&&(y=h,E[0]=i,E[1]=s,E[2]=a,E[3]=l),y>g&&(y=g,E[0]=s,E[1]=a,E[2]=l,E[3]=i),y>p&&(E[0]=a,E[1]=l,E[2]=i,E[3]=s),E}detectSolid2(n){let i=n[0],s=n[1],a=n[2],l=n[3],u=this.transitionsBetween(i,l),h=ut.shiftPoint(s,a,(u+1)*4),g=ut.shiftPoint(a,s,(u+1)*4),p=this.transitionsBetween(h,i),y=this.transitionsBetween(g,l);return p<y?(n[0]=i,n[1]=s,n[2]=a,n[3]=l):(n[0]=s,n[1]=a,n[2]=l,n[3]=i),n}correctTopRight(n){let i=n[0],s=n[1],a=n[2],l=n[3],u=this.transitionsBetween(i,l),h=this.transitionsBetween(s,l),g=ut.shiftPoint(i,s,(h+1)*4),p=ut.shiftPoint(a,s,(u+1)*4);u=this.transitionsBetween(g,l),h=this.transitionsBetween(p,l);let y=new oe(l.getX()+(a.getX()-s.getX())/(u+1),l.getY()+(a.getY()-s.getY())/(u+1)),E=new oe(l.getX()+(i.getX()-s.getX())/(h+1),l.getY()+(i.getY()-s.getY())/(h+1));if(!this.isValid(y))return this.isValid(E)?E:null;if(!this.isValid(E))return y;let A=this.transitionsBetween(g,y)+this.transitionsBetween(p,y),T=this.transitionsBetween(g,E)+this.transitionsBetween(p,E);return A>T?y:E}shiftToModuleCenter(n){let i=n[0],s=n[1],a=n[2],l=n[3],u=this.transitionsBetween(i,l)+1,h=this.transitionsBetween(a,l)+1,g=ut.shiftPoint(i,s,h*4),p=ut.shiftPoint(a,s,u*4);u=this.transitionsBetween(g,l)+1,h=this.transitionsBetween(p,l)+1,(u&1)===1&&(u+=1),(h&1)===1&&(h+=1);let y=(i.getX()+s.getX()+a.getX()+l.getX())/4,E=(i.getY()+s.getY()+a.getY()+l.getY())/4;i=ut.moveAway(i,y,E),s=ut.moveAway(s,y,E),a=ut.moveAway(a,y,E),l=ut.moveAway(l,y,E);let A,T;return g=ut.shiftPoint(i,s,h*4),g=ut.shiftPoint(g,l,u*4),A=ut.shiftPoint(s,i,h*4),A=ut.shiftPoint(A,a,u*4),p=ut.shiftPoint(a,l,h*4),p=ut.shiftPoint(p,s,u*4),T=ut.shiftPoint(l,a,h*4),T=ut.shiftPoint(T,i,u*4),[g,A,p,T]}isValid(n){return n.getX()>=0&&n.getX()<this.image.getWidth()&&n.getY()>0&&n.getY()<this.image.getHeight()}static sampleGrid(n,i,s,a,l,u,h){return hr.getInstance().sampleGrid(n,u,h,.5,.5,u-.5,.5,u-.5,h-.5,.5,h-.5,i.getX(),i.getY(),l.getX(),l.getY(),a.getX(),a.getY(),s.getX(),s.getY())}transitionsBetween(n,i){let s=Math.trunc(n.getX()),a=Math.trunc(n.getY()),l=Math.trunc(i.getX()),u=Math.trunc(i.getY()),h=Math.abs(u-a)>Math.abs(l-s);if(h){let D=s;s=a,a=D,D=l,l=u,u=D}let g=Math.abs(l-s),p=Math.abs(u-a),y=-g/2,E=a<u?1:-1,A=s<l?1:-1,T=0,R=this.image.get(h?a:s,h?s:a);for(let D=s,B=a;D!==l;D+=A){let z=this.image.get(h?B:D,h?D:B);if(z!==R&&(T++,R=z),y+=p,y>0){if(B===u)break;B+=E,y-=g}}return T}}class pr{constructor(){this.decoder=new bg}decode(n,i=null){let s,a;if(i!=null&&i.has(H.PURE_BARCODE)){const p=pr.extractPureBits(n.getBlackMatrix());s=this.decoder.decode(p),a=pr.NO_POINTS}else{const p=new ut(n.getBlackMatrix()).detect();s=this.decoder.decode(p.getBits()),a=p.getPoints()}const l=s.getRawBytes(),u=new Je(s.getText(),l,8*l.length,a,ae.DATA_MATRIX,F.currentTimeMillis()),h=s.getByteSegments();h!=null&&u.putMetadata(Ct.BYTE_SEGMENTS,h);const g=s.getECLevel();return g!=null&&u.putMetadata(Ct.ERROR_CORRECTION_LEVEL,g),u}reset(){}static extractPureBits(n){const i=n.getTopLeftOnBit(),s=n.getBottomRightOnBit();if(i==null||s==null)throw new W;const a=this.moduleSize(i,n);let l=i[1];const u=s[1];let h=i[0];const p=(s[0]-h+1)/a,y=(u-l+1)/a;if(p<=0||y<=0)throw new W;const E=a/2;l+=E,h+=E;const A=new pe(p,y);for(let T=0;T<y;T++){const R=l+T*a;for(let D=0;D<p;D++)n.get(h+D*a,R)&&A.set(D,T)}return A}static moduleSize(n,i){const s=i.getWidth();let a=n[0];const l=n[1];for(;a<s&&i.get(a,l);)a++;if(a===s)throw new W;const u=a-n[0];if(u===0)throw new W;return u}}pr.NO_POINTS=[];class Ig extends pn{constructor(n=500){super(new pr,n)}}var Ei;(function(v){v[v.L=0]="L",v[v.M=1]="M",v[v.Q=2]="Q",v[v.H=3]="H"})(Ei||(Ei={}));class ze{constructor(n,i,s){this.value=n,this.stringValue=i,this.bits=s,ze.FOR_BITS.set(s,this),ze.FOR_VALUE.set(n,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(n){switch(n){case"L":return ze.L;case"M":return ze.M;case"Q":return ze.Q;case"H":return ze.H;default:throw new C(n+"not available")}}toString(){return this.stringValue}equals(n){if(!(n instanceof ze))return!1;const i=n;return this.value===i.value}static forBits(n){if(n<0||n>=ze.FOR_BITS.size)throw new _;return ze.FOR_BITS.get(n)}}ze.FOR_BITS=new Map,ze.FOR_VALUE=new Map,ze.L=new ze(Ei.L,"L",1),ze.M=new ze(Ei.M,"M",0),ze.Q=new ze(Ei.Q,"Q",3),ze.H=new ze(Ei.H,"H",2);class Lt{constructor(n){this.errorCorrectionLevel=ze.forBits(n>>3&3),this.dataMask=n&7}static numBitsDiffering(n,i){return b.bitCount(n^i)}static decodeFormatInformation(n,i){const s=Lt.doDecodeFormatInformation(n,i);return s!==null?s:Lt.doDecodeFormatInformation(n^Lt.FORMAT_INFO_MASK_QR,i^Lt.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(n,i){let s=Number.MAX_SAFE_INTEGER,a=0;for(const l of Lt.FORMAT_INFO_DECODE_LOOKUP){const u=l[0];if(u===n||u===i)return new Lt(l[1]);let h=Lt.numBitsDiffering(n,u);h<s&&(a=l[1],s=h),n!==i&&(h=Lt.numBitsDiffering(i,u),h<s&&(a=l[1],s=h))}return s<=3?new Lt(a):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(n){if(!(n instanceof Lt))return!1;const i=n;return this.errorCorrectionLevel===i.errorCorrectionLevel&&this.dataMask===i.dataMask}}Lt.FORMAT_INFO_MASK_QR=21522,Lt.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class j{constructor(n,...i){this.ecCodewordsPerBlock=n,this.ecBlocks=i}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let n=0;const i=this.ecBlocks;for(const s of i)n+=s.getCount();return n}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class I{constructor(n,i){this.count=n,this.dataCodewords=i}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class le{constructor(n,i,...s){this.versionNumber=n,this.alignmentPatternCenters=i,this.ecBlocks=s;let a=0;const l=s[0].getECCodewordsPerBlock(),u=s[0].getECBlocks();for(const h of u)a+=h.getCount()*(h.getDataCodewords()+l);this.totalCodewords=a}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(n){return this.ecBlocks[n.getValue()]}static getProvisionalVersionForDimension(n){if(n%4!==1)throw new U;try{return this.getVersionForNumber((n-17)/4)}catch{throw new U}}static getVersionForNumber(n){if(n<1||n>40)throw new _;return le.VERSIONS[n-1]}static decodeVersionInformation(n){let i=Number.MAX_SAFE_INTEGER,s=0;for(let a=0;a<le.VERSION_DECODE_INFO.length;a++){const l=le.VERSION_DECODE_INFO[a];if(l===n)return le.getVersionForNumber(a+7);const u=Lt.numBitsDiffering(n,l);u<i&&(s=a+7,i=u)}return i<=3?le.getVersionForNumber(s):null}buildFunctionPattern(){const n=this.getDimensionForVersion(),i=new pe(n);i.setRegion(0,0,9,9),i.setRegion(n-8,0,8,9),i.setRegion(0,n-8,9,8);const s=this.alignmentPatternCenters.length;for(let a=0;a<s;a++){const l=this.alignmentPatternCenters[a]-2;for(let u=0;u<s;u++)a===0&&(u===0||u===s-1)||a===s-1&&u===0||i.setRegion(this.alignmentPatternCenters[u]-2,l,5,5)}return i.setRegion(6,9,1,n-17),i.setRegion(9,6,n-17,1),this.versionNumber>6&&(i.setRegion(n-11,0,3,6),i.setRegion(0,n-11,6,3)),i}toString(){return""+this.versionNumber}}le.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),le.VERSIONS=[new le(1,new Int32Array(0),new j(7,new I(1,19)),new j(10,new I(1,16)),new j(13,new I(1,13)),new j(17,new I(1,9))),new le(2,Int32Array.from([6,18]),new j(10,new I(1,34)),new j(16,new I(1,28)),new j(22,new I(1,22)),new j(28,new I(1,16))),new le(3,Int32Array.from([6,22]),new j(15,new I(1,55)),new j(26,new I(1,44)),new j(18,new I(2,17)),new j(22,new I(2,13))),new le(4,Int32Array.from([6,26]),new j(20,new I(1,80)),new j(18,new I(2,32)),new j(26,new I(2,24)),new j(16,new I(4,9))),new le(5,Int32Array.from([6,30]),new j(26,new I(1,108)),new j(24,new I(2,43)),new j(18,new I(2,15),new I(2,16)),new j(22,new I(2,11),new I(2,12))),new le(6,Int32Array.from([6,34]),new j(18,new I(2,68)),new j(16,new I(4,27)),new j(24,new I(4,19)),new j(28,new I(4,15))),new le(7,Int32Array.from([6,22,38]),new j(20,new I(2,78)),new j(18,new I(4,31)),new j(18,new I(2,14),new I(4,15)),new j(26,new I(4,13),new I(1,14))),new le(8,Int32Array.from([6,24,42]),new j(24,new I(2,97)),new j(22,new I(2,38),new I(2,39)),new j(22,new I(4,18),new I(2,19)),new j(26,new I(4,14),new I(2,15))),new le(9,Int32Array.from([6,26,46]),new j(30,new I(2,116)),new j(22,new I(3,36),new I(2,37)),new j(20,new I(4,16),new I(4,17)),new j(24,new I(4,12),new I(4,13))),new le(10,Int32Array.from([6,28,50]),new j(18,new I(2,68),new I(2,69)),new j(26,new I(4,43),new I(1,44)),new j(24,new I(6,19),new I(2,20)),new j(28,new I(6,15),new I(2,16))),new le(11,Int32Array.from([6,30,54]),new j(20,new I(4,81)),new j(30,new I(1,50),new I(4,51)),new j(28,new I(4,22),new I(4,23)),new j(24,new I(3,12),new I(8,13))),new le(12,Int32Array.from([6,32,58]),new j(24,new I(2,92),new I(2,93)),new j(22,new I(6,36),new I(2,37)),new j(26,new I(4,20),new I(6,21)),new j(28,new I(7,14),new I(4,15))),new le(13,Int32Array.from([6,34,62]),new j(26,new I(4,107)),new j(22,new I(8,37),new I(1,38)),new j(24,new I(8,20),new I(4,21)),new j(22,new I(12,11),new I(4,12))),new le(14,Int32Array.from([6,26,46,66]),new j(30,new I(3,115),new I(1,116)),new j(24,new I(4,40),new I(5,41)),new j(20,new I(11,16),new I(5,17)),new j(24,new I(11,12),new I(5,13))),new le(15,Int32Array.from([6,26,48,70]),new j(22,new I(5,87),new I(1,88)),new j(24,new I(5,41),new I(5,42)),new j(30,new I(5,24),new I(7,25)),new j(24,new I(11,12),new I(7,13))),new le(16,Int32Array.from([6,26,50,74]),new j(24,new I(5,98),new I(1,99)),new j(28,new I(7,45),new I(3,46)),new j(24,new I(15,19),new I(2,20)),new j(30,new I(3,15),new I(13,16))),new le(17,Int32Array.from([6,30,54,78]),new j(28,new I(1,107),new I(5,108)),new j(28,new I(10,46),new I(1,47)),new j(28,new I(1,22),new I(15,23)),new j(28,new I(2,14),new I(17,15))),new le(18,Int32Array.from([6,30,56,82]),new j(30,new I(5,120),new I(1,121)),new j(26,new I(9,43),new I(4,44)),new j(28,new I(17,22),new I(1,23)),new j(28,new I(2,14),new I(19,15))),new le(19,Int32Array.from([6,30,58,86]),new j(28,new I(3,113),new I(4,114)),new j(26,new I(3,44),new I(11,45)),new j(26,new I(17,21),new I(4,22)),new j(26,new I(9,13),new I(16,14))),new le(20,Int32Array.from([6,34,62,90]),new j(28,new I(3,107),new I(5,108)),new j(26,new I(3,41),new I(13,42)),new j(30,new I(15,24),new I(5,25)),new j(28,new I(15,15),new I(10,16))),new le(21,Int32Array.from([6,28,50,72,94]),new j(28,new I(4,116),new I(4,117)),new j(26,new I(17,42)),new j(28,new I(17,22),new I(6,23)),new j(30,new I(19,16),new I(6,17))),new le(22,Int32Array.from([6,26,50,74,98]),new j(28,new I(2,111),new I(7,112)),new j(28,new I(17,46)),new j(30,new I(7,24),new I(16,25)),new j(24,new I(34,13))),new le(23,Int32Array.from([6,30,54,78,102]),new j(30,new I(4,121),new I(5,122)),new j(28,new I(4,47),new I(14,48)),new j(30,new I(11,24),new I(14,25)),new j(30,new I(16,15),new I(14,16))),new le(24,Int32Array.from([6,28,54,80,106]),new j(30,new I(6,117),new I(4,118)),new j(28,new I(6,45),new I(14,46)),new j(30,new I(11,24),new I(16,25)),new j(30,new I(30,16),new I(2,17))),new le(25,Int32Array.from([6,32,58,84,110]),new j(26,new I(8,106),new I(4,107)),new j(28,new I(8,47),new I(13,48)),new j(30,new I(7,24),new I(22,25)),new j(30,new I(22,15),new I(13,16))),new le(26,Int32Array.from([6,30,58,86,114]),new j(28,new I(10,114),new I(2,115)),new j(28,new I(19,46),new I(4,47)),new j(28,new I(28,22),new I(6,23)),new j(30,new I(33,16),new I(4,17))),new le(27,Int32Array.from([6,34,62,90,118]),new j(30,new I(8,122),new I(4,123)),new j(28,new I(22,45),new I(3,46)),new j(30,new I(8,23),new I(26,24)),new j(30,new I(12,15),new I(28,16))),new le(28,Int32Array.from([6,26,50,74,98,122]),new j(30,new I(3,117),new I(10,118)),new j(28,new I(3,45),new I(23,46)),new j(30,new I(4,24),new I(31,25)),new j(30,new I(11,15),new I(31,16))),new le(29,Int32Array.from([6,30,54,78,102,126]),new j(30,new I(7,116),new I(7,117)),new j(28,new I(21,45),new I(7,46)),new j(30,new I(1,23),new I(37,24)),new j(30,new I(19,15),new I(26,16))),new le(30,Int32Array.from([6,26,52,78,104,130]),new j(30,new I(5,115),new I(10,116)),new j(28,new I(19,47),new I(10,48)),new j(30,new I(15,24),new I(25,25)),new j(30,new I(23,15),new I(25,16))),new le(31,Int32Array.from([6,30,56,82,108,134]),new j(30,new I(13,115),new I(3,116)),new j(28,new I(2,46),new I(29,47)),new j(30,new I(42,24),new I(1,25)),new j(30,new I(23,15),new I(28,16))),new le(32,Int32Array.from([6,34,60,86,112,138]),new j(30,new I(17,115)),new j(28,new I(10,46),new I(23,47)),new j(30,new I(10,24),new I(35,25)),new j(30,new I(19,15),new I(35,16))),new le(33,Int32Array.from([6,30,58,86,114,142]),new j(30,new I(17,115),new I(1,116)),new j(28,new I(14,46),new I(21,47)),new j(30,new I(29,24),new I(19,25)),new j(30,new I(11,15),new I(46,16))),new le(34,Int32Array.from([6,34,62,90,118,146]),new j(30,new I(13,115),new I(6,116)),new j(28,new I(14,46),new I(23,47)),new j(30,new I(44,24),new I(7,25)),new j(30,new I(59,16),new I(1,17))),new le(35,Int32Array.from([6,30,54,78,102,126,150]),new j(30,new I(12,121),new I(7,122)),new j(28,new I(12,47),new I(26,48)),new j(30,new I(39,24),new I(14,25)),new j(30,new I(22,15),new I(41,16))),new le(36,Int32Array.from([6,24,50,76,102,128,154]),new j(30,new I(6,121),new I(14,122)),new j(28,new I(6,47),new I(34,48)),new j(30,new I(46,24),new I(10,25)),new j(30,new I(2,15),new I(64,16))),new le(37,Int32Array.from([6,28,54,80,106,132,158]),new j(30,new I(17,122),new I(4,123)),new j(28,new I(29,46),new I(14,47)),new j(30,new I(49,24),new I(10,25)),new j(30,new I(24,15),new I(46,16))),new le(38,Int32Array.from([6,32,58,84,110,136,162]),new j(30,new I(4,122),new I(18,123)),new j(28,new I(13,46),new I(32,47)),new j(30,new I(48,24),new I(14,25)),new j(30,new I(42,15),new I(32,16))),new le(39,Int32Array.from([6,26,54,82,110,138,166]),new j(30,new I(20,117),new I(4,118)),new j(28,new I(40,47),new I(7,48)),new j(30,new I(43,24),new I(22,25)),new j(30,new I(10,15),new I(67,16))),new le(40,Int32Array.from([6,30,58,86,114,142,170]),new j(30,new I(19,118),new I(6,119)),new j(28,new I(18,47),new I(31,48)),new j(30,new I(34,24),new I(34,25)),new j(30,new I(20,15),new I(61,16)))];var _t;(function(v){v[v.DATA_MASK_000=0]="DATA_MASK_000",v[v.DATA_MASK_001=1]="DATA_MASK_001",v[v.DATA_MASK_010=2]="DATA_MASK_010",v[v.DATA_MASK_011=3]="DATA_MASK_011",v[v.DATA_MASK_100=4]="DATA_MASK_100",v[v.DATA_MASK_101=5]="DATA_MASK_101",v[v.DATA_MASK_110=6]="DATA_MASK_110",v[v.DATA_MASK_111=7]="DATA_MASK_111"})(_t||(_t={}));class mn{constructor(n,i){this.value=n,this.isMasked=i}unmaskBitMatrix(n,i){for(let s=0;s<i;s++)for(let a=0;a<i;a++)this.isMasked(s,a)&&n.flip(a,s)}}mn.values=new Map([[_t.DATA_MASK_000,new mn(_t.DATA_MASK_000,(v,n)=>(v+n&1)===0)],[_t.DATA_MASK_001,new mn(_t.DATA_MASK_001,(v,n)=>(v&1)===0)],[_t.DATA_MASK_010,new mn(_t.DATA_MASK_010,(v,n)=>n%3===0)],[_t.DATA_MASK_011,new mn(_t.DATA_MASK_011,(v,n)=>(v+n)%3===0)],[_t.DATA_MASK_100,new mn(_t.DATA_MASK_100,(v,n)=>(Math.floor(v/2)+Math.floor(n/3)&1)===0)],[_t.DATA_MASK_101,new mn(_t.DATA_MASK_101,(v,n)=>v*n%6===0)],[_t.DATA_MASK_110,new mn(_t.DATA_MASK_110,(v,n)=>v*n%6<3)],[_t.DATA_MASK_111,new mn(_t.DATA_MASK_111,(v,n)=>(v+n+v*n%3&1)===0)]]);class Tg{constructor(n){const i=n.getHeight();if(i<21||(i&3)!==1)throw new U;this.bitMatrix=n}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let n=0;for(let l=0;l<6;l++)n=this.copyBit(l,8,n);n=this.copyBit(7,8,n),n=this.copyBit(8,8,n),n=this.copyBit(8,7,n);for(let l=5;l>=0;l--)n=this.copyBit(8,l,n);const i=this.bitMatrix.getHeight();let s=0;const a=i-7;for(let l=i-1;l>=a;l--)s=this.copyBit(8,l,s);for(let l=i-8;l<i;l++)s=this.copyBit(l,8,s);if(this.parsedFormatInfo=Lt.decodeFormatInformation(n,s),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new U}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const n=this.bitMatrix.getHeight(),i=Math.floor((n-17)/4);if(i<=6)return le.getVersionForNumber(i);let s=0;const a=n-11;for(let u=5;u>=0;u--)for(let h=n-9;h>=a;h--)s=this.copyBit(h,u,s);let l=le.decodeVersionInformation(s);if(l!==null&&l.getDimensionForVersion()===n)return this.parsedVersion=l,l;s=0;for(let u=5;u>=0;u--)for(let h=n-9;h>=a;h--)s=this.copyBit(u,h,s);if(l=le.decodeVersionInformation(s),l!==null&&l.getDimensionForVersion()===n)return this.parsedVersion=l,l;throw new U}copyBit(n,i,s){return(this.isMirror?this.bitMatrix.get(i,n):this.bitMatrix.get(n,i))?s<<1|1:s<<1}readCodewords(){const n=this.readFormatInformation(),i=this.readVersion(),s=mn.values.get(n.getDataMask()),a=this.bitMatrix.getHeight();s.unmaskBitMatrix(this.bitMatrix,a);const l=i.buildFunctionPattern();let u=!0;const h=new Uint8Array(i.getTotalCodewords());let g=0,p=0,y=0;for(let E=a-1;E>0;E-=2){E===6&&E--;for(let A=0;A<a;A++){const T=u?a-1-A:A;for(let R=0;R<2;R++)l.get(E-R,T)||(y++,p<<=1,this.bitMatrix.get(E-R,T)&&(p|=1),y===8&&(h[g++]=p,y=0,p=0))}u=!u}if(g!==i.getTotalCodewords())throw new U;return h}remask(){if(this.parsedFormatInfo===null)return;const n=mn.values[this.parsedFormatInfo.getDataMask()],i=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,i)}setMirror(n){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=n}mirror(){const n=this.bitMatrix;for(let i=0,s=n.getWidth();i<s;i++)for(let a=i+1,l=n.getHeight();a<l;a++)n.get(i,a)!==n.get(a,i)&&(n.flip(a,i),n.flip(i,a))}}class Al{constructor(n,i){this.numDataCodewords=n,this.codewords=i}static getDataBlocks(n,i,s){if(n.length!==i.getTotalCodewords())throw new _;const a=i.getECBlocksForLevel(s);let l=0;const u=a.getECBlocks();for(const R of u)l+=R.getCount();const h=new Array(l);let g=0;for(const R of u)for(let D=0;D<R.getCount();D++){const B=R.getDataCodewords(),z=a.getECCodewordsPerBlock()+B;h[g++]=new Al(B,new Uint8Array(z))}const p=h[0].codewords.length;let y=h.length-1;for(;y>=0&&h[y].codewords.length!==p;)y--;y++;const E=p-a.getECCodewordsPerBlock();let A=0;for(let R=0;R<E;R++)for(let D=0;D<g;D++)h[D].codewords[R]=n[A++];for(let R=y;R<g;R++)h[R].codewords[E]=n[A++];const T=h[0].codewords.length;for(let R=E;R<T;R++)for(let D=0;D<g;D++){const B=D<y?R:R+1;h[D].codewords[B]=n[A++]}return h}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var wn;(function(v){v[v.TERMINATOR=0]="TERMINATOR",v[v.NUMERIC=1]="NUMERIC",v[v.ALPHANUMERIC=2]="ALPHANUMERIC",v[v.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",v[v.BYTE=4]="BYTE",v[v.ECI=5]="ECI",v[v.KANJI=6]="KANJI",v[v.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",v[v.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",v[v.HANZI=9]="HANZI"})(wn||(wn={}));class de{constructor(n,i,s,a){this.value=n,this.stringValue=i,this.characterCountBitsForVersions=s,this.bits=a,de.FOR_BITS.set(a,this),de.FOR_VALUE.set(n,this)}static forBits(n){const i=de.FOR_BITS.get(n);if(i===void 0)throw new _;return i}getCharacterCountBits(n){const i=n.getVersionNumber();let s;return i<=9?s=0:i<=26?s=1:s=2,this.characterCountBitsForVersions[s]}getValue(){return this.value}getBits(){return this.bits}equals(n){if(!(n instanceof de))return!1;const i=n;return this.value===i.value}toString(){return this.stringValue}}de.FOR_BITS=new Map,de.FOR_VALUE=new Map,de.TERMINATOR=new de(wn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),de.NUMERIC=new de(wn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),de.ALPHANUMERIC=new de(wn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),de.STRUCTURED_APPEND=new de(wn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),de.BYTE=new de(wn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),de.ECI=new de(wn.ECI,"ECI",Int32Array.from([0,0,0]),7),de.KANJI=new de(wn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),de.FNC1_FIRST_POSITION=new de(wn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),de.FNC1_SECOND_POSITION=new de(wn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),de.HANZI=new de(wn.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class et{static decode(n,i,s,a){const l=new _l(n);let u=new ee;const h=new Array;let g=-1,p=-1;try{let y=null,E=!1,A;do{if(l.available()<4)A=de.TERMINATOR;else{const T=l.readBits(4);A=de.forBits(T)}switch(A){case de.TERMINATOR:break;case de.FNC1_FIRST_POSITION:case de.FNC1_SECOND_POSITION:E=!0;break;case de.STRUCTURED_APPEND:if(l.available()<16)throw new U;g=l.readBits(8),p=l.readBits(8);break;case de.ECI:const T=et.parseECIValue(l);if(y=X.getCharacterSetECIByValue(T),y===null)throw new U;break;case de.HANZI:const R=l.readBits(4),D=l.readBits(A.getCharacterCountBits(i));R===et.GB2312_SUBSET&&et.decodeHanziSegment(l,u,D);break;default:const B=l.readBits(A.getCharacterCountBits(i));switch(A){case de.NUMERIC:et.decodeNumericSegment(l,u,B);break;case de.ALPHANUMERIC:et.decodeAlphanumericSegment(l,u,B,E);break;case de.BYTE:et.decodeByteSegment(l,u,B,y,h,a);break;case de.KANJI:et.decodeKanjiSegment(l,u,B);break;default:throw new U}break}}while(A!==de.TERMINATOR)}catch{throw new U}return new hs(n,u.toString(),h.length===0?null:h,s===null?null:s.toString(),g,p)}static decodeHanziSegment(n,i,s){if(s*13>n.available())throw new U;const a=new Uint8Array(2*s);let l=0;for(;s>0;){const u=n.readBits(13);let h=u/96<<8&4294967295|u%96;h<959?h+=41377:h+=42657,a[l]=h>>8&255,a[l+1]=h&255,l+=2,s--}try{i.append(Le.decode(a,ce.GB2312))}catch(u){throw new U(u)}}static decodeKanjiSegment(n,i,s){if(s*13>n.available())throw new U;const a=new Uint8Array(2*s);let l=0;for(;s>0;){const u=n.readBits(13);let h=u/192<<8&4294967295|u%192;h<7936?h+=33088:h+=49472,a[l]=h>>8,a[l+1]=h,l+=2,s--}try{i.append(Le.decode(a,ce.SHIFT_JIS))}catch(u){throw new U(u)}}static decodeByteSegment(n,i,s,a,l,u){if(8*s>n.available())throw new U;const h=new Uint8Array(s);for(let p=0;p<s;p++)h[p]=n.readBits(8);let g;a===null?g=ce.guessEncoding(h,u):g=a.getName();try{i.append(Le.decode(h,g))}catch(p){throw new U(p)}l.push(h)}static toAlphaNumericChar(n){if(n>=et.ALPHANUMERIC_CHARS.length)throw new U;return et.ALPHANUMERIC_CHARS[n]}static decodeAlphanumericSegment(n,i,s,a){const l=i.length();for(;s>1;){if(n.available()<11)throw new U;const u=n.readBits(11);i.append(et.toAlphaNumericChar(Math.floor(u/45))),i.append(et.toAlphaNumericChar(u%45)),s-=2}if(s===1){if(n.available()<6)throw new U;i.append(et.toAlphaNumericChar(n.readBits(6)))}if(a)for(let u=l;u<i.length();u++)i.charAt(u)==="%"&&(u<i.length()-1&&i.charAt(u+1)==="%"?i.deleteCharAt(u+1):i.setCharAt(u,""))}static decodeNumericSegment(n,i,s){for(;s>=3;){if(n.available()<10)throw new U;const a=n.readBits(10);if(a>=1e3)throw new U;i.append(et.toAlphaNumericChar(Math.floor(a/100))),i.append(et.toAlphaNumericChar(Math.floor(a/10)%10)),i.append(et.toAlphaNumericChar(a%10)),s-=3}if(s===2){if(n.available()<7)throw new U;const a=n.readBits(7);if(a>=100)throw new U;i.append(et.toAlphaNumericChar(Math.floor(a/10))),i.append(et.toAlphaNumericChar(a%10))}else if(s===1){if(n.available()<4)throw new U;const a=n.readBits(4);if(a>=10)throw new U;i.append(et.toAlphaNumericChar(a))}}static parseECIValue(n){const i=n.readBits(8);if(!(i&128))return i&127;if((i&192)===128){const s=n.readBits(8);return(i&63)<<8&4294967295|s}if((i&224)===192){const s=n.readBits(16);return(i&31)<<16&4294967295|s}throw new U}}et.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",et.GB2312_SUBSET=1;class Nd{constructor(n){this.mirrored=n}isMirrored(){return this.mirrored}applyMirroredCorrection(n){if(!this.mirrored||n===null||n.length<3)return;const i=n[0];n[0]=n[2],n[2]=i}}class Ng{constructor(){this.rsDecoder=new gs(Re.QR_CODE_FIELD_256)}decodeBooleanArray(n,i){return this.decodeBitMatrix(pe.parseFromBooleanArray(n),i)}decodeBitMatrix(n,i){const s=new Tg(n);let a=null;try{return this.decodeBitMatrixParser(s,i)}catch(l){a=l}try{s.remask(),s.setMirror(!0),s.readVersion(),s.readFormatInformation(),s.mirror();const l=this.decodeBitMatrixParser(s,i);return l.setOther(new Nd(!0)),l}catch(l){throw a!==null?a:l}}decodeBitMatrixParser(n,i){const s=n.readVersion(),a=n.readFormatInformation().getErrorCorrectionLevel(),l=n.readCodewords(),u=Al.getDataBlocks(l,s,a);let h=0;for(const y of u)h+=y.getNumDataCodewords();const g=new Uint8Array(h);let p=0;for(const y of u){const E=y.getCodewords(),A=y.getNumDataCodewords();this.correctErrors(E,A);for(let T=0;T<A;T++)g[p++]=E[T]}return et.decode(g,s,a,i)}correctErrors(n,i){const s=new Int32Array(n);try{this.rsDecoder.decode(s,n.length-i)}catch{throw new P}for(let a=0;a<i;a++)n[a]=s[a]}}class Sl extends oe{constructor(n,i,s){super(n,i),this.estimatedModuleSize=s}aboutEquals(n,i,s){if(Math.abs(i-this.getY())<=n&&Math.abs(s-this.getX())<=n){const a=Math.abs(n-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1}combineEstimate(n,i,s){const a=(this.getX()+i)/2,l=(this.getY()+n)/2,u=(this.estimatedModuleSize+s)/2;return new Sl(a,l,u)}}class Ro{constructor(n,i,s,a,l,u,h){this.image=n,this.startX=i,this.startY=s,this.width=a,this.height=l,this.moduleSize=u,this.resultPointCallback=h,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const n=this.startX,i=this.height,s=this.width,a=n+s,l=this.startY+i/2,u=new Int32Array(3),h=this.image;for(let g=0;g<i;g++){const p=l+(g&1?-Math.floor((g+1)/2):Math.floor((g+1)/2));u[0]=0,u[1]=0,u[2]=0;let y=n;for(;y<a&&!h.get(y,p);)y++;let E=0;for(;y<a;){if(h.get(y,p))if(E===1)u[1]++;else if(E===2){if(this.foundPatternCross(u)){const A=this.handlePossibleCenter(u,p,y);if(A!==null)return A}u[0]=u[2],u[1]=1,u[2]=0,E=1}else u[++E]++;else E===1&&E++,u[E]++;y++}if(this.foundPatternCross(u)){const A=this.handlePossibleCenter(u,p,a);if(A!==null)return A}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new W}static centerFromEnd(n,i){return i-n[2]-n[1]/2}foundPatternCross(n){const i=this.moduleSize,s=i/2;for(let a=0;a<3;a++)if(Math.abs(i-n[a])>=s)return!1;return!0}crossCheckVertical(n,i,s,a){const l=this.image,u=l.getHeight(),h=this.crossCheckStateCount;h[0]=0,h[1]=0,h[2]=0;let g=n;for(;g>=0&&l.get(i,g)&&h[1]<=s;)h[1]++,g--;if(g<0||h[1]>s)return NaN;for(;g>=0&&!l.get(i,g)&&h[0]<=s;)h[0]++,g--;if(h[0]>s)return NaN;for(g=n+1;g<u&&l.get(i,g)&&h[1]<=s;)h[1]++,g++;if(g===u||h[1]>s)return NaN;for(;g<u&&!l.get(i,g)&&h[2]<=s;)h[2]++,g++;if(h[2]>s)return NaN;const p=h[0]+h[1]+h[2];return 5*Math.abs(p-a)>=2*a?NaN:this.foundPatternCross(h)?Ro.centerFromEnd(h,g):NaN}handlePossibleCenter(n,i,s){const a=n[0]+n[1]+n[2],l=Ro.centerFromEnd(n,s),u=this.crossCheckVertical(i,l,2*n[1],a);if(!isNaN(u)){const h=(n[0]+n[1]+n[2])/3;for(const p of this.possibleCenters)if(p.aboutEquals(h,u,l))return p.combineEstimate(u,l,h);const g=new Sl(l,u,h);this.possibleCenters.push(g),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(g)}return null}}class bl extends oe{constructor(n,i,s,a){super(n,i),this.estimatedModuleSize=s,this.count=a,a===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(n,i,s){if(Math.abs(i-this.getY())<=n&&Math.abs(s-this.getX())<=n){const a=Math.abs(n-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1}combineEstimate(n,i,s){const a=this.count+1,l=(this.count*this.getX()+i)/a,u=(this.count*this.getY()+n)/a,h=(this.count*this.estimatedModuleSize+s)/a;return new bl(l,u,h,a)}}class Og{constructor(n){this.bottomLeft=n[0],this.topLeft=n[1],this.topRight=n[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class At{constructor(n,i){this.image=n,this.resultPointCallback=i,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=i}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(n){const i=n!=null&&n.get(H.TRY_HARDER)!==void 0,s=n!=null&&n.get(H.PURE_BARCODE)!==void 0,a=this.image,l=a.getHeight(),u=a.getWidth();let h=Math.floor(3*l/(4*At.MAX_MODULES));(h<At.MIN_SKIP||i)&&(h=At.MIN_SKIP);let g=!1;const p=new Int32Array(5);for(let E=h-1;E<l&&!g;E+=h){p[0]=0,p[1]=0,p[2]=0,p[3]=0,p[4]=0;let A=0;for(let T=0;T<u;T++)if(a.get(T,E))(A&1)===1&&A++,p[A]++;else if(A&1)p[A]++;else if(A===4)if(At.foundPatternCross(p)){if(this.handlePossibleCenter(p,E,T,s)===!0)if(h=2,this.hasSkipped===!0)g=this.haveMultiplyConfirmedCenters();else{const D=this.findRowSkip();D>p[2]&&(E+=D-p[2]-h,T=u-1)}else{p[0]=p[2],p[1]=p[3],p[2]=p[4],p[3]=1,p[4]=0,A=3;continue}A=0,p[0]=0,p[1]=0,p[2]=0,p[3]=0,p[4]=0}else p[0]=p[2],p[1]=p[3],p[2]=p[4],p[3]=1,p[4]=0,A=3;else p[++A]++;At.foundPatternCross(p)&&this.handlePossibleCenter(p,E,u,s)===!0&&(h=p[0],this.hasSkipped&&(g=this.haveMultiplyConfirmedCenters()))}const y=this.selectBestPatterns();return oe.orderBestPatterns(y),new Og(y)}static centerFromEnd(n,i){return i-n[4]-n[3]-n[2]/2}static foundPatternCross(n){let i=0;for(let l=0;l<5;l++){const u=n[l];if(u===0)return!1;i+=u}if(i<7)return!1;const s=i/7,a=s/2;return Math.abs(s-n[0])<a&&Math.abs(s-n[1])<a&&Math.abs(3*s-n[2])<3*a&&Math.abs(s-n[3])<a&&Math.abs(s-n[4])<a}getCrossCheckStateCount(){const n=this.crossCheckStateCount;return n[0]=0,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n}crossCheckDiagonal(n,i,s,a){const l=this.getCrossCheckStateCount();let u=0;const h=this.image;for(;n>=u&&i>=u&&h.get(i-u,n-u);)l[2]++,u++;if(n<u||i<u)return!1;for(;n>=u&&i>=u&&!h.get(i-u,n-u)&&l[1]<=s;)l[1]++,u++;if(n<u||i<u||l[1]>s)return!1;for(;n>=u&&i>=u&&h.get(i-u,n-u)&&l[0]<=s;)l[0]++,u++;if(l[0]>s)return!1;const g=h.getHeight(),p=h.getWidth();for(u=1;n+u<g&&i+u<p&&h.get(i+u,n+u);)l[2]++,u++;if(n+u>=g||i+u>=p)return!1;for(;n+u<g&&i+u<p&&!h.get(i+u,n+u)&&l[3]<s;)l[3]++,u++;if(n+u>=g||i+u>=p||l[3]>=s)return!1;for(;n+u<g&&i+u<p&&h.get(i+u,n+u)&&l[4]<s;)l[4]++,u++;if(l[4]>=s)return!1;const y=l[0]+l[1]+l[2]+l[3]+l[4];return Math.abs(y-a)<2*a&&At.foundPatternCross(l)}crossCheckVertical(n,i,s,a){const l=this.image,u=l.getHeight(),h=this.getCrossCheckStateCount();let g=n;for(;g>=0&&l.get(i,g);)h[2]++,g--;if(g<0)return NaN;for(;g>=0&&!l.get(i,g)&&h[1]<=s;)h[1]++,g--;if(g<0||h[1]>s)return NaN;for(;g>=0&&l.get(i,g)&&h[0]<=s;)h[0]++,g--;if(h[0]>s)return NaN;for(g=n+1;g<u&&l.get(i,g);)h[2]++,g++;if(g===u)return NaN;for(;g<u&&!l.get(i,g)&&h[3]<s;)h[3]++,g++;if(g===u||h[3]>=s)return NaN;for(;g<u&&l.get(i,g)&&h[4]<s;)h[4]++,g++;if(h[4]>=s)return NaN;const p=h[0]+h[1]+h[2]+h[3]+h[4];return 5*Math.abs(p-a)>=2*a?NaN:At.foundPatternCross(h)?At.centerFromEnd(h,g):NaN}crossCheckHorizontal(n,i,s,a){const l=this.image,u=l.getWidth(),h=this.getCrossCheckStateCount();let g=n;for(;g>=0&&l.get(g,i);)h[2]++,g--;if(g<0)return NaN;for(;g>=0&&!l.get(g,i)&&h[1]<=s;)h[1]++,g--;if(g<0||h[1]>s)return NaN;for(;g>=0&&l.get(g,i)&&h[0]<=s;)h[0]++,g--;if(h[0]>s)return NaN;for(g=n+1;g<u&&l.get(g,i);)h[2]++,g++;if(g===u)return NaN;for(;g<u&&!l.get(g,i)&&h[3]<s;)h[3]++,g++;if(g===u||h[3]>=s)return NaN;for(;g<u&&l.get(g,i)&&h[4]<s;)h[4]++,g++;if(h[4]>=s)return NaN;const p=h[0]+h[1]+h[2]+h[3]+h[4];return 5*Math.abs(p-a)>=a?NaN:At.foundPatternCross(h)?At.centerFromEnd(h,g):NaN}handlePossibleCenter(n,i,s,a){const l=n[0]+n[1]+n[2]+n[3]+n[4];let u=At.centerFromEnd(n,s),h=this.crossCheckVertical(i,Math.floor(u),n[2],l);if(!isNaN(h)&&(u=this.crossCheckHorizontal(Math.floor(u),Math.floor(h),n[2],l),!isNaN(u)&&(!a||this.crossCheckDiagonal(Math.floor(h),Math.floor(u),n[2],l)))){const g=l/7;let p=!1;const y=this.possibleCenters;for(let E=0,A=y.length;E<A;E++){const T=y[E];if(T.aboutEquals(g,h,u)){y[E]=T.combineEstimate(h,u,g),p=!0;break}}if(!p){const E=new bl(u,h,g);y.push(E),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(E)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let i=null;for(const s of this.possibleCenters)if(s.getCount()>=At.CENTER_QUORUM)if(i==null)i=s;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-s.getX())-Math.abs(i.getY()-s.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let n=0,i=0;const s=this.possibleCenters.length;for(const u of this.possibleCenters)u.getCount()>=At.CENTER_QUORUM&&(n++,i+=u.getEstimatedModuleSize());if(n<3)return!1;const a=i/s;let l=0;for(const u of this.possibleCenters)l+=Math.abs(u.getEstimatedModuleSize()-a);return l<=.05*i}selectBestPatterns(){const n=this.possibleCenters.length;if(n<3)throw new W;const i=this.possibleCenters;let s;if(n>3){let a=0,l=0;for(const g of this.possibleCenters){const p=g.getEstimatedModuleSize();a+=p,l+=p*p}s=a/n;let u=Math.sqrt(l/n-s*s);i.sort((g,p)=>{const y=Math.abs(p.getEstimatedModuleSize()-s),E=Math.abs(g.getEstimatedModuleSize()-s);return y<E?-1:y>E?1:0});const h=Math.max(.2*s,u);for(let g=0;g<i.length&&i.length>3;g++){const p=i[g];Math.abs(p.getEstimatedModuleSize()-s)>h&&(i.splice(g,1),g--)}}if(i.length>3){let a=0;for(const l of i)a+=l.getEstimatedModuleSize();s=a/i.length,i.sort((l,u)=>{if(u.getCount()===l.getCount()){const h=Math.abs(u.getEstimatedModuleSize()-s),g=Math.abs(l.getEstimatedModuleSize()-s);return h<g?1:h>g?-1:0}else return u.getCount()-l.getCount()}),i.splice(3)}return[i[0],i[1],i[2]]}}At.CENTER_QUORUM=2,At.MIN_SKIP=3,At.MAX_MODULES=57;class xs{constructor(n){this.image=n}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(n){this.resultPointCallback=n==null?null:n.get(H.NEED_RESULT_POINT_CALLBACK);const s=new At(this.image,this.resultPointCallback).find(n);return this.processFinderPatternInfo(s)}processFinderPatternInfo(n){const i=n.getTopLeft(),s=n.getTopRight(),a=n.getBottomLeft(),l=this.calculateModuleSize(i,s,a);if(l<1)throw new W("No pattern found in proccess finder.");const u=xs.computeDimension(i,s,a,l),h=le.getProvisionalVersionForDimension(u),g=h.getDimensionForVersion()-7;let p=null;if(h.getAlignmentPatternCenters().length>0){const T=s.getX()-i.getX()+a.getX(),R=s.getY()-i.getY()+a.getY(),D=1-3/g,B=Math.floor(i.getX()+D*(T-i.getX())),z=Math.floor(i.getY()+D*(R-i.getY()));for(let Z=4;Z<=16;Z<<=1)try{p=this.findAlignmentInRegion(l,B,z,Z);break}catch(Q){if(!(Q instanceof W))throw Q}}const y=xs.createTransform(i,s,a,p,u),E=xs.sampleGrid(this.image,y,u);let A;return p===null?A=[a,i,s]:A=[a,i,s,p],new bo(E,A)}static createTransform(n,i,s,a,l){const u=l-3.5;let h,g,p,y;return a!==null?(h=a.getX(),g=a.getY(),p=u-3,y=p):(h=i.getX()-n.getX()+s.getX(),g=i.getY()-n.getY()+s.getY(),p=u,y=u),bn.quadrilateralToQuadrilateral(3.5,3.5,u,3.5,p,y,3.5,u,n.getX(),n.getY(),i.getX(),i.getY(),h,g,s.getX(),s.getY())}static sampleGrid(n,i,s){return hr.getInstance().sampleGridWithTransform(n,s,s,i)}static computeDimension(n,i,s,a){const l=Te.round(oe.distance(n,i)/a),u=Te.round(oe.distance(n,s)/a);let h=Math.floor((l+u)/2)+7;switch(h&3){case 0:h++;break;case 2:h--;break;case 3:throw new W("Dimensions could be not found.")}return h}calculateModuleSize(n,i,s){return(this.calculateModuleSizeOneWay(n,i)+this.calculateModuleSizeOneWay(n,s))/2}calculateModuleSizeOneWay(n,i){const s=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(n.getX()),Math.floor(n.getY()),Math.floor(i.getX()),Math.floor(i.getY())),a=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(i.getX()),Math.floor(i.getY()),Math.floor(n.getX()),Math.floor(n.getY()));return isNaN(s)?a/7:isNaN(a)?s/7:(s+a)/14}sizeOfBlackWhiteBlackRunBothWays(n,i,s,a){let l=this.sizeOfBlackWhiteBlackRun(n,i,s,a),u=1,h=n-(s-n);h<0?(u=n/(n-h),h=0):h>=this.image.getWidth()&&(u=(this.image.getWidth()-1-n)/(h-n),h=this.image.getWidth()-1);let g=Math.floor(i-(a-i)*u);return u=1,g<0?(u=i/(i-g),g=0):g>=this.image.getHeight()&&(u=(this.image.getHeight()-1-i)/(g-i),g=this.image.getHeight()-1),h=Math.floor(n+(h-n)*u),l+=this.sizeOfBlackWhiteBlackRun(n,i,h,g),l-1}sizeOfBlackWhiteBlackRun(n,i,s,a){const l=Math.abs(a-i)>Math.abs(s-n);if(l){let T=n;n=i,i=T,T=s,s=a,a=T}const u=Math.abs(s-n),h=Math.abs(a-i);let g=-u/2;const p=n<s?1:-1,y=i<a?1:-1;let E=0;const A=s+p;for(let T=n,R=i;T!==A;T+=p){const D=l?R:T,B=l?T:R;if(E===1===this.image.get(D,B)){if(E===2)return Te.distance(T,R,n,i);E++}if(g+=h,g>0){if(R===a)break;R+=y,g-=u}}return E===2?Te.distance(s+p,a,n,i):NaN}findAlignmentInRegion(n,i,s,a){const l=Math.floor(a*n),u=Math.max(0,i-l),h=Math.min(this.image.getWidth()-1,i+l);if(h-u<n*3)throw new W("Alignment top exceeds estimated module size.");const g=Math.max(0,s-l),p=Math.min(this.image.getHeight()-1,s+l);if(p-g<n*3)throw new W("Alignment bottom exceeds estimated module size.");return new Ro(this.image,u,g,h-u,p-g,n,this.resultPointCallback).find()}}class xr{constructor(){this.decoder=new Ng}getDecoder(){return this.decoder}decode(n,i){let s,a;if(i!=null&&i.get(H.PURE_BARCODE)!==void 0){const g=xr.extractPureBits(n.getBlackMatrix());s=this.decoder.decodeBitMatrix(g,i),a=xr.NO_POINTS}else{const g=new xs(n.getBlackMatrix()).detect(i);s=this.decoder.decodeBitMatrix(g.getBits(),i),a=g.getPoints()}s.getOther()instanceof Nd&&s.getOther().applyMirroredCorrection(a);const l=new Je(s.getText(),s.getRawBytes(),void 0,a,ae.QR_CODE,void 0),u=s.getByteSegments();u!==null&&l.putMetadata(Ct.BYTE_SEGMENTS,u);const h=s.getECLevel();return h!==null&&l.putMetadata(Ct.ERROR_CORRECTION_LEVEL,h),s.hasStructuredAppend()&&(l.putMetadata(Ct.STRUCTURED_APPEND_SEQUENCE,s.getStructuredAppendSequenceNumber()),l.putMetadata(Ct.STRUCTURED_APPEND_PARITY,s.getStructuredAppendParity())),l}reset(){}static extractPureBits(n){const i=n.getTopLeftOnBit(),s=n.getBottomRightOnBit();if(i===null||s===null)throw new W;const a=this.moduleSize(i,n);let l=i[1],u=s[1],h=i[0],g=s[0];if(h>=g||l>=u)throw new W;if(u-l!==g-h&&(g=h+(u-l),g>=n.getWidth()))throw new W;const p=Math.round((g-h+1)/a),y=Math.round((u-l+1)/a);if(p<=0||y<=0)throw new W;if(y!==p)throw new W;const E=Math.floor(a/2);l+=E,h+=E;const A=h+Math.floor((p-1)*a)-g;if(A>0){if(A>E)throw new W;h-=A}const T=l+Math.floor((y-1)*a)-u;if(T>0){if(T>E)throw new W;l-=T}const R=new pe(p,y);for(let D=0;D<y;D++){const B=l+Math.floor(D*a);for(let z=0;z<p;z++)n.get(h+Math.floor(z*a),B)&&R.set(z,D)}return R}static moduleSize(n,i){const s=i.getHeight(),a=i.getWidth();let l=n[0],u=n[1],h=!0,g=0;for(;l<a&&u<s;){if(h!==i.get(l,u)){if(++g===5)break;h=!h}l++,u++}if(l===a||u===s)throw new W;return(l-n[0])/7}}xr.NO_POINTS=new Array;class ge{PDF417Common(){}static getBitCountSum(n){return Te.sum(n)}static toIntArray(n){if(n==null||!n.length)return ge.EMPTY_INT_ARRAY;const i=new Int32Array(n.length);let s=0;for(const a of n)i[s++]=a;return i}static getCodeword(n){const i=N.binarySearch(ge.SYMBOL_TABLE,n&262143);return i<0?-1:(ge.CODEWORD_TABLE[i]-1)%ge.NUMBER_OF_CODEWORDS}}ge.NUMBER_OF_CODEWORDS=929,ge.MAX_CODEWORDS_IN_BARCODE=ge.NUMBER_OF_CODEWORDS-1,ge.MIN_ROWS_IN_BARCODE=3,ge.MAX_ROWS_IN_BARCODE=90,ge.MODULES_IN_CODEWORD=17,ge.MODULES_IN_STOP_PATTERN=18,ge.BARS_IN_MODULE=8,ge.EMPTY_INT_ARRAY=new Int32Array([]),ge.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),ge.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Rg{constructor(n,i){this.bits=n,this.points=i}getBits(){return this.bits}getPoints(){return this.points}}class Ee{static detectMultiple(n,i,s){let a=n.getBlackMatrix(),l=Ee.detect(s,a);return l.length||(a=a.clone(),a.rotate180(),l=Ee.detect(s,a)),new Rg(a,l)}static detect(n,i){const s=new Array;let a=0,l=0,u=!1;for(;a<i.getHeight();){const h=Ee.findVertices(i,a,l);if(h[0]==null&&h[3]==null){if(!u)break;u=!1,l=0;for(const g of s)g[1]!=null&&(a=Math.trunc(Math.max(a,g[1].getY()))),g[3]!=null&&(a=Math.max(a,Math.trunc(g[3].getY())));a+=Ee.ROW_STEP;continue}if(u=!0,s.push(h),!n)break;h[2]!=null?(l=Math.trunc(h[2].getX()),a=Math.trunc(h[2].getY())):(l=Math.trunc(h[4].getX()),a=Math.trunc(h[4].getY()))}return s}static findVertices(n,i,s){const a=n.getHeight(),l=n.getWidth(),u=new Array(8);return Ee.copyToResult(u,Ee.findRowsWithPattern(n,a,l,i,s,Ee.START_PATTERN),Ee.INDEXES_START_PATTERN),u[4]!=null&&(s=Math.trunc(u[4].getX()),i=Math.trunc(u[4].getY())),Ee.copyToResult(u,Ee.findRowsWithPattern(n,a,l,i,s,Ee.STOP_PATTERN),Ee.INDEXES_STOP_PATTERN),u}static copyToResult(n,i,s){for(let a=0;a<s.length;a++)n[s[a]]=i[a]}static findRowsWithPattern(n,i,s,a,l,u){const h=new Array(4);let g=!1;const p=new Int32Array(u.length);for(;a<i;a+=Ee.ROW_STEP){let E=Ee.findGuardPattern(n,l,a,s,!1,u,p);if(E!=null){for(;a>0;){const A=Ee.findGuardPattern(n,l,--a,s,!1,u,p);if(A!=null)E=A;else{a++;break}}h[0]=new oe(E[0],a),h[1]=new oe(E[1],a),g=!0;break}}let y=a+1;if(g){let E=0,A=Int32Array.from([Math.trunc(h[0].getX()),Math.trunc(h[1].getX())]);for(;y<i;y++){const T=Ee.findGuardPattern(n,A[0],y,s,!1,u,p);if(T!=null&&Math.abs(A[0]-T[0])<Ee.MAX_PATTERN_DRIFT&&Math.abs(A[1]-T[1])<Ee.MAX_PATTERN_DRIFT)A=T,E=0;else{if(E>Ee.SKIPPED_ROW_COUNT_MAX)break;E++}}y-=E+1,h[2]=new oe(A[0],y),h[3]=new oe(A[1],y)}return y-a<Ee.BARCODE_MIN_HEIGHT&&N.fill(h,null),h}static findGuardPattern(n,i,s,a,l,u,h){N.fillWithin(h,0,h.length,0);let g=i,p=0;for(;n.get(g,s)&&g>0&&p++<Ee.MAX_PIXEL_DRIFT;)g--;let y=g,E=0,A=u.length;for(let T=l;y<a;y++)if(n.get(y,s)!==T)h[E]++;else{if(E===A-1){if(Ee.patternMatchVariance(h,u,Ee.MAX_INDIVIDUAL_VARIANCE)<Ee.MAX_AVG_VARIANCE)return new Int32Array([g,y]);g+=h[0]+h[1],F.arraycopy(h,2,h,0,E-1),h[E-1]=0,h[E]=0,E--}else E++;h[E]=1,T=!T}return E===A-1&&Ee.patternMatchVariance(h,u,Ee.MAX_INDIVIDUAL_VARIANCE)<Ee.MAX_AVG_VARIANCE?new Int32Array([g,y-1]):null}static patternMatchVariance(n,i,s){let a=n.length,l=0,u=0;for(let p=0;p<a;p++)l+=n[p],u+=i[p];if(l<u)return 1/0;let h=l/u;s*=h;let g=0;for(let p=0;p<a;p++){let y=n[p],E=i[p]*h,A=y>E?y-E:E-y;if(A>s)return 1/0;g+=A}return g/l}}Ee.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Ee.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Ee.MAX_AVG_VARIANCE=.42,Ee.MAX_INDIVIDUAL_VARIANCE=.8,Ee.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Ee.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Ee.MAX_PIXEL_DRIFT=3,Ee.MAX_PATTERN_DRIFT=5,Ee.SKIPPED_ROW_COUNT_MAX=25,Ee.ROW_STEP=5,Ee.BARCODE_MIN_HEIGHT=10;class Tt{constructor(n,i){if(i.length===0)throw new _;this.field=n;let s=i.length;if(s>1&&i[0]===0){let a=1;for(;a<s&&i[a]===0;)a++;a===s?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(s-a),F.arraycopy(i,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=i}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(n){return this.coefficients[this.coefficients.length-1-n]}evaluateAt(n){if(n===0)return this.getCoefficient(0);if(n===1){let a=0;for(let l of this.coefficients)a=this.field.add(a,l);return a}let i=this.coefficients[0],s=this.coefficients.length;for(let a=1;a<s;a++)i=this.field.add(this.field.multiply(n,i),this.coefficients[a]);return i}add(n){if(!this.field.equals(n.field))throw new _("ModulusPolys do not have same ModulusGF field");if(this.isZero())return n;if(n.isZero())return this;let i=this.coefficients,s=n.coefficients;if(i.length>s.length){let u=i;i=s,s=u}let a=new Int32Array(s.length),l=s.length-i.length;F.arraycopy(s,0,a,0,l);for(let u=l;u<s.length;u++)a[u]=this.field.add(i[u-l],s[u]);return new Tt(this.field,a)}subtract(n){if(!this.field.equals(n.field))throw new _("ModulusPolys do not have same ModulusGF field");return n.isZero()?this:this.add(n.negative())}multiply(n){return n instanceof Tt?this.multiplyOther(n):this.multiplyScalar(n)}multiplyOther(n){if(!this.field.equals(n.field))throw new _("ModulusPolys do not have same ModulusGF field");if(this.isZero()||n.isZero())return new Tt(this.field,new Int32Array([0]));let i=this.coefficients,s=i.length,a=n.coefficients,l=a.length,u=new Int32Array(s+l-1);for(let h=0;h<s;h++){let g=i[h];for(let p=0;p<l;p++)u[h+p]=this.field.add(u[h+p],this.field.multiply(g,a[p]))}return new Tt(this.field,u)}negative(){let n=this.coefficients.length,i=new Int32Array(n);for(let s=0;s<n;s++)i[s]=this.field.subtract(0,this.coefficients[s]);return new Tt(this.field,i)}multiplyScalar(n){if(n===0)return new Tt(this.field,new Int32Array([0]));if(n===1)return this;let i=this.coefficients.length,s=new Int32Array(i);for(let a=0;a<i;a++)s[a]=this.field.multiply(this.coefficients[a],n);return new Tt(this.field,s)}multiplyByMonomial(n,i){if(n<0)throw new _;if(i===0)return new Tt(this.field,new Int32Array([0]));let s=this.coefficients.length,a=new Int32Array(s+n);for(let l=0;l<s;l++)a[l]=this.field.multiply(this.coefficients[l],i);return new Tt(this.field,a)}toString(){let n=new ee;for(let i=this.getDegree();i>=0;i--){let s=this.getCoefficient(i);s!==0&&(s<0?(n.append(" - "),s=-s):n.length()>0&&n.append(" + "),(i===0||s!==1)&&n.append(s),i!==0&&(i===1?n.append("x"):(n.append("x^"),n.append(i))))}return n.toString()}}class kg{add(n,i){return(n+i)%this.modulus}subtract(n,i){return(this.modulus+n-i)%this.modulus}exp(n){return this.expTable[n]}log(n){if(n===0)throw new _;return this.logTable[n]}inverse(n){if(n===0)throw new Ao;return this.expTable[this.modulus-this.logTable[n]-1]}multiply(n,i){return n===0||i===0?0:this.expTable[(this.logTable[n]+this.logTable[i])%(this.modulus-1)]}getSize(){return this.modulus}equals(n){return n===this}}class Il extends kg{constructor(n,i){super(),this.modulus=n,this.expTable=new Int32Array(n),this.logTable=new Int32Array(n);let s=1;for(let a=0;a<n;a++)this.expTable[a]=s,s=s*i%n;for(let a=0;a<n-1;a++)this.logTable[this.expTable[a]]=a;this.zero=new Tt(this,new Int32Array([0])),this.one=new Tt(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(n,i){if(n<0)throw new _;if(i===0)return this.zero;let s=new Int32Array(n+1);return s[0]=i,new Tt(this,s)}}Il.PDF417_GF=new Il(ge.NUMBER_OF_CODEWORDS,3);class Od{constructor(){this.field=Il.PDF417_GF}decode(n,i,s){let a=new Tt(this.field,n),l=new Int32Array(i),u=!1;for(let R=i;R>0;R--){let D=a.evaluateAt(this.field.exp(R));l[i-R]=D,D!==0&&(u=!0)}if(!u)return 0;let h=this.field.getOne();if(s!=null)for(const R of s){let D=this.field.exp(n.length-1-R),B=new Tt(this.field,new Int32Array([this.field.subtract(0,D),1]));h=h.multiply(B)}let g=new Tt(this.field,l),p=this.runEuclideanAlgorithm(this.field.buildMonomial(i,1),g,i),y=p[0],E=p[1],A=this.findErrorLocations(y),T=this.findErrorMagnitudes(E,y,A);for(let R=0;R<A.length;R++){let D=n.length-1-this.field.log(A[R]);if(D<0)throw P.getChecksumInstance();n[D]=this.field.subtract(n[D],T[R])}return A.length}runEuclideanAlgorithm(n,i,s){if(n.getDegree()<i.getDegree()){let A=n;n=i,i=A}let a=n,l=i,u=this.field.getZero(),h=this.field.getOne();for(;l.getDegree()>=Math.round(s/2);){let A=a,T=u;if(a=l,u=h,a.isZero())throw P.getChecksumInstance();l=A;let R=this.field.getZero(),D=a.getCoefficient(a.getDegree()),B=this.field.inverse(D);for(;l.getDegree()>=a.getDegree()&&!l.isZero();){let z=l.getDegree()-a.getDegree(),Z=this.field.multiply(l.getCoefficient(l.getDegree()),B);R=R.add(this.field.buildMonomial(z,Z)),l=l.subtract(a.multiplyByMonomial(z,Z))}h=R.multiply(u).subtract(T).negative()}let g=h.getCoefficient(0);if(g===0)throw P.getChecksumInstance();let p=this.field.inverse(g),y=h.multiply(p),E=l.multiply(p);return[y,E]}findErrorLocations(n){let i=n.getDegree(),s=new Int32Array(i),a=0;for(let l=1;l<this.field.getSize()&&a<i;l++)n.evaluateAt(l)===0&&(s[a]=this.field.inverse(l),a++);if(a!==i)throw P.getChecksumInstance();return s}findErrorMagnitudes(n,i,s){let a=i.getDegree(),l=new Int32Array(a);for(let p=1;p<=a;p++)l[a-p]=this.field.multiply(p,i.getCoefficient(p));let u=new Tt(this.field,l),h=s.length,g=new Int32Array(h);for(let p=0;p<h;p++){let y=this.field.inverse(s[p]),E=this.field.subtract(0,n.evaluateAt(y)),A=this.field.inverse(u.evaluateAt(y));g[p]=this.field.multiply(E,A)}return g}}class Yr{constructor(n,i,s,a,l){n instanceof Yr?this.constructor_2(n):this.constructor_1(n,i,s,a,l)}constructor_1(n,i,s,a,l){const u=i==null||s==null,h=a==null||l==null;if(u&&h)throw new W;u?(i=new oe(0,a.getY()),s=new oe(0,l.getY())):h&&(a=new oe(n.getWidth()-1,i.getY()),l=new oe(n.getWidth()-1,s.getY())),this.image=n,this.topLeft=i,this.bottomLeft=s,this.topRight=a,this.bottomRight=l,this.minX=Math.trunc(Math.min(i.getX(),s.getX())),this.maxX=Math.trunc(Math.max(a.getX(),l.getX())),this.minY=Math.trunc(Math.min(i.getY(),a.getY())),this.maxY=Math.trunc(Math.max(s.getY(),l.getY()))}constructor_2(n){this.image=n.image,this.topLeft=n.getTopLeft(),this.bottomLeft=n.getBottomLeft(),this.topRight=n.getTopRight(),this.bottomRight=n.getBottomRight(),this.minX=n.getMinX(),this.maxX=n.getMaxX(),this.minY=n.getMinY(),this.maxY=n.getMaxY()}static merge(n,i){return n==null?i:i==null?n:new Yr(n.image,n.topLeft,n.bottomLeft,i.topRight,i.bottomRight)}addMissingRows(n,i,s){let a=this.topLeft,l=this.bottomLeft,u=this.topRight,h=this.bottomRight;if(n>0){let g=s?this.topLeft:this.topRight,p=Math.trunc(g.getY()-n);p<0&&(p=0);let y=new oe(g.getX(),p);s?a=y:u=y}if(i>0){let g=s?this.bottomLeft:this.bottomRight,p=Math.trunc(g.getY()+i);p>=this.image.getHeight()&&(p=this.image.getHeight()-1);let y=new oe(g.getX(),p);s?l=y:h=y}return new Yr(this.image,a,l,u,h)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Dg{constructor(n,i,s,a){this.columnCount=n,this.errorCorrectionLevel=a,this.rowCountUpperPart=i,this.rowCountLowerPart=s,this.rowCount=i+s}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class ms{constructor(){this.buffer=""}static form(n,i){let s=-1;function a(u,h,g,p,y,E){if(u==="%%")return"%";if(i[++s]===void 0)return;u=p?parseInt(p.substr(1)):void 0;let A=y?parseInt(y.substr(1)):void 0,T;switch(E){case"s":T=i[s];break;case"c":T=i[s][0];break;case"f":T=parseFloat(i[s]).toFixed(u);break;case"p":T=parseFloat(i[s]).toPrecision(u);break;case"e":T=parseFloat(i[s]).toExponential(u);break;case"x":T=parseInt(i[s]).toString(A||16);break;case"d":T=parseFloat(parseInt(i[s],A||10).toPrecision(u)).toFixed(0);break}T=typeof T=="object"?JSON.stringify(T):(+T).toString(A);let R=parseInt(g),D=g&&g[0]+""=="0"?"0":" ";for(;T.length<R;)T=h!==void 0?T+D:D+T;return T}let l=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return n.replace(l,a)}format(n,...i){this.buffer+=ms.form(n,i)}toString(){return this.buffer}}class ws{constructor(n){this.boundingBox=new Yr(n),this.codewords=new Array(n.getMaxY()-n.getMinY()+1)}getCodewordNearby(n){let i=this.getCodeword(n);if(i!=null)return i;for(let s=1;s<ws.MAX_NEARBY_DISTANCE;s++){let a=this.imageRowToCodewordIndex(n)-s;if(a>=0&&(i=this.codewords[a],i!=null)||(a=this.imageRowToCodewordIndex(n)+s,a<this.codewords.length&&(i=this.codewords[a],i!=null)))return i}return null}imageRowToCodewordIndex(n){return n-this.boundingBox.getMinY()}setCodeword(n,i){this.codewords[this.imageRowToCodewordIndex(n)]=i}getCodeword(n){return this.codewords[this.imageRowToCodewordIndex(n)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const n=new ms;let i=0;for(const s of this.codewords){if(s==null){n.format("%3d:    |   %n",i++);continue}n.format("%3d: %3d|%3d%n",i++,s.getRowNumber(),s.getValue())}return n.toString()}}ws.MAX_NEARBY_DISTANCE=5;class ys{constructor(){this.values=new Map}setValue(n){n=Math.trunc(n);let i=this.values.get(n);i==null&&(i=0),i++,this.values.set(n,i)}getValue(){let n=-1,i=new Array;for(const[s,a]of this.values.entries()){const l={getKey:()=>s,getValue:()=>a};l.getValue()>n?(n=l.getValue(),i=[],i.push(l.getKey())):l.getValue()===n&&i.push(l.getKey())}return ge.toIntArray(i)}getConfidence(n){return this.values.get(n)}}class Rd extends ws{constructor(n,i){super(n),this._isLeft=i}setRowNumbers(){for(let n of this.getCodewords())n!=null&&n.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(n){let i=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(i,n);let s=this.getBoundingBox(),a=this._isLeft?s.getTopLeft():s.getTopRight(),l=this._isLeft?s.getBottomLeft():s.getBottomRight(),u=this.imageRowToCodewordIndex(Math.trunc(a.getY())),h=this.imageRowToCodewordIndex(Math.trunc(l.getY())),g=-1,p=1,y=0;for(let E=u;E<h;E++){if(i[E]==null)continue;let A=i[E],T=A.getRowNumber()-g;if(T===0)y++;else if(T===1)p=Math.max(p,y),y=1,g=A.getRowNumber();else if(T<0||A.getRowNumber()>=n.getRowCount()||T>E)i[E]=null;else{let R;p>2?R=(p-2)*T:R=T;let D=R>=E;for(let B=1;B<=R&&!D;B++)D=i[E-B]!=null;D?i[E]=null:(g=A.getRowNumber(),y=1)}}}getRowHeights(){let n=this.getBarcodeMetadata();if(n==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(n);let i=new Int32Array(n.getRowCount());for(let s of this.getCodewords())if(s!=null){let a=s.getRowNumber();if(a>=i.length)continue;i[a]++}return i}adjustIncompleteIndicatorColumnRowNumbers(n){let i=this.getBoundingBox(),s=this._isLeft?i.getTopLeft():i.getTopRight(),a=this._isLeft?i.getBottomLeft():i.getBottomRight(),l=this.imageRowToCodewordIndex(Math.trunc(s.getY())),u=this.imageRowToCodewordIndex(Math.trunc(a.getY())),h=this.getCodewords(),g=-1;for(let p=l;p<u;p++){if(h[p]==null)continue;let y=h[p];y.setRowNumberAsRowIndicatorColumn();let E=y.getRowNumber()-g;E===0||(E===1?g=y.getRowNumber():y.getRowNumber()>=n.getRowCount()?h[p]=null:g=y.getRowNumber())}}getBarcodeMetadata(){let n=this.getCodewords(),i=new ys,s=new ys,a=new ys,l=new ys;for(let h of n){if(h==null)continue;h.setRowNumberAsRowIndicatorColumn();let g=h.getValue()%30,p=h.getRowNumber();switch(this._isLeft||(p+=2),p%3){case 0:s.setValue(g*3+1);break;case 1:l.setValue(g/3),a.setValue(g%3);break;case 2:i.setValue(g+1);break}}if(i.getValue().length===0||s.getValue().length===0||a.getValue().length===0||l.getValue().length===0||i.getValue()[0]<1||s.getValue()[0]+a.getValue()[0]<ge.MIN_ROWS_IN_BARCODE||s.getValue()[0]+a.getValue()[0]>ge.MAX_ROWS_IN_BARCODE)return null;let u=new Dg(i.getValue()[0],s.getValue()[0],a.getValue()[0],l.getValue()[0]);return this.removeIncorrectCodewords(n,u),u}removeIncorrectCodewords(n,i){for(let s=0;s<n.length;s++){let a=n[s];if(n[s]==null)continue;let l=a.getValue()%30,u=a.getRowNumber();if(u>i.getRowCount()){n[s]=null;continue}switch(this._isLeft||(u+=2),u%3){case 0:l*3+1!==i.getRowCountUpperPart()&&(n[s]=null);break;case 1:(Math.trunc(l/3)!==i.getErrorCorrectionLevel()||l%3!==i.getRowCountLowerPart())&&(n[s]=null);break;case 2:l+1!==i.getColumnCount()&&(n[s]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class vs{constructor(n,i){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=n,this.barcodeColumnCount=n.getColumnCount(),this.boundingBox=i,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let n=ge.MAX_CODEWORDS_IN_BARCODE,i;do i=n,n=this.adjustRowNumbersAndGetCount();while(n>0&&n<i);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(n){n!=null&&n.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let n=this.adjustRowNumbersByRow();if(n===0)return 0;for(let i=1;i<this.barcodeColumnCount+1;i++){let s=this.detectionResultColumns[i].getCodewords();for(let a=0;a<s.length;a++)s[a]!=null&&(s[a].hasValidRowNumber()||this.adjustRowNumbers(i,a,s))}return n}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let n=this.detectionResultColumns[0].getCodewords(),i=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let s=0;s<n.length;s++)if(n[s]!=null&&i[s]!=null&&n[s].getRowNumber()===i[s].getRowNumber())for(let a=1;a<=this.barcodeColumnCount;a++){let l=this.detectionResultColumns[a].getCodewords()[s];l!=null&&(l.setRowNumber(n[s].getRowNumber()),l.hasValidRowNumber()||(this.detectionResultColumns[a].getCodewords()[s]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let n=0,i=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let s=0;s<i.length;s++){if(i[s]==null)continue;let a=i[s].getRowNumber(),l=0;for(let u=this.barcodeColumnCount+1;u>0&&l<this.ADJUST_ROW_NUMBER_SKIP;u--){let h=this.detectionResultColumns[u].getCodewords()[s];h!=null&&(l=vs.adjustRowNumberIfValid(a,l,h),h.hasValidRowNumber()||n++)}}return n}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let n=0,i=this.detectionResultColumns[0].getCodewords();for(let s=0;s<i.length;s++){if(i[s]==null)continue;let a=i[s].getRowNumber(),l=0;for(let u=1;u<this.barcodeColumnCount+1&&l<this.ADJUST_ROW_NUMBER_SKIP;u++){let h=this.detectionResultColumns[u].getCodewords()[s];h!=null&&(l=vs.adjustRowNumberIfValid(a,l,h),h.hasValidRowNumber()||n++)}}return n}static adjustRowNumberIfValid(n,i,s){return s==null||s.hasValidRowNumber()||(s.isValidRowNumber(n)?(s.setRowNumber(n),i=0):++i),i}adjustRowNumbers(n,i,s){if(!this.detectionResultColumns[n-1])return;let a=s[i],l=this.detectionResultColumns[n-1].getCodewords(),u=l;this.detectionResultColumns[n+1]!=null&&(u=this.detectionResultColumns[n+1].getCodewords());let h=new Array(14);h[2]=l[i],h[3]=u[i],i>0&&(h[0]=s[i-1],h[4]=l[i-1],h[5]=u[i-1]),i>1&&(h[8]=s[i-2],h[10]=l[i-2],h[11]=u[i-2]),i<s.length-1&&(h[1]=s[i+1],h[6]=l[i+1],h[7]=u[i+1]),i<s.length-2&&(h[9]=s[i+2],h[12]=l[i+2],h[13]=u[i+2]);for(let g of h)if(vs.adjustRowNumber(a,g))return}static adjustRowNumber(n,i){return i==null?!1:i.hasValidRowNumber()&&i.getBucket()===n.getBucket()?(n.setRowNumber(i.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(n){this.boundingBox=n}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(n,i){this.detectionResultColumns[n]=i}getDetectionResultColumn(n){return this.detectionResultColumns[n]}toString(){let n=this.detectionResultColumns[0];n==null&&(n=this.detectionResultColumns[this.barcodeColumnCount+1]);let i=new ms;for(let s=0;s<n.getCodewords().length;s++){i.format("CW %3d:",s);for(let a=0;a<this.barcodeColumnCount+2;a++){if(this.detectionResultColumns[a]==null){i.format("    |   ");continue}let l=this.detectionResultColumns[a].getCodewords()[s];if(l==null){i.format("    |   ");continue}i.format(" %3d|%3d",l.getRowNumber(),l.getValue())}i.format("%n")}return i.toString()}}class Es{constructor(n,i,s,a){this.rowNumber=Es.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(n),this.endX=Math.trunc(i),this.bucket=Math.trunc(s),this.value=Math.trunc(a)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(n){return n!==Es.BARCODE_ROW_UNKNOWN&&this.bucket===n%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(n){this.rowNumber=n}toString(){return this.rowNumber+"|"+this.value}}Es.BARCODE_ROW_UNKNOWN=-1;class Zt{static initialize(){for(let n=0;n<ge.SYMBOL_TABLE.length;n++){let i=ge.SYMBOL_TABLE[n],s=i&1;for(let a=0;a<ge.BARS_IN_MODULE;a++){let l=0;for(;(i&1)===s;)l+=1,i>>=1;s=i&1,Zt.RATIOS_TABLE[n]||(Zt.RATIOS_TABLE[n]=new Array(ge.BARS_IN_MODULE)),Zt.RATIOS_TABLE[n][ge.BARS_IN_MODULE-a-1]=Math.fround(l/ge.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(n){let i=Zt.getDecodedCodewordValue(Zt.sampleBitCounts(n));return i!==-1?i:Zt.getClosestDecodedValue(n)}static sampleBitCounts(n){let i=Te.sum(n),s=new Int32Array(ge.BARS_IN_MODULE),a=0,l=0;for(let u=0;u<ge.MODULES_IN_CODEWORD;u++){let h=i/(2*ge.MODULES_IN_CODEWORD)+u*i/ge.MODULES_IN_CODEWORD;l+n[a]<=h&&(l+=n[a],a++),s[a]++}return s}static getDecodedCodewordValue(n){let i=Zt.getBitValue(n);return ge.getCodeword(i)===-1?-1:i}static getBitValue(n){let i=0;for(let s=0;s<n.length;s++)for(let a=0;a<n[s];a++)i=i<<1|(s%2===0?1:0);return Math.trunc(i)}static getClosestDecodedValue(n){let i=Te.sum(n),s=new Array(ge.BARS_IN_MODULE);if(i>1)for(let u=0;u<s.length;u++)s[u]=Math.fround(n[u]/i);let a=So.MAX_VALUE,l=-1;this.bSymbolTableReady||Zt.initialize();for(let u=0;u<Zt.RATIOS_TABLE.length;u++){let h=0,g=Zt.RATIOS_TABLE[u];for(let p=0;p<ge.BARS_IN_MODULE;p++){let y=Math.fround(g[p]-s[p]);if(h+=Math.fround(y*y),h>=a)break}h<a&&(a=h,l=ge.SYMBOL_TABLE[u])}return l}}Zt.bSymbolTableReady=!1,Zt.RATIOS_TABLE=new Array(ge.SYMBOL_TABLE.length).map(v=>new Array(ge.BARS_IN_MODULE));class kd{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(n){this.segmentIndex=n}getFileId(){return this.fileId}setFileId(n){this.fileId=n}getOptionalData(){return this.optionalData}setOptionalData(n){this.optionalData=n}isLastSegment(){return this.lastSegment}setLastSegment(n){this.lastSegment=n}getSegmentCount(){return this.segmentCount}setSegmentCount(n){this.segmentCount=n}getSender(){return this.sender||null}setSender(n){this.sender=n}getAddressee(){return this.addressee||null}setAddressee(n){this.addressee=n}getFileName(){return this.fileName}setFileName(n){this.fileName=n}getFileSize(){return this.fileSize}setFileSize(n){this.fileSize=n}getChecksum(){return this.checksum}setChecksum(n){this.checksum=n}getTimestamp(){return this.timestamp}setTimestamp(n){this.timestamp=n}}class Dd{static parseLong(n,i=void 0){return parseInt(n,i)}}class Pd extends m{}Pd.kind="NullPointerException";class Pg{writeBytes(n){this.writeBytesOffset(n,0,n.length)}writeBytesOffset(n,i,s){if(n==null)throw new Pd;if(i<0||i>n.length||s<0||i+s>n.length||i+s<0)throw new G;if(s===0)return;for(let a=0;a<s;a++)this.write(n[i+a])}flush(){}close(){}}class Mg extends m{}class Lg extends Pg{constructor(n=32){if(super(),this.count=0,n<0)throw new _("Negative initial size: "+n);this.buf=new Uint8Array(n)}ensureCapacity(n){n-this.buf.length>0&&this.grow(n)}grow(n){let s=this.buf.length<<1;if(s-n<0&&(s=n),s<0){if(n<0)throw new Mg;s=b.MAX_VALUE}this.buf=N.copyOfUint8Array(this.buf,s)}write(n){this.ensureCapacity(this.count+1),this.buf[this.count]=n,this.count+=1}writeBytesOffset(n,i,s){if(i<0||i>n.length||s<0||i+s-n.length>0)throw new G;this.ensureCapacity(this.count+s),F.arraycopy(n,i,this.buf,this.count,s),this.count+=s}writeTo(n){n.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return N.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(n){return n?typeof n=="string"?this.toString_string(n):this.toString_number(n):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(n){return new String(this.buf).toString()}toString_number(n){return new String(this.buf).toString()}close(){}}var Be;(function(v){v[v.ALPHA=0]="ALPHA",v[v.LOWER=1]="LOWER",v[v.MIXED=2]="MIXED",v[v.PUNCT=3]="PUNCT",v[v.ALPHA_SHIFT=4]="ALPHA_SHIFT",v[v.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Be||(Be={}));function Md(){if(typeof window<"u")return window.BigInt||null;if(typeof kt<"u")return kt.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let ko;function mr(v){if(typeof ko>"u"&&(ko=Md()),ko===null)throw new Error("BigInt is not supported!");return ko(v)}function Bg(){let v=[];v[0]=mr(1);let n=mr(900);v[1]=n;for(let i=2;i<16;i++)v[i]=v[i-1]*n;return v}class V{static decode(n,i){let s=new ee(""),a=X.ISO8859_1;s.enableDecoding(a);let l=1,u=n[l++],h=new kd;for(;l<n[0];){switch(u){case V.TEXT_COMPACTION_MODE_LATCH:l=V.textCompaction(n,l,s);break;case V.BYTE_COMPACTION_MODE_LATCH:case V.BYTE_COMPACTION_MODE_LATCH_6:l=V.byteCompaction(u,n,a,l,s);break;case V.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:s.append(n[l++]);break;case V.NUMERIC_COMPACTION_MODE_LATCH:l=V.numericCompaction(n,l,s);break;case V.ECI_CHARSET:X.getCharacterSetECIByValue(n[l++]);break;case V.ECI_GENERAL_PURPOSE:l+=2;break;case V.ECI_USER_DEFINED:l++;break;case V.BEGIN_MACRO_PDF417_CONTROL_BLOCK:l=V.decodeMacroBlock(n,l,h);break;case V.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case V.MACRO_PDF417_TERMINATOR:throw new U;default:l--,l=V.textCompaction(n,l,s);break}if(l<n.length)u=n[l++];else throw U.getFormatInstance()}if(s.length()===0)throw U.getFormatInstance();let g=new hs(null,s.toString(),null,i);return g.setOther(h),g}static decodeMacroBlock(n,i,s){if(i+V.NUMBER_OF_SEQUENCE_CODEWORDS>n[0])throw U.getFormatInstance();let a=new Int32Array(V.NUMBER_OF_SEQUENCE_CODEWORDS);for(let h=0;h<V.NUMBER_OF_SEQUENCE_CODEWORDS;h++,i++)a[h]=n[i];s.setSegmentIndex(b.parseInt(V.decodeBase900toBase10(a,V.NUMBER_OF_SEQUENCE_CODEWORDS)));let l=new ee;i=V.textCompaction(n,i,l),s.setFileId(l.toString());let u=-1;for(n[i]===V.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(u=i+1);i<n[0];)switch(n[i]){case V.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(i++,n[i]){case V.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let h=new ee;i=V.textCompaction(n,i+1,h),s.setFileName(h.toString());break;case V.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let g=new ee;i=V.textCompaction(n,i+1,g),s.setSender(g.toString());break;case V.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let p=new ee;i=V.textCompaction(n,i+1,p),s.setAddressee(p.toString());break;case V.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let y=new ee;i=V.numericCompaction(n,i+1,y),s.setSegmentCount(b.parseInt(y.toString()));break;case V.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let E=new ee;i=V.numericCompaction(n,i+1,E),s.setTimestamp(Dd.parseLong(E.toString()));break;case V.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let A=new ee;i=V.numericCompaction(n,i+1,A),s.setChecksum(b.parseInt(A.toString()));break;case V.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let T=new ee;i=V.numericCompaction(n,i+1,T),s.setFileSize(Dd.parseLong(T.toString()));break;default:throw U.getFormatInstance()}break;case V.MACRO_PDF417_TERMINATOR:i++,s.setLastSegment(!0);break;default:throw U.getFormatInstance()}if(u!==-1){let h=i-u;s.isLastSegment()&&h--,s.setOptionalData(N.copyOfRange(n,u,u+h))}return i}static textCompaction(n,i,s){let a=new Int32Array((n[0]-i)*2),l=new Int32Array((n[0]-i)*2),u=0,h=!1;for(;i<n[0]&&!h;){let g=n[i++];if(g<V.TEXT_COMPACTION_MODE_LATCH)a[u]=g/30,a[u+1]=g%30,u+=2;else switch(g){case V.TEXT_COMPACTION_MODE_LATCH:a[u++]=V.TEXT_COMPACTION_MODE_LATCH;break;case V.BYTE_COMPACTION_MODE_LATCH:case V.BYTE_COMPACTION_MODE_LATCH_6:case V.NUMERIC_COMPACTION_MODE_LATCH:case V.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case V.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case V.MACRO_PDF417_TERMINATOR:i--,h=!0;break;case V.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a[u]=V.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,g=n[i++],l[u]=g,u++;break}}return V.decodeTextCompaction(a,l,u,s),i}static decodeTextCompaction(n,i,s,a){let l=Be.ALPHA,u=Be.ALPHA,h=0;for(;h<s;){let g=n[h],p="";switch(l){case Be.ALPHA:if(g<26)p=String.fromCharCode(65+g);else switch(g){case 26:p=" ";break;case V.LL:l=Be.LOWER;break;case V.ML:l=Be.MIXED;break;case V.PS:u=l,l=Be.PUNCT_SHIFT;break;case V.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(i[h]);break;case V.TEXT_COMPACTION_MODE_LATCH:l=Be.ALPHA;break}break;case Be.LOWER:if(g<26)p=String.fromCharCode(97+g);else switch(g){case 26:p=" ";break;case V.AS:u=l,l=Be.ALPHA_SHIFT;break;case V.ML:l=Be.MIXED;break;case V.PS:u=l,l=Be.PUNCT_SHIFT;break;case V.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(i[h]);break;case V.TEXT_COMPACTION_MODE_LATCH:l=Be.ALPHA;break}break;case Be.MIXED:if(g<V.PL)p=V.MIXED_CHARS[g];else switch(g){case V.PL:l=Be.PUNCT;break;case 26:p=" ";break;case V.LL:l=Be.LOWER;break;case V.AL:l=Be.ALPHA;break;case V.PS:u=l,l=Be.PUNCT_SHIFT;break;case V.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(i[h]);break;case V.TEXT_COMPACTION_MODE_LATCH:l=Be.ALPHA;break}break;case Be.PUNCT:if(g<V.PAL)p=V.PUNCT_CHARS[g];else switch(g){case V.PAL:l=Be.ALPHA;break;case V.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(i[h]);break;case V.TEXT_COMPACTION_MODE_LATCH:l=Be.ALPHA;break}break;case Be.ALPHA_SHIFT:if(l=u,g<26)p=String.fromCharCode(65+g);else switch(g){case 26:p=" ";break;case V.TEXT_COMPACTION_MODE_LATCH:l=Be.ALPHA;break}break;case Be.PUNCT_SHIFT:if(l=u,g<V.PAL)p=V.PUNCT_CHARS[g];else switch(g){case V.PAL:l=Be.ALPHA;break;case V.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(i[h]);break;case V.TEXT_COMPACTION_MODE_LATCH:l=Be.ALPHA;break}break}p!==""&&a.append(p),h++}}static byteCompaction(n,i,s,a,l){let u=new Lg,h=0,g=0,p=!1;switch(n){case V.BYTE_COMPACTION_MODE_LATCH:let y=new Int32Array(6),E=i[a++];for(;a<i[0]&&!p;)switch(y[h++]=E,g=900*g+E,E=i[a++],E){case V.TEXT_COMPACTION_MODE_LATCH:case V.BYTE_COMPACTION_MODE_LATCH:case V.NUMERIC_COMPACTION_MODE_LATCH:case V.BYTE_COMPACTION_MODE_LATCH_6:case V.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case V.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case V.MACRO_PDF417_TERMINATOR:a--,p=!0;break;default:if(h%5===0&&h>0){for(let A=0;A<6;++A)u.write(Number(mr(g)>>mr(8*(5-A))));g=0,h=0}break}a===i[0]&&E<V.TEXT_COMPACTION_MODE_LATCH&&(y[h++]=E);for(let A=0;A<h;A++)u.write(y[A]);break;case V.BYTE_COMPACTION_MODE_LATCH_6:for(;a<i[0]&&!p;){let A=i[a++];if(A<V.TEXT_COMPACTION_MODE_LATCH)h++,g=900*g+A;else switch(A){case V.TEXT_COMPACTION_MODE_LATCH:case V.BYTE_COMPACTION_MODE_LATCH:case V.NUMERIC_COMPACTION_MODE_LATCH:case V.BYTE_COMPACTION_MODE_LATCH_6:case V.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case V.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case V.MACRO_PDF417_TERMINATOR:a--,p=!0;break}if(h%5===0&&h>0){for(let T=0;T<6;++T)u.write(Number(mr(g)>>mr(8*(5-T))));g=0,h=0}}break}return l.append(Le.decode(u.toByteArray(),s)),a}static numericCompaction(n,i,s){let a=0,l=!1,u=new Int32Array(V.MAX_NUMERIC_CODEWORDS);for(;i<n[0]&&!l;){let h=n[i++];if(i===n[0]&&(l=!0),h<V.TEXT_COMPACTION_MODE_LATCH)u[a]=h,a++;else switch(h){case V.TEXT_COMPACTION_MODE_LATCH:case V.BYTE_COMPACTION_MODE_LATCH:case V.BYTE_COMPACTION_MODE_LATCH_6:case V.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case V.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case V.MACRO_PDF417_TERMINATOR:i--,l=!0;break}(a%V.MAX_NUMERIC_CODEWORDS===0||h===V.NUMERIC_COMPACTION_MODE_LATCH||l)&&a>0&&(s.append(V.decodeBase900toBase10(u,a)),a=0)}return i}static decodeBase900toBase10(n,i){let s=mr(0);for(let l=0;l<i;l++)s+=V.EXP900[i-l-1]*mr(n[l]);let a=s.toString();if(a.charAt(0)!=="1")throw new U;return a.substring(1)}}V.TEXT_COMPACTION_MODE_LATCH=900,V.BYTE_COMPACTION_MODE_LATCH=901,V.NUMERIC_COMPACTION_MODE_LATCH=902,V.BYTE_COMPACTION_MODE_LATCH_6=924,V.ECI_USER_DEFINED=925,V.ECI_GENERAL_PURPOSE=926,V.ECI_CHARSET=927,V.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,V.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,V.MACRO_PDF417_TERMINATOR=922,V.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,V.MAX_NUMERIC_CODEWORDS=15,V.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,V.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,V.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,V.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,V.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,V.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,V.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,V.PL=25,V.LL=27,V.AS=27,V.ML=28,V.AL=28,V.PS=29,V.PAL=29,V.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,V.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",V.EXP900=Md()?Bg():[],V.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Ce{constructor(){}static decode(n,i,s,a,l,u,h){let g=new Yr(n,i,s,a,l),p=null,y=null,E;for(let R=!0;;R=!1){if(i!=null&&(p=Ce.getRowIndicatorColumn(n,g,i,!0,u,h)),a!=null&&(y=Ce.getRowIndicatorColumn(n,g,a,!1,u,h)),E=Ce.merge(p,y),E==null)throw W.getNotFoundInstance();let D=E.getBoundingBox();if(R&&D!=null&&(D.getMinY()<g.getMinY()||D.getMaxY()>g.getMaxY()))g=D;else break}E.setBoundingBox(g);let A=E.getBarcodeColumnCount()+1;E.setDetectionResultColumn(0,p),E.setDetectionResultColumn(A,y);let T=p!=null;for(let R=1;R<=A;R++){let D=T?R:A-R;if(E.getDetectionResultColumn(D)!==void 0)continue;let B;D===0||D===A?B=new Rd(g,D===0):B=new ws(g),E.setDetectionResultColumn(D,B);let z=-1,Z=z;for(let Q=g.getMinY();Q<=g.getMaxY();Q++){if(z=Ce.getStartColumn(E,D,Q,T),z<0||z>g.getMaxX()){if(Z===-1)continue;z=Z}let Y=Ce.detectCodeword(n,g.getMinX(),g.getMaxX(),T,z,Q,u,h);Y!=null&&(B.setCodeword(Q,Y),Z=z,u=Math.min(u,Y.getWidth()),h=Math.max(h,Y.getWidth()))}}return Ce.createDecoderResult(E)}static merge(n,i){if(n==null&&i==null)return null;let s=Ce.getBarcodeMetadata(n,i);if(s==null)return null;let a=Yr.merge(Ce.adjustBoundingBox(n),Ce.adjustBoundingBox(i));return new vs(s,a)}static adjustBoundingBox(n){if(n==null)return null;let i=n.getRowHeights();if(i==null)return null;let s=Ce.getMax(i),a=0;for(let h of i)if(a+=s-h,h>0)break;let l=n.getCodewords();for(let h=0;a>0&&l[h]==null;h++)a--;let u=0;for(let h=i.length-1;h>=0&&(u+=s-i[h],!(i[h]>0));h--);for(let h=l.length-1;u>0&&l[h]==null;h--)u--;return n.getBoundingBox().addMissingRows(a,u,n.isLeft())}static getMax(n){let i=-1;for(let s of n)i=Math.max(i,s);return i}static getBarcodeMetadata(n,i){let s;if(n==null||(s=n.getBarcodeMetadata())==null)return i==null?null:i.getBarcodeMetadata();let a;return i==null||(a=i.getBarcodeMetadata())==null?s:s.getColumnCount()!==a.getColumnCount()&&s.getErrorCorrectionLevel()!==a.getErrorCorrectionLevel()&&s.getRowCount()!==a.getRowCount()?null:s}static getRowIndicatorColumn(n,i,s,a,l,u){let h=new Rd(i,a);for(let g=0;g<2;g++){let p=g===0?1:-1,y=Math.trunc(Math.trunc(s.getX()));for(let E=Math.trunc(Math.trunc(s.getY()));E<=i.getMaxY()&&E>=i.getMinY();E+=p){let A=Ce.detectCodeword(n,0,n.getWidth(),a,y,E,l,u);A!=null&&(h.setCodeword(E,A),a?y=A.getStartX():y=A.getEndX())}}return h}static adjustCodewordCount(n,i){let s=i[0][1],a=s.getValue(),l=n.getBarcodeColumnCount()*n.getBarcodeRowCount()-Ce.getNumberOfECCodeWords(n.getBarcodeECLevel());if(a.length===0){if(l<1||l>ge.MAX_CODEWORDS_IN_BARCODE)throw W.getNotFoundInstance();s.setValue(l)}else a[0]!==l&&s.setValue(l)}static createDecoderResult(n){let i=Ce.createBarcodeMatrix(n);Ce.adjustCodewordCount(n,i);let s=new Array,a=new Int32Array(n.getBarcodeRowCount()*n.getBarcodeColumnCount()),l=[],u=new Array;for(let g=0;g<n.getBarcodeRowCount();g++)for(let p=0;p<n.getBarcodeColumnCount();p++){let y=i[g][p+1].getValue(),E=g*n.getBarcodeColumnCount()+p;y.length===0?s.push(E):y.length===1?a[E]=y[0]:(u.push(E),l.push(y))}let h=new Array(l.length);for(let g=0;g<h.length;g++)h[g]=l[g];return Ce.createDecoderResultFromAmbiguousValues(n.getBarcodeECLevel(),a,ge.toIntArray(s),ge.toIntArray(u),h)}static createDecoderResultFromAmbiguousValues(n,i,s,a,l){let u=new Int32Array(a.length),h=100;for(;h-- >0;){for(let g=0;g<u.length;g++)i[a[g]]=l[g][u[g]];try{return Ce.decodeCodewords(i,n,s)}catch(g){if(!(g instanceof P))throw g}if(u.length===0)throw P.getChecksumInstance();for(let g=0;g<u.length;g++)if(u[g]<l[g].length-1){u[g]++;break}else if(u[g]=0,g===u.length-1)throw P.getChecksumInstance()}throw P.getChecksumInstance()}static createBarcodeMatrix(n){let i=Array.from({length:n.getBarcodeRowCount()},()=>new Array(n.getBarcodeColumnCount()+2));for(let a=0;a<i.length;a++)for(let l=0;l<i[a].length;l++)i[a][l]=new ys;let s=0;for(let a of n.getDetectionResultColumns()){if(a!=null){for(let l of a.getCodewords())if(l!=null){let u=l.getRowNumber();if(u>=0){if(u>=i.length)continue;i[u][s].setValue(l.getValue())}}}s++}return i}static isValidBarcodeColumn(n,i){return i>=0&&i<=n.getBarcodeColumnCount()+1}static getStartColumn(n,i,s,a){let l=a?1:-1,u=null;if(Ce.isValidBarcodeColumn(n,i-l)&&(u=n.getDetectionResultColumn(i-l).getCodeword(s)),u!=null)return a?u.getEndX():u.getStartX();if(u=n.getDetectionResultColumn(i).getCodewordNearby(s),u!=null)return a?u.getStartX():u.getEndX();if(Ce.isValidBarcodeColumn(n,i-l)&&(u=n.getDetectionResultColumn(i-l).getCodewordNearby(s)),u!=null)return a?u.getEndX():u.getStartX();let h=0;for(;Ce.isValidBarcodeColumn(n,i-l);){i-=l;for(let g of n.getDetectionResultColumn(i).getCodewords())if(g!=null)return(a?g.getEndX():g.getStartX())+l*h*(g.getEndX()-g.getStartX());h++}return a?n.getBoundingBox().getMinX():n.getBoundingBox().getMaxX()}static detectCodeword(n,i,s,a,l,u,h,g){l=Ce.adjustCodewordStartColumn(n,i,s,a,l,u);let p=Ce.getModuleBitCount(n,i,s,a,l,u);if(p==null)return null;let y,E=Te.sum(p);if(a)y=l+E;else{for(let R=0;R<p.length/2;R++){let D=p[R];p[R]=p[p.length-1-R],p[p.length-1-R]=D}y=l,l=y-E}if(!Ce.checkCodewordSkew(E,h,g))return null;let A=Zt.getDecodedValue(p),T=ge.getCodeword(A);return T===-1?null:new Es(l,y,Ce.getCodewordBucketNumber(A),T)}static getModuleBitCount(n,i,s,a,l,u){let h=l,g=new Int32Array(8),p=0,y=a?1:-1,E=a;for(;(a?h<s:h>=i)&&p<g.length;)n.get(h,u)===E?(g[p]++,h+=y):(p++,E=!E);return p===g.length||h===(a?s:i)&&p===g.length-1?g:null}static getNumberOfECCodeWords(n){return 2<<n}static adjustCodewordStartColumn(n,i,s,a,l,u){let h=l,g=a?-1:1;for(let p=0;p<2;p++){for(;(a?h>=i:h<s)&&a===n.get(h,u);){if(Math.abs(l-h)>Ce.CODEWORD_SKEW_SIZE)return l;h+=g}g=-g,a=!a}return h}static checkCodewordSkew(n,i,s){return i-Ce.CODEWORD_SKEW_SIZE<=n&&n<=s+Ce.CODEWORD_SKEW_SIZE}static decodeCodewords(n,i,s){if(n.length===0)throw U.getFormatInstance();let a=1<<i+1,l=Ce.correctErrors(n,s,a);Ce.verifyCodewordCount(n,a);let u=V.decode(n,""+i);return u.setErrorsCorrected(l),u.setErasures(s.length),u}static correctErrors(n,i,s){if(i!=null&&i.length>s/2+Ce.MAX_ERRORS||s<0||s>Ce.MAX_EC_CODEWORDS)throw P.getChecksumInstance();return Ce.errorCorrection.decode(n,s,i)}static verifyCodewordCount(n,i){if(n.length<4)throw U.getFormatInstance();let s=n[0];if(s>n.length)throw U.getFormatInstance();if(s===0)if(i<n.length)n[0]=n.length-i;else throw U.getFormatInstance()}static getBitCountForCodeword(n){let i=new Int32Array(8),s=0,a=i.length-1;for(;!((n&1)!==s&&(s=n&1,a--,a<0));)i[a]++,n>>=1;return i}static getCodewordBucketNumber(n){return n instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(n):this.getCodewordBucketNumber_number(n)}static getCodewordBucketNumber_number(n){return Ce.getCodewordBucketNumber(Ce.getBitCountForCodeword(n))}static getCodewordBucketNumber_Int32Array(n){return(n[0]-n[2]+n[4]-n[6]+9)%9}static toString(n){let i=new ms;for(let s=0;s<n.length;s++){i.format("Row %2d: ",s);for(let a=0;a<n[s].length;a++){let l=n[s][a];l.getValue().length===0?i.format("        ",null):i.format("%4d(%2d)",l.getValue()[0],l.getConfidence(l.getValue()[0]))}i.format("%n")}return i.toString()}}Ce.CODEWORD_SKEW_SIZE=2,Ce.MAX_ERRORS=3,Ce.MAX_EC_CODEWORDS=512,Ce.errorCorrection=new Od;class Nt{decode(n,i=null){let s=Nt.decode(n,i,!1);if(s==null||s.length===0||s[0]==null)throw W.getNotFoundInstance();return s[0]}decodeMultiple(n,i=null){try{return Nt.decode(n,i,!0)}catch(s){throw s instanceof U||s instanceof P?W.getNotFoundInstance():s}}static decode(n,i,s){const a=new Array,l=Ee.detectMultiple(n,i,s);for(const u of l.getPoints()){const h=Ce.decode(l.getBits(),u[4],u[5],u[6],u[7],Nt.getMinCodewordWidth(u),Nt.getMaxCodewordWidth(u)),g=new Je(h.getText(),h.getRawBytes(),void 0,u,ae.PDF_417);g.putMetadata(Ct.ERROR_CORRECTION_LEVEL,h.getECLevel());const p=h.getOther();p!=null&&g.putMetadata(Ct.PDF417_EXTRA_METADATA,p),a.push(g)}return a.map(u=>u)}static getMaxWidth(n,i){return n==null||i==null?0:Math.trunc(Math.abs(n.getX()-i.getX()))}static getMinWidth(n,i){return n==null||i==null?b.MAX_VALUE:Math.trunc(Math.abs(n.getX()-i.getX()))}static getMaxCodewordWidth(n){return Math.floor(Math.max(Math.max(Nt.getMaxWidth(n[0],n[4]),Nt.getMaxWidth(n[6],n[2])*ge.MODULES_IN_CODEWORD/ge.MODULES_IN_STOP_PATTERN),Math.max(Nt.getMaxWidth(n[1],n[5]),Nt.getMaxWidth(n[7],n[3])*ge.MODULES_IN_CODEWORD/ge.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(n){return Math.floor(Math.min(Math.min(Nt.getMinWidth(n[0],n[4]),Nt.getMinWidth(n[6],n[2])*ge.MODULES_IN_CODEWORD/ge.MODULES_IN_STOP_PATTERN),Math.min(Nt.getMinWidth(n[1],n[5]),Nt.getMinWidth(n[7],n[3])*ge.MODULES_IN_CODEWORD/ge.MODULES_IN_STOP_PATTERN)))}reset(){}}class Do extends m{}Do.kind="ReaderException";class Ld{constructor(n,i){this.verbose=n===!0,i&&this.setHints(i)}decode(n,i){return i&&this.setHints(i),this.decodeInternal(n)}decodeWithState(n){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(n)}setHints(n){this.hints=n;const i=!o(n)&&n.get(H.TRY_HARDER)===!0,s=o(n)?null:n.get(H.POSSIBLE_FORMATS),a=new Array;if(!o(s)){const l=s.some(u=>u===ae.UPC_A||u===ae.UPC_E||u===ae.EAN_13||u===ae.EAN_8||u===ae.CODABAR||u===ae.CODE_39||u===ae.CODE_93||u===ae.CODE_128||u===ae.ITF||u===ae.RSS_14||u===ae.RSS_EXPANDED);l&&!i&&a.push(new vi(n,this.verbose)),s.includes(ae.QR_CODE)&&a.push(new xr),s.includes(ae.DATA_MATRIX)&&a.push(new pr),s.includes(ae.AZTEC)&&a.push(new Io),s.includes(ae.PDF_417)&&a.push(new Nt),l&&i&&a.push(new vi(n,this.verbose))}a.length===0&&(i||a.push(new vi(n,this.verbose)),a.push(new xr),a.push(new pr),a.push(new Io),a.push(new Nt),i&&a.push(new vi(n,this.verbose))),this.readers=a}reset(){if(this.readers!==null)for(const n of this.readers)n.reset()}decodeInternal(n){if(this.readers===null)throw new Do("No readers where selected, nothing can be read.");for(const i of this.readers)try{return i.decode(n,this.hints)}catch(s){if(s instanceof Do)continue}throw new W("No MultiFormat Readers were able to detect the code.")}}class Fg extends pn{constructor(n=null,i=500){const s=new Ld;s.setHints(n),super(s,i)}decodeBitmap(n){return this.reader.decodeWithState(n)}}class jg extends pn{constructor(n=500){super(new Nt,n)}}class Ug extends pn{constructor(n=500){super(new xr,n)}}var Tl;(function(v){v[v.ERROR_CORRECTION=0]="ERROR_CORRECTION",v[v.CHARACTER_SET=1]="CHARACTER_SET",v[v.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",v[v.MIN_SIZE=3]="MIN_SIZE",v[v.MAX_SIZE=4]="MAX_SIZE",v[v.MARGIN=5]="MARGIN",v[v.PDF417_COMPACT=6]="PDF417_COMPACT",v[v.PDF417_COMPACTION=7]="PDF417_COMPACTION",v[v.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",v[v.AZTEC_LAYERS=9]="AZTEC_LAYERS",v[v.QR_VERSION=10]="QR_VERSION"})(Tl||(Tl={}));var mt=Tl;class Nl{constructor(n){this.field=n,this.cachedGenerators=[],this.cachedGenerators.push(new Yt(n,Int32Array.from([1])))}buildGenerator(n){const i=this.cachedGenerators;if(n>=i.length){let s=i[i.length-1];const a=this.field;for(let l=i.length;l<=n;l++){const u=s.multiply(new Yt(a,Int32Array.from([1,a.exp(l-1+a.getGeneratorBase())])));i.push(u),s=u}}return i[n]}encode(n,i){if(i===0)throw new _("No error correction bytes");const s=n.length-i;if(s<=0)throw new _("No data bytes provided");const a=this.buildGenerator(i),l=new Int32Array(s);F.arraycopy(n,0,l,0,s);let u=new Yt(this.field,l);u=u.multiplyByMonomial(i,1);const g=u.divide(a)[1].getCoefficients(),p=i-g.length;for(let y=0;y<p;y++)n[s+y]=0;F.arraycopy(g,0,n,s+p,g.length)}}class at{constructor(){}static applyMaskPenaltyRule1(n){return at.applyMaskPenaltyRule1Internal(n,!0)+at.applyMaskPenaltyRule1Internal(n,!1)}static applyMaskPenaltyRule2(n){let i=0;const s=n.getArray(),a=n.getWidth(),l=n.getHeight();for(let u=0;u<l-1;u++){const h=s[u];for(let g=0;g<a-1;g++){const p=h[g];p===h[g+1]&&p===s[u+1][g]&&p===s[u+1][g+1]&&i++}}return at.N2*i}static applyMaskPenaltyRule3(n){let i=0;const s=n.getArray(),a=n.getWidth(),l=n.getHeight();for(let u=0;u<l;u++)for(let h=0;h<a;h++){const g=s[u];h+6<a&&g[h]===1&&g[h+1]===0&&g[h+2]===1&&g[h+3]===1&&g[h+4]===1&&g[h+5]===0&&g[h+6]===1&&(at.isWhiteHorizontal(g,h-4,h)||at.isWhiteHorizontal(g,h+7,h+11))&&i++,u+6<l&&s[u][h]===1&&s[u+1][h]===0&&s[u+2][h]===1&&s[u+3][h]===1&&s[u+4][h]===1&&s[u+5][h]===0&&s[u+6][h]===1&&(at.isWhiteVertical(s,h,u-4,u)||at.isWhiteVertical(s,h,u+7,u+11))&&i++}return i*at.N3}static isWhiteHorizontal(n,i,s){i=Math.max(i,0),s=Math.min(s,n.length);for(let a=i;a<s;a++)if(n[a]===1)return!1;return!0}static isWhiteVertical(n,i,s,a){s=Math.max(s,0),a=Math.min(a,n.length);for(let l=s;l<a;l++)if(n[l][i]===1)return!1;return!0}static applyMaskPenaltyRule4(n){let i=0;const s=n.getArray(),a=n.getWidth(),l=n.getHeight();for(let g=0;g<l;g++){const p=s[g];for(let y=0;y<a;y++)p[y]===1&&i++}const u=n.getHeight()*n.getWidth();return Math.floor(Math.abs(i*2-u)*10/u)*at.N4}static getDataMaskBit(n,i,s){let a,l;switch(n){case 0:a=s+i&1;break;case 1:a=s&1;break;case 2:a=i%3;break;case 3:a=(s+i)%3;break;case 4:a=Math.floor(s/2)+Math.floor(i/3)&1;break;case 5:l=s*i,a=(l&1)+l%3;break;case 6:l=s*i,a=(l&1)+l%3&1;break;case 7:l=s*i,a=l%3+(s+i&1)&1;break;default:throw new _("Invalid mask pattern: "+n)}return a===0}static applyMaskPenaltyRule1Internal(n,i){let s=0;const a=i?n.getHeight():n.getWidth(),l=i?n.getWidth():n.getHeight(),u=n.getArray();for(let h=0;h<a;h++){let g=0,p=-1;for(let y=0;y<l;y++){const E=i?u[h][y]:u[y][h];E===p?g++:(g>=5&&(s+=at.N1+(g-5)),g=1,p=E)}g>=5&&(s+=at.N1+(g-5))}return s}}at.N1=3,at.N2=3,at.N3=40,at.N4=10;class Po{constructor(n,i){this.width=n,this.height=i;const s=new Array(i);for(let a=0;a!==i;a++)s[a]=new Uint8Array(n);this.bytes=s}getHeight(){return this.height}getWidth(){return this.width}get(n,i){return this.bytes[i][n]}getArray(){return this.bytes}setNumber(n,i,s){this.bytes[i][n]=s}setBoolean(n,i,s){this.bytes[i][n]=s?1:0}clear(n){for(const i of this.bytes)N.fill(i,n)}equals(n){if(!(n instanceof Po))return!1;const i=n;if(this.width!==i.width||this.height!==i.height)return!1;for(let s=0,a=this.height;s<a;++s){const l=this.bytes[s],u=i.bytes[s];for(let h=0,g=this.width;h<g;++h)if(l[h]!==u[h])return!1}return!0}toString(){const n=new ee;for(let i=0,s=this.height;i<s;++i){const a=this.bytes[i];for(let l=0,u=this.width;l<u;++l)switch(a[l]){case 0:n.append(" 0");break;case 1:n.append(" 1");break;default:n.append("  ");break}n.append(`
`)}return n.toString()}}class Kr{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const n=new ee;return n.append(`<<
`),n.append(" mode: "),n.append(this.mode?this.mode.toString():"null"),n.append(`
 ecLevel: `),n.append(this.ecLevel?this.ecLevel.toString():"null"),n.append(`
 version: `),n.append(this.version?this.version.toString():"null"),n.append(`
 maskPattern: `),n.append(this.maskPattern.toString()),this.matrix?(n.append(`
 matrix:
`),n.append(this.matrix.toString())):n.append(`
 matrix: null
`),n.append(`>>
`),n.toString()}setMode(n){this.mode=n}setECLevel(n){this.ecLevel=n}setVersion(n){this.version=n}setMaskPattern(n){this.maskPattern=n}setMatrix(n){this.matrix=n}static isValidMaskPattern(n){return n>=0&&n<Kr.NUM_MASK_PATTERNS}}Kr.NUM_MASK_PATTERNS=8;class je extends m{}je.kind="WriterException";class he{constructor(){}static clearMatrix(n){n.clear(255)}static buildMatrix(n,i,s,a,l){he.clearMatrix(l),he.embedBasicPatterns(s,l),he.embedTypeInfo(i,a,l),he.maybeEmbedVersionInfo(s,l),he.embedDataBits(n,a,l)}static embedBasicPatterns(n,i){he.embedPositionDetectionPatternsAndSeparators(i),he.embedDarkDotAtLeftBottomCorner(i),he.maybeEmbedPositionAdjustmentPatterns(n,i),he.embedTimingPatterns(i)}static embedTypeInfo(n,i,s){const a=new L;he.makeTypeInfoBits(n,i,a);for(let l=0,u=a.getSize();l<u;++l){const h=a.get(a.getSize()-1-l),g=he.TYPE_INFO_COORDINATES[l],p=g[0],y=g[1];if(s.setBoolean(p,y,h),l<8){const E=s.getWidth()-l-1;s.setBoolean(E,8,h)}else{const A=s.getHeight()-7+(l-8);s.setBoolean(8,A,h)}}}static maybeEmbedVersionInfo(n,i){if(n.getVersionNumber()<7)return;const s=new L;he.makeVersionInfoBits(n,s);let a=6*3-1;for(let l=0;l<6;++l)for(let u=0;u<3;++u){const h=s.get(a);a--,i.setBoolean(l,i.getHeight()-11+u,h),i.setBoolean(i.getHeight()-11+u,l,h)}}static embedDataBits(n,i,s){let a=0,l=-1,u=s.getWidth()-1,h=s.getHeight()-1;for(;u>0;){for(u===6&&(u-=1);h>=0&&h<s.getHeight();){for(let g=0;g<2;++g){const p=u-g;if(!he.isEmpty(s.get(p,h)))continue;let y;a<n.getSize()?(y=n.get(a),++a):y=!1,i!==255&&at.getDataMaskBit(i,p,h)&&(y=!y),s.setBoolean(p,h,y)}h+=l}l=-l,h+=l,u-=2}if(a!==n.getSize())throw new je("Not all bits consumed: "+a+"/"+n.getSize())}static findMSBSet(n){return 32-b.numberOfLeadingZeros(n)}static calculateBCHCode(n,i){if(i===0)throw new _("0 polynomial");const s=he.findMSBSet(i);for(n<<=s-1;he.findMSBSet(n)>=s;)n^=i<<he.findMSBSet(n)-s;return n}static makeTypeInfoBits(n,i,s){if(!Kr.isValidMaskPattern(i))throw new je("Invalid mask pattern");const a=n.getBits()<<3|i;s.appendBits(a,5);const l=he.calculateBCHCode(a,he.TYPE_INFO_POLY);s.appendBits(l,10);const u=new L;if(u.appendBits(he.TYPE_INFO_MASK_PATTERN,15),s.xor(u),s.getSize()!==15)throw new je("should not happen but we got: "+s.getSize())}static makeVersionInfoBits(n,i){i.appendBits(n.getVersionNumber(),6);const s=he.calculateBCHCode(n.getVersionNumber(),he.VERSION_INFO_POLY);if(i.appendBits(s,12),i.getSize()!==18)throw new je("should not happen but we got: "+i.getSize())}static isEmpty(n){return n===255}static embedTimingPatterns(n){for(let i=8;i<n.getWidth()-8;++i){const s=(i+1)%2;he.isEmpty(n.get(i,6))&&n.setNumber(i,6,s),he.isEmpty(n.get(6,i))&&n.setNumber(6,i,s)}}static embedDarkDotAtLeftBottomCorner(n){if(n.get(8,n.getHeight()-8)===0)throw new je;n.setNumber(8,n.getHeight()-8,1)}static embedHorizontalSeparationPattern(n,i,s){for(let a=0;a<8;++a){if(!he.isEmpty(s.get(n+a,i)))throw new je;s.setNumber(n+a,i,0)}}static embedVerticalSeparationPattern(n,i,s){for(let a=0;a<7;++a){if(!he.isEmpty(s.get(n,i+a)))throw new je;s.setNumber(n,i+a,0)}}static embedPositionAdjustmentPattern(n,i,s){for(let a=0;a<5;++a){const l=he.POSITION_ADJUSTMENT_PATTERN[a];for(let u=0;u<5;++u)s.setNumber(n+u,i+a,l[u])}}static embedPositionDetectionPattern(n,i,s){for(let a=0;a<7;++a){const l=he.POSITION_DETECTION_PATTERN[a];for(let u=0;u<7;++u)s.setNumber(n+u,i+a,l[u])}}static embedPositionDetectionPatternsAndSeparators(n){const i=he.POSITION_DETECTION_PATTERN[0].length;he.embedPositionDetectionPattern(0,0,n),he.embedPositionDetectionPattern(n.getWidth()-i,0,n),he.embedPositionDetectionPattern(0,n.getWidth()-i,n);const s=8;he.embedHorizontalSeparationPattern(0,s-1,n),he.embedHorizontalSeparationPattern(n.getWidth()-s,s-1,n),he.embedHorizontalSeparationPattern(0,n.getWidth()-s,n);const a=7;he.embedVerticalSeparationPattern(a,0,n),he.embedVerticalSeparationPattern(n.getHeight()-a-1,0,n),he.embedVerticalSeparationPattern(a,n.getHeight()-a,n)}static maybeEmbedPositionAdjustmentPatterns(n,i){if(n.getVersionNumber()<2)return;const s=n.getVersionNumber()-1,a=he.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[s];for(let l=0,u=a.length;l!==u;l++){const h=a[l];if(h>=0)for(let g=0;g!==u;g++){const p=a[g];p>=0&&he.isEmpty(i.get(p,h))&&he.embedPositionAdjustmentPattern(p-2,h-2,i)}}}}he.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),he.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),he.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),he.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),he.VERSION_INFO_POLY=7973,he.TYPE_INFO_POLY=1335,he.TYPE_INFO_MASK_PATTERN=21522;class Vg{constructor(n,i){this.dataBytes=n,this.errorCorrectionBytes=i}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Ge{constructor(){}static calculateMaskPenalty(n){return at.applyMaskPenaltyRule1(n)+at.applyMaskPenaltyRule2(n)+at.applyMaskPenaltyRule3(n)+at.applyMaskPenaltyRule4(n)}static encode(n,i,s=null){let a=Ge.DEFAULT_BYTE_MODE_ENCODING;const l=s!==null&&s.get(mt.CHARACTER_SET)!==void 0;l&&(a=s.get(mt.CHARACTER_SET).toString());const u=this.chooseMode(n,a),h=new L;if(u===de.BYTE&&(l||Ge.DEFAULT_BYTE_MODE_ENCODING!==a)){const Q=X.getCharacterSetECIByName(a);Q!==void 0&&this.appendECI(Q,h)}this.appendModeInfo(u,h);const g=new L;this.appendBytes(n,u,g,a);let p;if(s!==null&&s.get(mt.QR_VERSION)!==void 0){const Q=Number.parseInt(s.get(mt.QR_VERSION).toString(),10);p=le.getVersionForNumber(Q);const Y=this.calculateBitsNeeded(u,h,g,p);if(!this.willFit(Y,p,i))throw new je("Data too big for requested version")}else p=this.recommendVersion(i,u,h,g);const y=new L;y.appendBitArray(h);const E=u===de.BYTE?g.getSizeInBytes():n.length;this.appendLengthInfo(E,p,u,y),y.appendBitArray(g);const A=p.getECBlocksForLevel(i),T=p.getTotalCodewords()-A.getTotalECCodewords();this.terminateBits(T,y);const R=this.interleaveWithECBytes(y,p.getTotalCodewords(),T,A.getNumBlocks()),D=new Kr;D.setECLevel(i),D.setMode(u),D.setVersion(p);const B=p.getDimensionForVersion(),z=new Po(B,B),Z=this.chooseMaskPattern(R,i,p,z);return D.setMaskPattern(Z),he.buildMatrix(R,i,p,Z,z),D.setMatrix(z),D}static recommendVersion(n,i,s,a){const l=this.calculateBitsNeeded(i,s,a,le.getVersionForNumber(1)),u=this.chooseVersion(l,n),h=this.calculateBitsNeeded(i,s,a,u);return this.chooseVersion(h,n)}static calculateBitsNeeded(n,i,s,a){return i.getSize()+n.getCharacterCountBits(a)+s.getSize()}static getAlphanumericCode(n){return n<Ge.ALPHANUMERIC_TABLE.length?Ge.ALPHANUMERIC_TABLE[n]:-1}static chooseMode(n,i=null){if(X.SJIS.getName()===i&&this.isOnlyDoubleByteKanji(n))return de.KANJI;let s=!1,a=!1;for(let l=0,u=n.length;l<u;++l){const h=n.charAt(l);if(Ge.isDigit(h))s=!0;else if(this.getAlphanumericCode(h.charCodeAt(0))!==-1)a=!0;else return de.BYTE}return a?de.ALPHANUMERIC:s?de.NUMERIC:de.BYTE}static isOnlyDoubleByteKanji(n){let i;try{i=Le.encode(n,X.SJIS)}catch{return!1}const s=i.length;if(s%2!==0)return!1;for(let a=0;a<s;a+=2){const l=i[a]&255;if((l<129||l>159)&&(l<224||l>235))return!1}return!0}static chooseMaskPattern(n,i,s,a){let l=Number.MAX_SAFE_INTEGER,u=-1;for(let h=0;h<Kr.NUM_MASK_PATTERNS;h++){he.buildMatrix(n,i,s,h,a);let g=this.calculateMaskPenalty(a);g<l&&(l=g,u=h)}return u}static chooseVersion(n,i){for(let s=1;s<=40;s++){const a=le.getVersionForNumber(s);if(Ge.willFit(n,a,i))return a}throw new je("Data too big")}static willFit(n,i,s){const a=i.getTotalCodewords(),u=i.getECBlocksForLevel(s).getTotalECCodewords(),h=a-u,g=(n+7)/8;return h>=g}static terminateBits(n,i){const s=n*8;if(i.getSize()>s)throw new je("data bits cannot fit in the QR Code"+i.getSize()+" > "+s);for(let u=0;u<4&&i.getSize()<s;++u)i.appendBit(!1);const a=i.getSize()&7;if(a>0)for(let u=a;u<8;u++)i.appendBit(!1);const l=n-i.getSizeInBytes();for(let u=0;u<l;++u)i.appendBits(u&1?17:236,8);if(i.getSize()!==s)throw new je("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(n,i,s,a,l,u){if(a>=s)throw new je("Block ID too large");const h=n%s,g=s-h,p=Math.floor(n/s),y=p+1,E=Math.floor(i/s),A=E+1,T=p-E,R=y-A;if(T!==R)throw new je("EC bytes mismatch");if(s!==g+h)throw new je("RS blocks mismatch");if(n!==(E+T)*g+(A+R)*h)throw new je("Total bytes mismatch");a<g?(l[0]=E,u[0]=T):(l[0]=A,u[0]=R)}static interleaveWithECBytes(n,i,s,a){if(n.getSizeInBytes()!==s)throw new je("Number of bits and data bytes does not match");let l=0,u=0,h=0;const g=new Array;for(let y=0;y<a;++y){const E=new Int32Array(1),A=new Int32Array(1);Ge.getNumDataBytesAndNumECBytesForBlockID(i,s,a,y,E,A);const T=E[0],R=new Uint8Array(T);n.toBytes(8*l,R,0,T);const D=Ge.generateECBytes(R,A[0]);g.push(new Vg(R,D)),u=Math.max(u,T),h=Math.max(h,D.length),l+=E[0]}if(s!==l)throw new je("Data bytes does not match offset");const p=new L;for(let y=0;y<u;++y)for(const E of g){const A=E.getDataBytes();y<A.length&&p.appendBits(A[y],8)}for(let y=0;y<h;++y)for(const E of g){const A=E.getErrorCorrectionBytes();y<A.length&&p.appendBits(A[y],8)}if(i!==p.getSizeInBytes())throw new je("Interleaving error: "+i+" and "+p.getSizeInBytes()+" differ.");return p}static generateECBytes(n,i){const s=n.length,a=new Int32Array(s+i);for(let u=0;u<s;u++)a[u]=n[u]&255;new Nl(Re.QR_CODE_FIELD_256).encode(a,i);const l=new Uint8Array(i);for(let u=0;u<i;u++)l[u]=a[s+u];return l}static appendModeInfo(n,i){i.appendBits(n.getBits(),4)}static appendLengthInfo(n,i,s,a){const l=s.getCharacterCountBits(i);if(n>=1<<l)throw new je(n+" is bigger than "+((1<<l)-1));a.appendBits(n,l)}static appendBytes(n,i,s,a){switch(i){case de.NUMERIC:Ge.appendNumericBytes(n,s);break;case de.ALPHANUMERIC:Ge.appendAlphanumericBytes(n,s);break;case de.BYTE:Ge.append8BitBytes(n,s,a);break;case de.KANJI:Ge.appendKanjiBytes(n,s);break;default:throw new je("Invalid mode: "+i)}}static getDigit(n){return n.charCodeAt(0)-48}static isDigit(n){const i=Ge.getDigit(n);return i>=0&&i<=9}static appendNumericBytes(n,i){const s=n.length;let a=0;for(;a<s;){const l=Ge.getDigit(n.charAt(a));if(a+2<s){const u=Ge.getDigit(n.charAt(a+1)),h=Ge.getDigit(n.charAt(a+2));i.appendBits(l*100+u*10+h,10),a+=3}else if(a+1<s){const u=Ge.getDigit(n.charAt(a+1));i.appendBits(l*10+u,7),a+=2}else i.appendBits(l,4),a++}}static appendAlphanumericBytes(n,i){const s=n.length;let a=0;for(;a<s;){const l=Ge.getAlphanumericCode(n.charCodeAt(a));if(l===-1)throw new je;if(a+1<s){const u=Ge.getAlphanumericCode(n.charCodeAt(a+1));if(u===-1)throw new je;i.appendBits(l*45+u,11),a+=2}else i.appendBits(l,6),a++}}static append8BitBytes(n,i,s){let a;try{a=Le.encode(n,s)}catch(l){throw new je(l)}for(let l=0,u=a.length;l!==u;l++){const h=a[l];i.appendBits(h,8)}}static appendKanjiBytes(n,i){let s;try{s=Le.encode(n,X.SJIS)}catch(l){throw new je(l)}const a=s.length;for(let l=0;l<a;l+=2){const u=s[l]&255,h=s[l+1]&255,g=u<<8&4294967295|h;let p=-1;if(g>=33088&&g<=40956?p=g-33088:g>=57408&&g<=60351&&(p=g-49472),p===-1)throw new je("Invalid byte sequence");const y=(p>>8)*192+(p&255);i.appendBits(y,13)}}static appendECI(n,i){i.appendBits(de.ECI.getBits(),4),i.appendBits(n.getValue(),8)}}Ge.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Ge.DEFAULT_BYTE_MODE_ENCODING=X.UTF8.getName();class qr{write(n,i,s,a=null){if(n.length===0)throw new _("Found empty contents");if(i<0||s<0)throw new _("Requested dimensions are too small: "+i+"x"+s);let l=ze.L,u=qr.QUIET_ZONE_SIZE;a!==null&&(a.get(mt.ERROR_CORRECTION)!==void 0&&(l=ze.fromString(a.get(mt.ERROR_CORRECTION).toString())),a.get(mt.MARGIN)!==void 0&&(u=Number.parseInt(a.get(mt.MARGIN).toString(),10)));const h=Ge.encode(n,l,a);return this.renderResult(h,i,s,u)}writeToDom(n,i,s,a,l=null){typeof n=="string"&&(n=document.querySelector(n));const u=this.write(i,s,a,l);n&&n.appendChild(u)}renderResult(n,i,s,a){const l=n.getMatrix();if(l===null)throw new Fn;const u=l.getWidth(),h=l.getHeight(),g=u+a*2,p=h+a*2,y=Math.max(i,g),E=Math.max(s,p),A=Math.min(Math.floor(y/g),Math.floor(E/p)),T=Math.floor((y-u*A)/2),R=Math.floor((E-h*A)/2),D=this.createSVGElement(y,E);for(let B=0,z=R;B<h;B++,z+=A)for(let Z=0,Q=T;Z<u;Z++,Q+=A)if(l.get(Z,B)===1){const Y=this.createSvgRectElement(Q,z,A,A);D.appendChild(Y)}return D}createSVGElement(n,i){const s=document.createElementNS(qr.SVG_NS,"svg");return s.setAttributeNS(null,"height",n.toString()),s.setAttributeNS(null,"width",i.toString()),s}createSvgRectElement(n,i,s,a){const l=document.createElementNS(qr.SVG_NS,"rect");return l.setAttributeNS(null,"x",n.toString()),l.setAttributeNS(null,"y",i.toString()),l.setAttributeNS(null,"height",s.toString()),l.setAttributeNS(null,"width",a.toString()),l.setAttributeNS(null,"fill","#000000"),l}}qr.QUIET_ZONE_SIZE=4,qr.SVG_NS="http://www.w3.org/2000/svg";class Ci{encode(n,i,s,a,l){if(n.length===0)throw new _("Found empty contents");if(i!==ae.QR_CODE)throw new _("Can only encode QR_CODE, but got "+i);if(s<0||a<0)throw new _(`Requested dimensions are too small: ${s}x${a}`);let u=ze.L,h=Ci.QUIET_ZONE_SIZE;l!==null&&(l.get(mt.ERROR_CORRECTION)!==void 0&&(u=ze.fromString(l.get(mt.ERROR_CORRECTION).toString())),l.get(mt.MARGIN)!==void 0&&(h=Number.parseInt(l.get(mt.MARGIN).toString(),10)));const g=Ge.encode(n,u,l);return Ci.renderResult(g,s,a,h)}static renderResult(n,i,s,a){const l=n.getMatrix();if(l===null)throw new Fn;const u=l.getWidth(),h=l.getHeight(),g=u+a*2,p=h+a*2,y=Math.max(i,g),E=Math.max(s,p),A=Math.min(Math.floor(y/g),Math.floor(E/p)),T=Math.floor((y-u*A)/2),R=Math.floor((E-h*A)/2),D=new pe(y,E);for(let B=0,z=R;B<h;B++,z+=A)for(let Z=0,Q=T;Z<u;Z++,Q+=A)l.get(Z,B)===1&&D.setRegion(Q,z,A,A);return D}}Ci.QUIET_ZONE_SIZE=4;class zg{encode(n,i,s,a,l){let u;switch(i){case ae.QR_CODE:u=new Ci;break;default:throw new _("No encoder available for format "+i)}return u.encode(n,i,s,a,l)}}class zn extends ne{constructor(n,i,s,a,l,u,h,g){if(super(u,h),this.yuvData=n,this.dataWidth=i,this.dataHeight=s,this.left=a,this.top=l,a+u>i||l+h>s)throw new _("Crop rectangle does not fit within image data.");g&&this.reverseHorizontal(u,h)}getRow(n,i){if(n<0||n>=this.getHeight())throw new _("Requested row is outside the image: "+n);const s=this.getWidth();(i==null||i.length<s)&&(i=new Uint8ClampedArray(s));const a=(n+this.top)*this.dataWidth+this.left;return F.arraycopy(this.yuvData,a,i,0,s),i}getMatrix(){const n=this.getWidth(),i=this.getHeight();if(n===this.dataWidth&&i===this.dataHeight)return this.yuvData;const s=n*i,a=new Uint8ClampedArray(s);let l=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return F.arraycopy(this.yuvData,l,a,0,s),a;for(let u=0;u<i;u++){const h=u*n;F.arraycopy(this.yuvData,l,a,h,n),l+=this.dataWidth}return a}isCropSupported(){return!0}crop(n,i,s,a){return new zn(this.yuvData,this.dataWidth,this.dataHeight,this.left+n,this.top+i,s,a,!1)}renderThumbnail(){const n=this.getWidth()/zn.THUMBNAIL_SCALE_FACTOR,i=this.getHeight()/zn.THUMBNAIL_SCALE_FACTOR,s=new Int32Array(n*i),a=this.yuvData;let l=this.top*this.dataWidth+this.left;for(let u=0;u<i;u++){const h=u*n;for(let g=0;g<n;g++){const p=a[l+g*zn.THUMBNAIL_SCALE_FACTOR]&255;s[h+g]=4278190080|p*65793}l+=this.dataWidth*zn.THUMBNAIL_SCALE_FACTOR}return s}getThumbnailWidth(){return this.getWidth()/zn.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/zn.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(n,i){const s=this.yuvData;for(let a=0,l=this.top*this.dataWidth+this.left;a<i;a++,l+=this.dataWidth){const u=l+n/2;for(let h=l,g=l+n-1;h<u;h++,g--){const p=s[h];s[h]=s[g],s[g]=p}}}invert(){return new fe(this)}}zn.THUMBNAIL_SCALE_FACTOR=2;class Ol extends ne{constructor(n,i,s,a,l,u,h){if(super(i,s),this.dataWidth=a,this.dataHeight=l,this.left=u,this.top=h,n.BYTES_PER_ELEMENT===4){const g=i*s,p=new Uint8ClampedArray(g);for(let y=0;y<g;y++){const E=n[y],A=E>>16&255,T=E>>7&510,R=E&255;p[y]=(A+T+R)/4&255}this.luminances=p}else this.luminances=n;if(a===void 0&&(this.dataWidth=i),l===void 0&&(this.dataHeight=s),u===void 0&&(this.left=0),h===void 0&&(this.top=0),this.left+i>this.dataWidth||this.top+s>this.dataHeight)throw new _("Crop rectangle does not fit within image data.")}getRow(n,i){if(n<0||n>=this.getHeight())throw new _("Requested row is outside the image: "+n);const s=this.getWidth();(i==null||i.length<s)&&(i=new Uint8ClampedArray(s));const a=(n+this.top)*this.dataWidth+this.left;return F.arraycopy(this.luminances,a,i,0,s),i}getMatrix(){const n=this.getWidth(),i=this.getHeight();if(n===this.dataWidth&&i===this.dataHeight)return this.luminances;const s=n*i,a=new Uint8ClampedArray(s);let l=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return F.arraycopy(this.luminances,l,a,0,s),a;for(let u=0;u<i;u++){const h=u*n;F.arraycopy(this.luminances,l,a,h,n),l+=this.dataWidth}return a}isCropSupported(){return!0}crop(n,i,s,a){return new Ol(this.luminances,s,a,this.dataWidth,this.dataHeight,this.left+n,this.top+i)}invert(){return new fe(this)}}class Bd extends X{static forName(n){return this.getCharacterSetECIByName(n)}}class Rl{}Rl.ISO_8859_1=X.ISO8859_1;class Fd{isCompact(){return this.compact}setCompact(n){this.compact=n}getSize(){return this.size}setSize(n){this.size=n}getLayers(){return this.layers}setLayers(n){this.layers=n}getCodeWords(){return this.codeWords}setCodeWords(n){this.codeWords=n}getMatrix(){return this.matrix}setMatrix(n){this.matrix=n}}class jd{static singletonList(n){return[n]}static min(n,i){return n.sort(i)[0]}}class Wg{constructor(n){this.previous=n}getPrevious(){return this.previous}}class _i extends Wg{constructor(n,i,s){super(n),this.value=i,this.bitCount=s}appendTo(n,i){n.appendBits(this.value,this.bitCount)}add(n,i){return new _i(this,n,i)}addBinaryShift(n,i){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new _i(this,n,i)}toString(){let n=this.value&(1<<this.bitCount)-1;return n|=1<<this.bitCount,"<"+b.toBinaryString(n|1<<this.bitCount).substring(1)+">"}}class kl extends _i{constructor(n,i,s){super(n,0,0),this.binaryShiftStart=i,this.binaryShiftByteCount=s}appendTo(n,i){for(let s=0;s<this.binaryShiftByteCount;s++)(s===0||s===31&&this.binaryShiftByteCount<=62)&&(n.appendBits(31,5),this.binaryShiftByteCount>62?n.appendBits(this.binaryShiftByteCount-31,16):s===0?n.appendBits(Math.min(this.binaryShiftByteCount,31),5):n.appendBits(this.binaryShiftByteCount-31,5)),n.appendBits(i[this.binaryShiftStart+s],8)}addBinaryShift(n,i){return new kl(this,n,i)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Hg(v,n,i){return new kl(v,n,i)}function Cs(v,n,i){return new _i(v,n,i)}const Gg=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],wr=0,Mo=1,yn=2,Ud=3,Wn=4,Xg=new _i(null,0,0),Dl=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function $g(v){for(let n of v)N.fill(n,-1);return v[wr][Wn]=0,v[Mo][Wn]=0,v[Mo][wr]=28,v[Ud][Wn]=0,v[yn][Wn]=0,v[yn][wr]=15,v}const Vd=$g(N.createInt32Array(6,6));class Hn{constructor(n,i,s,a){this.token=n,this.mode=i,this.binaryShiftByteCount=s,this.bitCount=a}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(n,i){let s=this.bitCount,a=this.token;if(n!==this.mode){let u=Dl[this.mode][n];a=Cs(a,u&65535,u>>16),s+=u>>16}let l=n===yn?4:5;return a=Cs(a,i,l),new Hn(a,n,0,s+l)}shiftAndAppend(n,i){let s=this.token,a=this.mode===yn?4:5;return s=Cs(s,Vd[this.mode][n],a),s=Cs(s,i,5),new Hn(s,this.mode,0,this.bitCount+a+5)}addBinaryShiftChar(n){let i=this.token,s=this.mode,a=this.bitCount;if(this.mode===Wn||this.mode===yn){let h=Dl[s][wr];i=Cs(i,h&65535,h>>16),a+=h>>16,s=wr}let l=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,u=new Hn(i,s,this.binaryShiftByteCount+1,a+l);return u.binaryShiftByteCount===2078&&(u=u.endBinaryShift(n+1)),u}endBinaryShift(n){if(this.binaryShiftByteCount===0)return this;let i=this.token;return i=Hg(i,n-this.binaryShiftByteCount,this.binaryShiftByteCount),new Hn(i,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(n){let i=this.bitCount+(Dl[this.mode][n.mode]>>16);return this.binaryShiftByteCount<n.binaryShiftByteCount?i+=Hn.calculateBinaryShiftCost(n)-Hn.calculateBinaryShiftCost(this):this.binaryShiftByteCount>n.binaryShiftByteCount&&n.binaryShiftByteCount>0&&(i+=10),i<=n.bitCount}toBitArray(n){let i=[];for(let a=this.endBinaryShift(n.length).token;a!==null;a=a.getPrevious())i.unshift(a);let s=new L;for(const a of i)a.appendTo(s,n);return s}toString(){return ce.format("%s bits=%d bytes=%d",Gg[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(n){return n.binaryShiftByteCount>62?21:n.binaryShiftByteCount>31?20:n.binaryShiftByteCount>0?10:0}}Hn.INITIAL_STATE=new Hn(Xg,wr,0,0);function Yg(v){const n=ce.getCharCode(" "),i=ce.getCharCode("."),s=ce.getCharCode(",");v[wr][n]=1;const a=ce.getCharCode("Z"),l=ce.getCharCode("A");for(let A=l;A<=a;A++)v[wr][A]=A-l+2;v[Mo][n]=1;const u=ce.getCharCode("z"),h=ce.getCharCode("a");for(let A=h;A<=u;A++)v[Mo][A]=A-h+2;v[yn][n]=1;const g=ce.getCharCode("9"),p=ce.getCharCode("0");for(let A=p;A<=g;A++)v[yn][A]=A-p+2;v[yn][s]=12,v[yn][i]=13;const y=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let A=0;A<y.length;A++)v[Ud][ce.getCharCode(y[A])]=A;const E=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let A=0;A<E.length;A++)ce.getCharCode(E[A])>0&&(v[Wn][ce.getCharCode(E[A])]=A);return v}const Pl=Yg(N.createInt32Array(5,256));class _s{constructor(n){this.text=n}encode(){const n=ce.getCharCode(" "),i=ce.getCharCode(`
`);let s=jd.singletonList(Hn.INITIAL_STATE);for(let l=0;l<this.text.length;l++){let u,h=l+1<this.text.length?this.text[l+1]:0;switch(this.text[l]){case ce.getCharCode("\r"):u=h===i?2:0;break;case ce.getCharCode("."):u=h===n?3:0;break;case ce.getCharCode(","):u=h===n?4:0;break;case ce.getCharCode(":"):u=h===n?5:0;break;default:u=0}u>0?(s=_s.updateStateListForPair(s,l,u),l++):s=this.updateStateListForChar(s,l)}return jd.min(s,(l,u)=>l.getBitCount()-u.getBitCount()).toBitArray(this.text)}updateStateListForChar(n,i){const s=[];for(let a of n)this.updateStateForChar(a,i,s);return _s.simplifyStates(s)}updateStateForChar(n,i,s){let a=this.text[i]&255,l=Pl[n.getMode()][a]>0,u=null;for(let h=0;h<=Wn;h++){let g=Pl[h][a];if(g>0){if(u==null&&(u=n.endBinaryShift(i)),!l||h===n.getMode()||h===yn){const p=u.latchAndAppend(h,g);s.push(p)}if(!l&&Vd[n.getMode()][h]>=0){const p=u.shiftAndAppend(h,g);s.push(p)}}}if(n.getBinaryShiftByteCount()>0||Pl[n.getMode()][a]===0){let h=n.addBinaryShiftChar(i);s.push(h)}}static updateStateListForPair(n,i,s){const a=[];for(let l of n)this.updateStateForPair(l,i,s,a);return this.simplifyStates(a)}static updateStateForPair(n,i,s,a){let l=n.endBinaryShift(i);if(a.push(l.latchAndAppend(Wn,s)),n.getMode()!==Wn&&a.push(l.shiftAndAppend(Wn,s)),s===3||s===4){let u=l.latchAndAppend(yn,16-s).latchAndAppend(yn,1);a.push(u)}if(n.getBinaryShiftByteCount()>0){let u=n.addBinaryShiftChar(i).addBinaryShiftChar(i+1);a.push(u)}}static simplifyStates(n){let i=[];for(const s of n){let a=!0;for(const l of i){if(l.isBetterThanOrEqualTo(s)){a=!1;break}s.isBetterThanOrEqualTo(l)&&(i=i.filter(u=>u!==l))}a&&i.push(s)}return i}}class Ne{constructor(){}static encodeBytes(n){return Ne.encode(n,Ne.DEFAULT_EC_PERCENT,Ne.DEFAULT_AZTEC_LAYERS)}static encode(n,i,s){let a=new _s(n).encode(),l=b.truncDivision(a.getSize()*i,100)+11,u=a.getSize()+l,h,g,p,y,E;if(s!==Ne.DEFAULT_AZTEC_LAYERS){if(h=s<0,g=Math.abs(s),g>(h?Ne.MAX_NB_BITS_COMPACT:Ne.MAX_NB_BITS))throw new _(ce.format("Illegal value %s for layers",s));p=Ne.totalBitsInLayer(g,h),y=Ne.WORD_SIZE[g];let Y=p-p%y;if(E=Ne.stuffBits(a,y),E.getSize()+l>Y)throw new _("Data to large for user specified layer");if(h&&E.getSize()>y*64)throw new _("Data to large for user specified layer")}else{y=0,E=null;for(let Y=0;;Y++){if(Y>Ne.MAX_NB_BITS)throw new _("Data too large for an Aztec code");if(h=Y<=3,g=h?Y+1:Y,p=Ne.totalBitsInLayer(g,h),u>p)continue;(E==null||y!==Ne.WORD_SIZE[g])&&(y=Ne.WORD_SIZE[g],E=Ne.stuffBits(a,y));let Se=p-p%y;if(!(h&&E.getSize()>y*64)&&E.getSize()+l<=Se)break}}let A=Ne.generateCheckWords(E,p,y),T=E.getSize()/y,R=Ne.generateModeMessage(h,g,T),D=(h?11:14)+g*4,B=new Int32Array(D),z;if(h){z=D;for(let Y=0;Y<B.length;Y++)B[Y]=Y}else{z=D+1+2*b.truncDivision(b.truncDivision(D,2)-1,15);let Y=b.truncDivision(D,2),Se=b.truncDivision(z,2);for(let ye=0;ye<Y;ye++){let Qt=ye+b.truncDivision(ye,15);B[Y-ye-1]=Se-Qt-1,B[Y+ye]=Se+Qt+1}}let Z=new pe(z);for(let Y=0,Se=0;Y<g;Y++){let ye=(g-Y)*4+(h?9:12);for(let Qt=0;Qt<ye;Qt++){let Tn=Qt*2;for(let Jt=0;Jt<2;Jt++)A.get(Se+Tn+Jt)&&Z.set(B[Y*2+Jt],B[Y*2+Qt]),A.get(Se+ye*2+Tn+Jt)&&Z.set(B[Y*2+Qt],B[D-1-Y*2-Jt]),A.get(Se+ye*4+Tn+Jt)&&Z.set(B[D-1-Y*2-Jt],B[D-1-Y*2-Qt]),A.get(Se+ye*6+Tn+Jt)&&Z.set(B[D-1-Y*2-Qt],B[Y*2+Jt])}Se+=ye*8}if(Ne.drawModeMessage(Z,h,z,R),h)Ne.drawBullsEye(Z,b.truncDivision(z,2),5);else{Ne.drawBullsEye(Z,b.truncDivision(z,2),7);for(let Y=0,Se=0;Y<b.truncDivision(D,2)-1;Y+=15,Se+=16)for(let ye=b.truncDivision(z,2)&1;ye<z;ye+=2)Z.set(b.truncDivision(z,2)-Se,ye),Z.set(b.truncDivision(z,2)+Se,ye),Z.set(ye,b.truncDivision(z,2)-Se),Z.set(ye,b.truncDivision(z,2)+Se)}let Q=new Fd;return Q.setCompact(h),Q.setSize(z),Q.setLayers(g),Q.setCodeWords(T),Q.setMatrix(Z),Q}static drawBullsEye(n,i,s){for(let a=0;a<s;a+=2)for(let l=i-a;l<=i+a;l++)n.set(l,i-a),n.set(l,i+a),n.set(i-a,l),n.set(i+a,l);n.set(i-s,i-s),n.set(i-s+1,i-s),n.set(i-s,i-s+1),n.set(i+s,i-s),n.set(i+s,i-s+1),n.set(i+s,i+s-1)}static generateModeMessage(n,i,s){let a=new L;return n?(a.appendBits(i-1,2),a.appendBits(s-1,6),a=Ne.generateCheckWords(a,28,4)):(a.appendBits(i-1,5),a.appendBits(s-1,11),a=Ne.generateCheckWords(a,40,4)),a}static drawModeMessage(n,i,s,a){let l=b.truncDivision(s,2);if(i)for(let u=0;u<7;u++){let h=l-3+u;a.get(u)&&n.set(h,l-5),a.get(u+7)&&n.set(l+5,h),a.get(20-u)&&n.set(h,l+5),a.get(27-u)&&n.set(l-5,h)}else for(let u=0;u<10;u++){let h=l-5+u+b.truncDivision(u,5);a.get(u)&&n.set(h,l-7),a.get(u+10)&&n.set(l+7,h),a.get(29-u)&&n.set(h,l+7),a.get(39-u)&&n.set(l-7,h)}}static generateCheckWords(n,i,s){let a=n.getSize()/s,l=new Nl(Ne.getGF(s)),u=b.truncDivision(i,s),h=Ne.bitsToWords(n,s,u);l.encode(h,u-a);let g=i%s,p=new L;p.appendBits(0,g);for(const y of Array.from(h))p.appendBits(y,s);return p}static bitsToWords(n,i,s){let a=new Int32Array(s),l,u;for(l=0,u=n.getSize()/i;l<u;l++){let h=0;for(let g=0;g<i;g++)h|=n.get(l*i+g)?1<<i-g-1:0;a[l]=h}return a}static getGF(n){switch(n){case 4:return Re.AZTEC_PARAM;case 6:return Re.AZTEC_DATA_6;case 8:return Re.AZTEC_DATA_8;case 10:return Re.AZTEC_DATA_10;case 12:return Re.AZTEC_DATA_12;default:throw new _("Unsupported word size "+n)}}static stuffBits(n,i){let s=new L,a=n.getSize(),l=(1<<i)-2;for(let u=0;u<a;u+=i){let h=0;for(let g=0;g<i;g++)(u+g>=a||n.get(u+g))&&(h|=1<<i-1-g);(h&l)===l?(s.appendBits(h&l,i),u--):h&l?s.appendBits(h,i):(s.appendBits(h|1,i),u--)}return s}static totalBitsInLayer(n,i){return((i?88:112)+16*n)*n}}Ne.DEFAULT_EC_PERCENT=33,Ne.DEFAULT_AZTEC_LAYERS=0,Ne.MAX_NB_BITS=32,Ne.MAX_NB_BITS_COMPACT=4,Ne.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Lo{encode(n,i,s,a){return this.encodeWithHints(n,i,s,a,null)}encodeWithHints(n,i,s,a,l){let u=Rl.ISO_8859_1,h=Ne.DEFAULT_EC_PERCENT,g=Ne.DEFAULT_AZTEC_LAYERS;return l!=null&&(l.has(mt.CHARACTER_SET)&&(u=Bd.forName(l.get(mt.CHARACTER_SET).toString())),l.has(mt.ERROR_CORRECTION)&&(h=b.parseInt(l.get(mt.ERROR_CORRECTION).toString())),l.has(mt.AZTEC_LAYERS)&&(g=b.parseInt(l.get(mt.AZTEC_LAYERS).toString()))),Lo.encodeLayers(n,i,s,a,u,h,g)}static encodeLayers(n,i,s,a,l,u,h){if(i!==ae.AZTEC)throw new _("Can only encode AZTEC, but got "+i);let g=Ne.encode(ce.getBytes(n,l),u,h);return Lo.renderResult(g,s,a)}static renderResult(n,i,s){let a=n.getMatrix();if(a==null)throw new Fn;let l=a.getWidth(),u=a.getHeight(),h=Math.max(i,l),g=Math.max(s,u),p=Math.min(h/l,g/u),y=(h-l*p)/2,E=(g-u*p)/2,A=new pe(h,g);for(let T=0,R=E;T<u;T++,R+=p)for(let D=0,B=y;D<l;D++,B+=p)a.get(D,T)&&A.setRegion(B,R,p,p);return A}}r.AbstractExpandedDecoder=yl,r.ArgumentException=C,r.ArithmeticException=Ao,r.AztecCode=Fd,r.AztecCodeReader=Io,r.AztecCodeWriter=Lo,r.AztecDecoder=Ve,r.AztecDetector=Ad,r.AztecDetectorResult=Cd,r.AztecEncoder=Ne,r.AztecHighLevelEncoder=_s,r.AztecPoint=Vt,r.BarcodeFormat=ae,r.Binarizer=M,r.BinaryBitmap=O,r.BitArray=L,r.BitMatrix=pe,r.BitSource=_l,r.BrowserAztecCodeReader=vg,r.BrowserBarcodeReader=Sg,r.BrowserCodeReader=pn,r.BrowserDatamatrixCodeReader=Ig,r.BrowserMultiFormatReader=Fg,r.BrowserPDF417Reader=jg,r.BrowserQRCodeReader=Ug,r.BrowserQRCodeSvgWriter=qr,r.CharacterSetECI=X,r.ChecksumException=P,r.Code128Reader=te,r.Code39Reader=pt,r.DataMatrixDecodedBitStreamParser=gr,r.DataMatrixReader=pr,r.DecodeHintType=H,r.DecoderResult=hs,r.DefaultGridSampler=_d,r.DetectorResult=bo,r.EAN13Reader=Gr,r.EncodeHintType=mt,r.Exception=m,r.FormatException=U,r.GenericGF=Re,r.GenericGFPoly=Yt,r.GlobalHistogramBinarizer=it,r.GridSampler=pl,r.GridSamplerInstance=hr,r.HTMLCanvasElementLuminanceSource=xe,r.HybridBinarizer=we,r.ITFReader=Fe,r.IllegalArgumentException=_,r.IllegalStateException=Fn,r.InvertedLuminanceSource=fe,r.LuminanceSource=ne,r.MathUtils=Te,r.MultiFormatOneDReader=vi,r.MultiFormatReader=Ld,r.MultiFormatWriter=zg,r.NotFoundException=W,r.OneDReader=ht,r.PDF417DecodedBitStreamParser=V,r.PDF417DecoderErrorCorrection=Od,r.PDF417Reader=Nt,r.PDF417ResultMetadata=kd,r.PerspectiveTransform=bn,r.PlanarYUVLuminanceSource=zn,r.QRCodeByteMatrix=Po,r.QRCodeDataMask=mn,r.QRCodeDecodedBitStreamParser=et,r.QRCodeDecoderErrorCorrectionLevel=ze,r.QRCodeDecoderFormatInformation=Lt,r.QRCodeEncoder=Ge,r.QRCodeEncoderQRCode=Kr,r.QRCodeMaskUtil=at,r.QRCodeMatrixUtil=he,r.QRCodeMode=de,r.QRCodeReader=xr,r.QRCodeVersion=le,r.QRCodeWriter=Ci,r.RGBLuminanceSource=Ol,r.RSS14Reader=ot,r.RSSExpandedReader=$,r.ReaderException=Do,r.ReedSolomonDecoder=gs,r.ReedSolomonEncoder=Nl,r.ReedSolomonException=xi,r.Result=Je,r.ResultMetadataType=Ct,r.ResultPoint=oe,r.StringUtils=ce,r.UnsupportedOperationException=me,r.VideoInputDevice=Ke,r.WhiteRectangleDetector=Zn,r.WriterException=je,r.ZXingArrays=N,r.ZXingCharset=Bd,r.ZXingInteger=b,r.ZXingStandardCharsets=Rl,r.ZXingStringBuilder=ee,r.ZXingStringEncoding=Le,r.ZXingSystem=F,r.createAbstractExpandedDecoder=Td,Object.defineProperty(r,"__esModule",{value:!0})})})(vu,vu.exports);var $e=vu.exports;const dy=Qg($e),hy=Zg({__proto__:null,default:dy},[$e]);var Sh=function(){function t(e,r,o){if(this.formatMap=new Map([[ie.QR_CODE,$e.BarcodeFormat.QR_CODE],[ie.AZTEC,$e.BarcodeFormat.AZTEC],[ie.CODABAR,$e.BarcodeFormat.CODABAR],[ie.CODE_39,$e.BarcodeFormat.CODE_39],[ie.CODE_93,$e.BarcodeFormat.CODE_93],[ie.CODE_128,$e.BarcodeFormat.CODE_128],[ie.DATA_MATRIX,$e.BarcodeFormat.DATA_MATRIX],[ie.MAXICODE,$e.BarcodeFormat.MAXICODE],[ie.ITF,$e.BarcodeFormat.ITF],[ie.EAN_13,$e.BarcodeFormat.EAN_13],[ie.EAN_8,$e.BarcodeFormat.EAN_8],[ie.PDF_417,$e.BarcodeFormat.PDF_417],[ie.RSS_14,$e.BarcodeFormat.RSS_14],[ie.RSS_EXPANDED,$e.BarcodeFormat.RSS_EXPANDED],[ie.UPC_A,$e.BarcodeFormat.UPC_A],[ie.UPC_E,$e.BarcodeFormat.UPC_E],[ie.UPC_EAN_EXTENSION,$e.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!hy)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=r,this.logger=o;var c=this.createZXingFormats(e),d=new Map;d.set($e.DecodeHintType.POSSIBLE_FORMATS,c),d.set($e.DecodeHintType.TRY_HARDER,!1),this.hints=d}return t.prototype.decodeAsync=function(e){var r=this;return new Promise(function(o,c){try{o(r.decode(e))}catch(d){c(d)}})},t.prototype.decode=function(e){var r=new $e.MultiFormatReader(this.verbose,this.hints),o=new $e.HTMLCanvasElementLuminanceSource(e),c=new $e.BinaryBitmap(new $e.HybridBinarizer(o)),d=r.decode(c);return{text:d.text,format:mg.create(this.toHtml5QrcodeSupportedFormats(d.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(r,o,c){e.set(r,o)}),e},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createZXingFormats=function(e){for(var r=[],o=0,c=e;o<c.length;o++){var d=c[o];this.formatMap.has(d)?r.push(this.formatMap.get(d)):this.logger.logError("".concat(d," is not supported by")+"ZXingHtml5QrcodeShim")}return r},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t}(),fy=function(t,e,r,o){function c(d){return d instanceof r?d:new r(function(f){f(d)})}return new(r||(r=Promise))(function(d,f){function x(C){try{m(o.next(C))}catch(_){f(_)}}function w(C){try{m(o.throw(C))}catch(_){f(_)}}function m(C){C.done?d(C.value):c(C.value).then(x,w)}m((o=o.apply(t,e||[])).next())})},gy=function(t,e){var r={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},o,c,d,f;return f={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function x(m){return function(C){return w([m,C])}}function w(m){if(o)throw new TypeError("Generator is already executing.");for(;f&&(f=0,m[0]&&(r=0)),r;)try{if(o=1,c&&(d=m[0]&2?c.return:m[0]?c.throw||((d=c.return)&&d.call(c),0):c.next)&&!(d=d.call(c,m[1])).done)return d;switch(c=0,d&&(m=[m[0]&2,d.value]),m[0]){case 0:case 1:d=m;break;case 4:return r.label++,{value:m[1],done:!1};case 5:r.label++,c=m[1],m=[0];continue;case 7:m=r.ops.pop(),r.trys.pop();continue;default:if(d=r.trys,!(d=d.length>0&&d[d.length-1])&&(m[0]===6||m[0]===2)){r=0;continue}if(m[0]===3&&(!d||m[1]>d[0]&&m[1]<d[3])){r.label=m[1];break}if(m[0]===6&&r.label<d[1]){r.label=d[1],d=m;break}if(d&&r.label<d[2]){r.label=d[2],r.ops.push(m);break}d[2]&&r.ops.pop(),r.trys.pop();continue}m=e.call(t,r)}catch(C){m=[6,C],c=0}finally{o=d=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},bh=function(){function t(e,r,o){if(this.formatMap=new Map([[ie.QR_CODE,"qr_code"],[ie.AZTEC,"aztec"],[ie.CODABAR,"codabar"],[ie.CODE_39,"code_39"],[ie.CODE_93,"code_93"],[ie.CODE_128,"code_128"],[ie.DATA_MATRIX,"data_matrix"],[ie.ITF,"itf"],[ie.EAN_13,"ean_13"],[ie.EAN_8,"ean_8"],[ie.PDF_417,"pdf417"],[ie.UPC_A,"upc_a"],[ie.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=r,this.logger=o;var c=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(c),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},t.prototype.decodeAsync=function(e){return fy(this,void 0,void 0,function(){var r,o;return gy(this,function(c){switch(c.label){case 0:return[4,this.detector.detect(e)];case 1:if(r=c.sent(),!r||r.length===0)throw"No barcode or QR code detected.";return o=this.selectLargestBarcode(r),[2,{text:o.rawValue,format:mg.create(this.toHtml5QrcodeSupportedFormats(o.format)),debugData:this.createDebugData()}]}})})},t.prototype.selectLargestBarcode=function(e){for(var r=null,o=0,c=0,d=e;c<d.length;c++){var f=d[c],x=f.boundingBox.width*f.boundingBox.height;x>o&&(o=x,r=f)}if(!r)throw"No largest barcode found";return r},t.prototype.createBarcodeDetectorFormats=function(e){for(var r=[],o=0,c=e;o<c.length;o++){var d=c[o];this.formatMap.has(d)?r.push(this.formatMap.get(d)):this.logger.warn("".concat(d," is not supported by")+"BarcodeDetectorDelegate")}return{formats:r}},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(r,o,c){e.set(r,o)}),e},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t}(),Ih=function(t,e,r,o){function c(d){return d instanceof r?d:new r(function(f){f(d)})}return new(r||(r=Promise))(function(d,f){function x(C){try{m(o.next(C))}catch(_){f(_)}}function w(C){try{m(o.throw(C))}catch(_){f(_)}}function m(C){C.done?d(C.value):c(C.value).then(x,w)}m((o=o.apply(t,e||[])).next())})},Th=function(t,e){var r={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},o,c,d,f;return f={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function x(m){return function(C){return w([m,C])}}function w(m){if(o)throw new TypeError("Generator is already executing.");for(;f&&(f=0,m[0]&&(r=0)),r;)try{if(o=1,c&&(d=m[0]&2?c.return:m[0]?c.throw||((d=c.return)&&d.call(c),0):c.next)&&!(d=d.call(c,m[1])).done)return d;switch(c=0,d&&(m=[m[0]&2,d.value]),m[0]){case 0:case 1:d=m;break;case 4:return r.label++,{value:m[1],done:!1};case 5:r.label++,c=m[1],m=[0];continue;case 7:m=r.ops.pop(),r.trys.pop();continue;default:if(d=r.trys,!(d=d.length>0&&d[d.length-1])&&(m[0]===6||m[0]===2)){r=0;continue}if(m[0]===3&&(!d||m[1]>d[0]&&m[1]<d[3])){r.label=m[1];break}if(m[0]===6&&r.label<d[1]){r.label=d[1],d=m;break}if(d&&r.label<d[2]){r.label=d[2],r.ops.push(m);break}d[2]&&r.ops.pop(),r.trys.pop();continue}m=e.call(t,r)}catch(C){m=[6,C],c=0}finally{o=d=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},py=function(){function t(e,r,o,c){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=o,r&&bh.isSupported()?(this.primaryDecoder=new bh(e,o,c),this.secondaryDecoder=new Sh(e,o,c)):this.primaryDecoder=new Sh(e,o,c)}return t.prototype.decodeAsync=function(e){return Ih(this,void 0,void 0,function(){var r;return Th(this,function(o){switch(o.label){case 0:r=performance.now(),o.label=1;case 1:return o.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,o.sent()];case 3:return this.possiblyLogPerformance(r),[7];case 4:return[2]}})})},t.prototype.decodeRobustlyAsync=function(e){return Ih(this,void 0,void 0,function(){var r,o;return Th(this,function(c){switch(c.label){case 0:r=performance.now(),c.label=1;case 1:return c.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,c.sent()];case 3:if(o=c.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw o;case 4:return this.possiblyLogPerformance(r),[7];case 5:return[2]}})})},t.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(e){if(this.verbose){var r=performance.now()-e;this.executionResults.push(r),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,r=0,o=this.executionResults;r<o.length;r++){var c=o[r];e+=c}var d=e/this.executionResults.length;console.log("".concat(d," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t}(),Ed=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,c){o.__proto__=c}||function(o,c){for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(o[d]=c[d])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function o(){this.constructor=e}e.prototype=r===null?Object.create(r):(o.prototype=r.prototype,new o)}}(),Xa=function(t,e,r,o){function c(d){return d instanceof r?d:new r(function(f){f(d)})}return new(r||(r=Promise))(function(d,f){function x(C){try{m(o.next(C))}catch(_){f(_)}}function w(C){try{m(o.throw(C))}catch(_){f(_)}}function m(C){C.done?d(C.value):c(C.value).then(x,w)}m((o=o.apply(t,e||[])).next())})},$a=function(t,e){var r={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},o,c,d,f;return f={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function x(m){return function(C){return w([m,C])}}function w(m){if(o)throw new TypeError("Generator is already executing.");for(;f&&(f=0,m[0]&&(r=0)),r;)try{if(o=1,c&&(d=m[0]&2?c.return:m[0]?c.throw||((d=c.return)&&d.call(c),0):c.next)&&!(d=d.call(c,m[1])).done)return d;switch(c=0,d&&(m=[m[0]&2,d.value]),m[0]){case 0:case 1:d=m;break;case 4:return r.label++,{value:m[1],done:!1};case 5:r.label++,c=m[1],m=[0];continue;case 7:m=r.ops.pop(),r.trys.pop();continue;default:if(d=r.trys,!(d=d.length>0&&d[d.length-1])&&(m[0]===6||m[0]===2)){r=0;continue}if(m[0]===3&&(!d||m[1]>d[0]&&m[1]<d[3])){r.label=m[1];break}if(m[0]===6&&r.label<d[1]){r.label=d[1],d=m;break}if(d&&r.label<d[2]){r.label=d[2],r.ops.push(m);break}d[2]&&r.ops.pop(),r.trys.pop();continue}m=e.call(t,r)}catch(C){m=[6,C],c=0}finally{o=d=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},yg=function(){function t(e,r){this.name=e,this.track=r}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(e){var r={};r[this.name]=e;var o={advanced:[r]};return this.track.applyConstraints(o)},t.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var r=e[this.name];return r}return null},t}(),xy=function(t){Ed(e,t);function e(r,o){return t.call(this,r,o)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(r){var o={};o[this.name]=r;var c={advanced:[o]};return this.track.applyConstraints(c)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var r=this.track.getCapabilities(),o=r[this.name];return{min:o.min,max:o.max,step:o.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(yg),my=function(t){Ed(e,t);function e(r){return t.call(this,"zoom",r)||this}return e}(xy),wy=function(t){Ed(e,t);function e(r){return t.call(this,"torch",r)||this}return e}(yg),yy=function(){function t(e){this.track=e}return t.prototype.zoomFeature=function(){return new my(this.track)},t.prototype.torchFeature=function(){return new wy(this.track)},t}(),vy=function(){function t(e,r,o){this.isClosed=!1,this.parentElement=e,this.mediaStream=r,this.callbacks=o,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return t.prototype.createVideoElement=function(e){var r=document.createElement("video");return r.style.width="".concat(e,"px"),r.style.display="block",r.muted=!0,r.setAttribute("muted","true"),r.playsInline=!0,r},t.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var r=function(){var o=e.surface.clientWidth,c=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(o,c),e.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(e,r,o,c){return Xa(this,void 0,void 0,function(){var d,f;return $a(this,function(x){switch(x.label){case 0:return d=new t(e,r,c),o.aspectRatio?(f={aspectRatio:o.aspectRatio},[4,d.getFirstTrackOrFail().applyConstraints(f)]):[3,2];case 1:x.sent(),x.label=2;case 2:return d.setupSurface(),[2,d]}})})},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(e){this.failIfClosed();var r=this,o=function(){setTimeout(e,200),r.surface.removeEventListener("playing",o)};this.surface.addEventListener("playing",o),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(e){return Xa(this,void 0,void 0,function(){return $a(this,function(r){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(r,o){var c=e.mediaStream.getVideoTracks(),d=c.length,f=0;e.mediaStream.getVideoTracks().forEach(function(x){e.mediaStream.removeTrack(x),x.stop(),++f,f>=d&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),r())})})},t.prototype.getCapabilities=function(){return new yy(this.getFirstTrackOrFail())},t}(),Ey=function(){function t(e){this.mediaStream=e}return t.prototype.render=function(e,r,o){return Xa(this,void 0,void 0,function(){return $a(this,function(c){return[2,vy.create(e,this.mediaStream,r,o)]})})},t.create=function(e){return Xa(this,void 0,void 0,function(){var r,o;return $a(this,function(c){switch(c.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return r={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(r)];case 1:return o=c.sent(),[2,new t(o)]}})})},t}(),Nh=function(t,e,r,o){function c(d){return d instanceof r?d:new r(function(f){f(d)})}return new(r||(r=Promise))(function(d,f){function x(C){try{m(o.next(C))}catch(_){f(_)}}function w(C){try{m(o.throw(C))}catch(_){f(_)}}function m(C){C.done?d(C.value):c(C.value).then(x,w)}m((o=o.apply(t,e||[])).next())})},Oh=function(t,e){var r={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},o,c,d,f;return f={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function x(m){return function(C){return w([m,C])}}function w(m){if(o)throw new TypeError("Generator is already executing.");for(;f&&(f=0,m[0]&&(r=0)),r;)try{if(o=1,c&&(d=m[0]&2?c.return:m[0]?c.throw||((d=c.return)&&d.call(c),0):c.next)&&!(d=d.call(c,m[1])).done)return d;switch(c=0,d&&(m=[m[0]&2,d.value]),m[0]){case 0:case 1:d=m;break;case 4:return r.label++,{value:m[1],done:!1};case 5:r.label++,c=m[1],m=[0];continue;case 7:m=r.ops.pop(),r.trys.pop();continue;default:if(d=r.trys,!(d=d.length>0&&d[d.length-1])&&(m[0]===6||m[0]===2)){r=0;continue}if(m[0]===3&&(!d||m[1]>d[0]&&m[1]<d[3])){r.label=m[1];break}if(m[0]===6&&r.label<d[1]){r.label=d[1],d=m;break}if(d&&r.label<d[2]){r.label=d[2],r.ops.push(m);break}d[2]&&r.ops.pop(),r.trys.pop();continue}m=e.call(t,r)}catch(C){m=[6,C],c=0}finally{o=d=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},Cy=function(){function t(){}return t.failIfNotSupported=function(){return Nh(this,void 0,void 0,function(){return Oh(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]})})},t.prototype.create=function(e){return Nh(this,void 0,void 0,function(){return Oh(this,function(r){return[2,Ey.create(e)]})})},t}(),_y=function(t,e,r,o){function c(d){return d instanceof r?d:new r(function(f){f(d)})}return new(r||(r=Promise))(function(d,f){function x(C){try{m(o.next(C))}catch(_){f(_)}}function w(C){try{m(o.throw(C))}catch(_){f(_)}}function m(C){C.done?d(C.value):c(C.value).then(x,w)}m((o=o.apply(t,e||[])).next())})},Ay=function(t,e){var r={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},o,c,d,f;return f={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function x(m){return function(C){return w([m,C])}}function w(m){if(o)throw new TypeError("Generator is already executing.");for(;f&&(f=0,m[0]&&(r=0)),r;)try{if(o=1,c&&(d=m[0]&2?c.return:m[0]?c.throw||((d=c.return)&&d.call(c),0):c.next)&&!(d=d.call(c,m[1])).done)return d;switch(c=0,d&&(m=[m[0]&2,d.value]),m[0]){case 0:case 1:d=m;break;case 4:return r.label++,{value:m[1],done:!1};case 5:r.label++,c=m[1],m=[0];continue;case 7:m=r.ops.pop(),r.trys.pop();continue;default:if(d=r.trys,!(d=d.length>0&&d[d.length-1])&&(m[0]===6||m[0]===2)){r=0;continue}if(m[0]===3&&(!d||m[1]>d[0]&&m[1]<d[3])){r.label=m[1];break}if(m[0]===6&&r.label<d[1]){r.label=d[1],d=m;break}if(d&&r.label<d[2]){r.label=d[2],r.ops.push(m);break}d[2]&&r.ops.pop(),r.trys.pop();continue}m=e.call(t,r)}catch(C){m=[6,C],c=0}finally{o=d=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},Sy=function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var e=Xi.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(e=Xi.insecureContextCameraQueryError()),Promise.reject(e)},t.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},t.getCamerasFromMediaDevices=function(){return _y(this,void 0,void 0,function(){var e,r,o,c,d,f,x;return Ay(this,function(w){switch(w.label){case 0:return e=function(m){for(var C=m.getVideoTracks(),_=0,O=C;_<O.length;_++){var P=O[_];P.enabled=!1,P.stop(),m.removeTrack(P)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return r=w.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(o=w.sent(),c=[],d=0,f=o;d<f.length;d++)x=f[d],x.kind==="videoinput"&&c.push({id:x.deviceId,label:x.label});return e(r),[2,c]}})})},t.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,r){var o=function(d){for(var f=[],x=0,w=d;x<w.length;x++){var m=w[x];m.kind==="video"&&f.push({id:m.id,label:m.label})}e(f)},c=MediaStreamTrack;c.getSources(o)})},t}(),lt;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(lt||(lt={}));var by=function(){function t(){this.state=lt.NOT_STARTED,this.onGoingTransactionNewState=lt.UNKNOWN}return t.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},t.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===lt.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=lt.UNKNOWN,this.directTransition(e)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===lt.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=lt.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==lt.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(e){switch(this.state){case lt.UNKNOWN:throw"Transition from unknown is not allowed";case lt.NOT_STARTED:this.failIfNewStateIs(e,[lt.PAUSED]);break;case lt.SCANNING:break;case lt.PAUSED:break}},t.prototype.failIfNewStateIs=function(e,r){for(var o=0,c=r;o<c.length;o++){var d=c[o];if(e===d)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},t}(),Iy=function(){function t(e){this.stateManager=e}return t.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},t.prototype.directTransition=function(e){this.stateManager.directTransition(e)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===lt.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==lt.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===lt.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===lt.PAUSED},t}(),Ty=function(){function t(){}return t.create=function(){return new Iy(new by)},t}(),Ny=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,c){o.__proto__=c}||function(o,c){for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(o[d]=c[d])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function o(){this.constructor=e}e.prototype=r===null?Object.create(r):(o.prototype=r.prototype,new o)}}(),ln=function(t){Ny(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(ly),Oy=function(){function t(e,r){this.logger=r,this.fps=ln.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=ln.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?wg.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!Jn(this.qrbox)},t.create=function(e,r){return new t(e,r)},t}(),Rh=function(){function t(e,r){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var o;typeof r=="boolean"?this.verbose=r===!0:r&&(o=r,this.verbose=o.verbose===!0,o.experimentalFeatures),this.logger=new uy(this.verbose),this.qrcode=new py(this.getSupportedFormats(r),this.getUseBarCodeDetectorIfSupported(o),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=Ty.create()}return t.prototype.start=function(e,r,o,c){var d=this;if(!e)throw"cameraIdOrConfig is required";if(!o||typeof o!="function")throw"qrCodeSuccessCallback is required and should be a function.";var f;c?f=c:f=this.verbose?this.logger.log:function(){};var x=Oy.create(r,this.logger);this.clearElement();var w=!1;x.videoConstraints&&(x.isMediaStreamConstraintsValid()?w=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var m=w,C=document.getElementById(this.elementId);C.clientWidth?C.clientWidth:ln.DEFAULT_WIDTH,C.style.position="relative",this.shouldScan=!0,this.element=C;var _=this,O=this.stateManagerProxy.startTransition(lt.SCANNING);return new Promise(function(P,M){var F=m?x.videoConstraints:_.createVideoConstraints(e);if(!F){O.cancel(),M("videoConstraints should be defined");return}var G={};(!m||x.aspectRatio)&&(G.aspectRatio=x.aspectRatio);var k={onRenderSurfaceReady:function(N,b){_.setupUi(N,b,x),_.isScanning=!0,_.foreverScan(x,o,f)}};Cy.failIfNotSupported().then(function(N){N.create(F).then(function(b){return b.render(d.element,G,k).then(function(L){_.renderedCamera=L,O.execute(),P(null)}).catch(function(L){O.cancel(),M(L)})}).catch(function(b){O.cancel(),M(Xi.errorGettingUserMedia(b))})}).catch(function(N){O.cancel(),M(Xi.cameraStreamingNotSupported())})})},t.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(lt.PAUSED),this.showPausedState(),(Jn(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,r=function(){e.stateManagerProxy.directTransition(lt.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){r();return}this.renderedCamera.resume(function(){r()})},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var r=this.stateManagerProxy.startTransition(lt.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var o=function(){if(e.element){var d=document.getElementById(ln.SHADED_REGION_ELEMENT_ID);d&&e.element.removeChild(d)}},c=this;return this.renderedCamera.close().then(function(){return c.renderedCamera=null,c.element&&(c.element.removeChild(c.canvasElement),c.canvasElement=null),o(),c.qrRegion&&(c.qrRegion=null),c.context&&(c.context=null),r.execute(),c.hidePausedState(),c.isScanning=!1,Promise.resolve()})},t.prototype.scanFile=function(e,r){return this.scanFileV2(e,r).then(function(o){return o.decodedText})},t.prototype.scanFileV2=function(e,r){var o=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Jn(r)&&(r=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(c,d){o.possiblyCloseLastScanImageFile(),o.clearElement(),o.lastScanImageFile=URL.createObjectURL(e);var f=new Image;f.onload=function(){var x=f.width,w=f.height,m=document.getElementById(o.elementId),C=m.clientWidth?m.clientWidth:ln.DEFAULT_WIDTH,_=Math.max(m.clientHeight?m.clientHeight:w,ln.FILE_SCAN_MIN_HEIGHT),O=o.computeCanvasDrawConfig(x,w,C,_);if(r){var P=o.createCanvasElement(C,_,"qr-canvas-visible");P.style.display="inline-block",m.appendChild(P);var M=P.getContext("2d");if(!M)throw"Unable to get 2d context from canvas";M.canvas.width=C,M.canvas.height=_,M.drawImage(f,0,0,x,w,O.x,O.y,O.width,O.height)}var F=ln.FILE_SCAN_HIDDEN_CANVAS_PADDING,G=Math.max(f.width,O.width),k=Math.max(f.height,O.height),N=G+2*F,b=k+2*F,L=o.createCanvasElement(N,b);m.appendChild(L);var J=L.getContext("2d");if(!J)throw"Unable to get 2d context from canvas";J.canvas.width=N,J.canvas.height=b,J.drawImage(f,0,0,x,w,F,F,G,k);try{o.qrcode.decodeRobustlyAsync(L).then(function(H){c(Ah.createFromQrcodeResult(H))}).catch(d)}catch(H){d("QR code parse error, error = ".concat(H))}},f.onerror=d,f.onabort=d,f.onstalled=d,f.onsuspend=d,f.src=URL.createObjectURL(e)})},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return Sy.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(e){if(e){if(!wg.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},t.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(e){var r=[ie.QR_CODE,ie.AZTEC,ie.CODABAR,ie.CODE_39,ie.CODE_93,ie.CODE_128,ie.DATA_MATRIX,ie.MAXICODE,ie.ITF,ie.EAN_13,ie.EAN_8,ie.PDF_417,ie.RSS_14,ie.RSS_EXPANDED,ie.UPC_A,ie.UPC_E,ie.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return r;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var o=[],c=0,d=e.formatsToSupport;c<d.length;c++){var f=d[c];ay(f)?o.push(f):this.logger.warn("Invalid format: ".concat(f," passed in config, ignoring."))}if(o.length===0)throw"None of formatsToSupport match supported values.";return o},t.prototype.getUseBarCodeDetectorIfSupported=function(e){if(Jn(e))return!0;if(!Jn(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(Jn(e.experimentalFeatures))return!0;var r=e.experimentalFeatures;return Jn(r.useBarCodeDetectorIfSupported)?!0:r.useBarCodeDetectorIfSupported!==!1},t.prototype.validateQrboxSize=function(e,r,o){var c=this,d=o.qrbox;this.validateQrboxConfig(d);var f=this.toQrdimensions(e,r,d),x=function(m){if(m<ln.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(ln.MIN_QR_BOX_SIZE,"px.")},w=function(m){return m>e&&(c.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),m=e),m};x(f.width),x(f.height),f.width=w(f.width)},t.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(e,r,o){if(typeof o=="number")return{width:o,height:o};if(typeof o=="function")try{return o(e,r)}catch(c){throw new Error("qrbox config was passed as a function but it failed with unknown error"+c)}return o},t.prototype.setupUi=function(e,r,o){o.isShadedBoxEnabled()&&this.validateQrboxSize(e,r,o);var c=Jn(o.qrbox)?{width:e,height:r}:o.qrbox;this.validateQrboxConfig(c);var d=this.toQrdimensions(e,r,c);d.height>r&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var f=o.isShadedBoxEnabled()&&d.height<=r,x={x:0,y:0,width:e,height:r},w=f?this.getShadedRegionBounds(e,r,d):x,m=this.createCanvasElement(w.width,w.height),C={willReadFrequently:!0},_=m.getContext("2d",C);_.canvas.width=w.width,_.canvas.height=w.height,this.element.append(m),f&&this.possiblyInsertShadingElement(this.element,e,r,d),this.createScannerPausedUiElement(this.element),this.qrRegion=w,this.context=_,this.canvasElement=m},t.prototype.createScannerPausedUiElement=function(e){var r=document.createElement("div");r.innerText=Xi.scannerPaused(),r.style.display="none",r.style.position="absolute",r.style.top="0px",r.style.zIndex="1",r.style.background="rgba(9, 9, 9, 0.46)",r.style.color="#FFECEC",r.style.textAlign="center",r.style.width="100%",e.appendChild(r),this.scannerPausedUiElement=r},t.prototype.scanContext=function(e,r){var o=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(c){return e(c.text,Ah.createFromQrcodeResult(c)),o.possiblyUpdateShaders(!0),!0}).catch(function(c){o.possiblyUpdateShaders(!1);var d=Xi.codeParseError(c);return r(d,cy.createFrom(d)),!1})},t.prototype.foreverScan=function(e,r,o){var c=this;if(this.shouldScan&&this.renderedCamera){var d=this.renderedCamera.getSurface(),f=d.videoWidth/d.clientWidth,x=d.videoHeight/d.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var w=this.qrRegion.width*f,m=this.qrRegion.height*x,C=this.qrRegion.x*f,_=this.qrRegion.y*x;this.context.drawImage(d,C,_,w,m,0,0,this.qrRegion.width,this.qrRegion.height);var O=function(){c.foreverScanTimeout=setTimeout(function(){c.foreverScan(e,r,o)},c.getTimeoutFps(e.fps))};this.scanContext(r,o).then(function(P){!P&&e.disableFlip!==!0?(c.context.translate(c.context.canvas.width,0),c.context.scale(-1,1),c.scanContext(r,o).finally(function(){O()})):O()}).catch(function(P){c.logger.logError("Error happend while scanning context",P),O()})}},t.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var r="facingMode",o="deviceId",c={user:!0,environment:!0},d="exact",f=function(M){if(M in c)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(M,"'")},x=Object.keys(e);if(x.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(x.length," keys");var w=Object.keys(e)[0];if(w!==r&&w!==o)throw"Only '".concat(r,"' and '").concat(o,"' ")+" are supported for 'cameraIdOrConfig'";if(w===r){var m=e.facingMode;if(typeof m=="string"){if(f(m))return{facingMode:m}}else if(typeof m=="object")if(d in m){if(f(m["".concat(d)]))return{facingMode:{exact:m["".concat(d)]}}}else throw"'facingMode' should be string or object with"+" ".concat(d," as key.");else{var C=typeof m;throw"Invalid type of 'facingMode' = ".concat(C)}}else{var _=e.deviceId;if(typeof _=="string")return{deviceId:_};if(typeof _=="object"){if(d in _)return{deviceId:{exact:_["".concat(d)]}};throw"'deviceId' should be string or object with"+" ".concat(d," as key.")}else{var O=typeof _;throw"Invalid type of 'deviceId' = ".concat(O)}}}var P=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(P)},t.prototype.computeCanvasDrawConfig=function(e,r,o,c){if(e<=o&&r<=c){var d=(o-e)/2,f=(c-r)/2;return{x:d,y:f,width:e,height:r}}else{var x=e,w=r;return e>o&&(r=o/e*r,e=o),r>c&&(e=c/r*e,r=c),this.logger.log("Image downsampled from "+"".concat(x,"X").concat(w)+" to ".concat(e,"X").concat(r,".")),this.computeCanvasDrawConfig(e,r,o,c)}},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},t.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(r){r.style.backgroundColor=e?ln.BORDER_SHADER_MATCH_COLOR:ln.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(e,r,o){var c=e,d=r,f=document.createElement("canvas");return f.style.width="".concat(c,"px"),f.style.height="".concat(d,"px"),f.style.display="none",f.id=Jn(o)?"qr-canvas":o,f},t.prototype.getShadedRegionBounds=function(e,r,o){if(o.width>e||o.height>r)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-o.width)/2,y:(r-o.height)/2,width:o.width,height:o.height}},t.prototype.possiblyInsertShadingElement=function(e,r,o,c){if(!(r-c.width<1||o-c.height<1)){var d=document.createElement("div");d.style.position="absolute";var f=(r-c.width)/2,x=(o-c.height)/2;if(d.style.borderLeft="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),d.style.borderRight="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),d.style.borderTop="".concat(x,"px solid rgba(0, 0, 0, 0.48)"),d.style.borderBottom="".concat(x,"px solid rgba(0, 0, 0, 0.48)"),d.style.boxSizing="border-box",d.style.top="0px",d.style.bottom="0px",d.style.left="0px",d.style.right="0px",d.id="".concat(ln.SHADED_REGION_ELEMENT_ID),r-c.width<11||o-c.height<11)this.hasBorderShaders=!1;else{var w=5,m=40;this.insertShaderBorders(d,m,w,-w,null,0,!0),this.insertShaderBorders(d,m,w,-w,null,0,!1),this.insertShaderBorders(d,m,w,null,-w,0,!0),this.insertShaderBorders(d,m,w,null,-w,0,!1),this.insertShaderBorders(d,w,m+w,-w,null,-w,!0),this.insertShaderBorders(d,w,m+w,null,-w,-w,!0),this.insertShaderBorders(d,w,m+w,-w,null,-w,!1),this.insertShaderBorders(d,w,m+w,null,-w,-w,!1),this.hasBorderShaders=!0}e.append(d)}},t.prototype.insertShaderBorders=function(e,r,o,c,d,f,x){var w=document.createElement("div");w.style.position="absolute",w.style.backgroundColor=ln.BORDER_SHADER_DEFAULT_COLOR,w.style.width="".concat(r,"px"),w.style.height="".concat(o,"px"),c!==null&&(w.style.top="".concat(c,"px")),d!==null&&(w.style.bottom="".concat(d,"px")),x?w.style.left="".concat(f,"px"):w.style.right="".concat(f,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(w),e.appendChild(w)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(e){return 1e3/e},t}(),kh;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(kh||(kh={}));function Ry(){const[t,e]=ue.useState(!1),[r,o]=ue.useState(""),[c,d]=ue.useState(null),[f,x]=ue.useState("idle"),[w,m]=ue.useState(""),[C,_]=ue.useState([]),[O,P]=ue.useState(!1),[M,F]=ue.useState(""),[G,k]=ue.useState(!1),N=ue.useRef(null),{user:b}=Wr();ue.useEffect(()=>{b&&L()},[b]);const L=async()=>{if(b)try{k(!0);const{data:ee}=await ft.from("scanners").select("*").eq("user_id",b.id).eq("is_active",!0).order("last_used_at",{ascending:!1,nullsFirst:!1});ee&&_(ee)}catch(ee){console.error("Error loading scanners:",ee)}finally{k(!1)}},J=async ee=>{if(ee.trim())try{const{data:pe}=await ft.from("scanners").select("*").eq("user_id",b==null?void 0:b.id).ilike("scanner_name",`%${ee}%`).order("created_at",{ascending:!1});pe&&pe.length>0?(_(pe),F("")):(m(`Scanner "${ee}" not found`),setTimeout(()=>m(""),3e3))}catch(pe){console.error("Error searching scanner:",pe),m("Failed to search scanner")}},H=async ee=>{if(confirm("Are you sure you want to delete this scanner? This action cannot be undone."))try{const{error:pe}=await ft.from("scanners").delete().eq("id",ee).eq("user_id",b==null?void 0:b.id);if(pe)throw pe;_(C.filter(W=>W.id!==ee)),m("")}catch(pe){console.error("Error deleting scanner:",pe),m("Failed to delete scanner")}},U=async()=>{if(b)try{const ee={userAgent:navigator.userAgent,platform:navigator.platform,timestamp:new Date().toISOString()},pe=`Camera-${new Date().toLocaleDateString()}`,{error:W}=await ft.from("scanners").upsert({user_id:b.id,scanner_name:pe,scanner_type:"camera",device_info:JSON.stringify(ee),is_active:!0,last_used_at:new Date().toISOString()});if(W)throw W;await L(),P(!1)}catch(ee){console.error("Error registering scanner:",ee),m("Failed to register scanner")}},q=async()=>{try{e(!0),x("idle"),m(""),N.current||(N.current=new Rh("qr-reader"));const ee=await Rh.getCameras();if(!ee||ee.length===0)throw new Error("No cameras found on this device");const pe=ee[ee.length-1].id;await N.current.start(pe,{fps:10,qrbox:{width:300,height:300},aspectRatio:1},W=>{x("detecting"),setTimeout(()=>{W.trim()&&me(W.trim())},300)},()=>{}),await U()}catch(ee){const pe=ee instanceof Error?ee.message:String(ee);pe.includes("camera")||pe.includes("permission")||pe.includes("Permission denied")?m("Camera permission denied. Please allow camera access in your browser settings and try again."):pe.includes("No cameras")?m("No camera found on this device. Please check your device has a working camera."):m("Failed to access camera. Please check your permissions and device settings."),e(!1),console.error("Camera error:",ee)}},X=async()=>{try{N.current&&N.current.isScanning&&await N.current.stop()}catch(ee){console.log("Error stopping camera:",ee)}e(!1),x("idle")},me=async ee=>{try{const{data:pe,error:W}=await ft.from("products").select("*").eq("serial_number",ee).maybeSingle();if(W)throw W;pe?(d(pe),x("success"),await Le(ee,"camera"),setTimeout(()=>{x("idle")},2e3)):(x("error"),m("Produk tidak ditemukan di database"),d(null),setTimeout(()=>{x("idle")},2e3))}catch(pe){x("error"),m("Error searching product"),console.error("Search error:",pe)}},Le=async(ee,pe)=>{if(b)try{await ft.from("scan_history").insert({user_id:b.id,serial_number:ee,scan_method:pe})}catch(W){console.error("Error saving scan history:",W)}},ce=ee=>{ee.preventDefault(),r.trim()&&(me(r.trim()),o(""))};return ue.useEffect(()=>()=>{N.current&&N.current.isScanning&&N.current.stop().catch(ee=>{console.log("Error stopping scanner on unmount:",ee)})},[]),S.jsxs("div",{className:"space-y-6",children:[S.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[S.jsxs("div",{className:"flex items-center justify-between mb-6",children:[S.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Scanner QR/Barcode"}),S.jsxs("button",{onClick:()=>P(!0),className:"flex items-center gap-2 bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg font-bold transition-colors",children:[S.jsx(vh,{className:"w-4 h-4"}),"Manage Scanners"]})]}),S.jsx("div",{className:"relative bg-black rounded-lg overflow-hidden w-full",children:t?S.jsxs("div",{className:"relative",children:[S.jsx("div",{id:"qr-reader",className:"w-full"}),S.jsx("div",{className:"absolute top-4 right-4 z-10",children:S.jsx("button",{onClick:X,className:"bg-red-600 hover:bg-red-700 text-white p-3 rounded-lg transition-colors shadow-lg",title:"Stop Camera",children:S.jsx(iy,{className:"w-6 h-6"})})}),f==="detecting"&&S.jsxs("div",{className:"absolute top-4 left-4 bg-yellow-500 text-white px-6 py-3 rounded-lg flex items-center gap-2 font-bold shadow-lg animate-pulse z-10",children:[S.jsx(gh,{className:"w-6 h-6"}),S.jsx("span",{children:"Detecting..."})]}),f==="success"&&S.jsxs("div",{className:"absolute top-4 left-4 bg-green-600 text-white px-6 py-3 rounded-lg flex items-center gap-2 font-bold shadow-lg animate-bounce z-10",children:[S.jsx(Ha,{className:"w-6 h-6"}),S.jsx("span",{children:"Barcode Detected!"})]}),f==="error"&&S.jsxs("div",{className:"absolute top-4 left-4 bg-red-600 text-white px-6 py-3 rounded-lg flex items-center gap-2 font-bold shadow-lg z-10",children:[S.jsx(gh,{className:"w-6 h-6"}),S.jsx("span",{children:"Product Not Found"})]})]}):S.jsxs("div",{className:"flex flex-col items-center justify-center w-full py-20 bg-gray-900",children:[S.jsx(ph,{className:"w-24 h-24 text-gray-600 mb-6"}),S.jsxs("p",{className:"text-gray-400 mb-6 text-center text-lg",children:["Kamera belum aktif",S.jsx("br",{}),"Tekan tombol di bawah untuk mulai scanning"]}),S.jsxs("button",{onClick:q,className:"bg-red-600 hover:bg-red-700 text-white px-10 py-4 rounded-lg font-bold transition-colors flex items-center gap-3 text-lg shadow-lg",children:[S.jsx(ph,{className:"w-7 h-7"}),"Mulai Scan Barcode"]})]})})]}),S.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[S.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Input Manual Serial Number"}),S.jsxs("form",{onSubmit:ce,className:"flex gap-2",children:[S.jsx("input",{type:"text",value:r,onChange:ee=>o(ee.target.value),placeholder:"Masukkan Serial Number",className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-600 text-base"}),S.jsx("button",{type:"submit",className:"bg-red-600 hover:bg-red-700 text-white px-8 py-3 rounded-lg font-bold transition-colors",children:"Cari"})]})]}),c&&S.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border-4 border-red-600",children:[S.jsxs("div",{className:"flex items-start justify-between mb-6",children:[S.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Detail Produk"}),S.jsxs("div",{className:"bg-red-100 text-red-700 px-4 py-2 rounded-full text-sm font-bold flex items-center gap-2",children:[S.jsx(Ha,{className:"w-5 h-5"}),"Terverifikasi"]})]}),S.jsxs("div",{className:"space-y-4",children:[S.jsxs("div",{className:"flex justify-between py-3 border-b-2 border-gray-200",children:[S.jsx("span",{className:"text-gray-600 font-bold text-base",children:"Serial Number:"}),S.jsx("span",{className:"text-gray-900 font-bold text-base",children:c.serial_number})]}),S.jsxs("div",{className:"flex justify-between py-3 border-b-2 border-gray-200",children:[S.jsx("span",{className:"text-gray-600 font-bold text-base",children:"Nama Produk:"}),S.jsx("span",{className:"text-gray-900 text-right font-semibold",children:c.product_name})]}),S.jsxs("div",{className:"flex justify-between py-3 border-b-2 border-gray-200",children:[S.jsx("span",{className:"text-gray-600 font-bold text-base",children:"Kode Produk:"}),S.jsx("span",{className:"text-gray-900 font-semibold",children:c.product_code})]}),S.jsxs("div",{className:"flex justify-between py-3 border-b-2 border-gray-200",children:[S.jsx("span",{className:"text-gray-600 font-bold text-base",children:"Kemasan:"}),S.jsx("span",{className:"text-gray-900 font-semibold",children:c.packaging})]}),S.jsxs("div",{className:"flex justify-between py-3 border-b-2 border-gray-200",children:[S.jsx("span",{className:"text-gray-600 font-bold text-base",children:"Production Order:"}),S.jsx("span",{className:"text-gray-900 font-semibold",children:c.production_order})]}),S.jsxs("div",{className:"flex justify-between py-3 border-b-2 border-gray-200",children:[S.jsx("span",{className:"text-gray-600 font-bold text-base",children:"Tanggal Produksi:"}),S.jsxs("span",{className:"text-gray-900 font-semibold",children:[new Date(c.production_date).toLocaleDateString("id-ID")," ",c.production_time]})]}),S.jsxs("div",{className:"flex justify-between py-3 border-b-2 border-gray-200",children:[S.jsx("span",{className:"text-gray-600 font-bold text-base",children:"Lokasi:"}),S.jsx("span",{className:"text-gray-900 font-semibold",children:c.location})]}),S.jsxs("div",{className:"flex justify-between py-3",children:[S.jsx("span",{className:"text-gray-600 font-bold text-base",children:"Status:"}),S.jsx("span",{className:"text-red-600 font-bold text-base",children:"Unverified"})]})]})]}),w&&!c&&S.jsx("div",{className:"bg-red-50 border-2 border-red-200 text-red-600 px-6 py-4 rounded-lg font-semibold",children:w}),O&&S.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:S.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full p-8",children:[S.jsxs("div",{className:"flex items-center justify-between mb-6",children:[S.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Manage Scanners"}),S.jsx("button",{onClick:()=>P(!1),className:"text-gray-600 hover:text-gray-900 text-2xl font-bold",children:""})]}),S.jsxs("div",{className:"space-y-6",children:[S.jsxs("div",{className:"flex gap-2",children:[S.jsx("input",{type:"text",value:M,onChange:ee=>F(ee.target.value),placeholder:"Search scanner by name...",className:"flex-1 px-4 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-red-600",onKeyPress:ee=>{ee.key==="Enter"&&J(M)}}),S.jsxs("button",{onClick:()=>J(M),className:"bg-red-600 hover:bg-red-700 text-white px-6 py-2 rounded-lg font-bold transition-colors flex items-center gap-2",children:[S.jsx(vh,{className:"w-4 h-4"}),"Search"]})]}),G?S.jsx("p",{className:"text-gray-600 text-center py-8",children:"Loading scanners..."}):C.length===0?S.jsx("p",{className:"text-gray-600 text-center py-8",children:"No scanners registered yet"}):S.jsx("div",{className:"space-y-4",children:C.map(ee=>S.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border-2 border-gray-200",children:[S.jsxs("div",{className:"flex-1",children:[S.jsx("p",{className:"font-bold text-gray-900",children:ee.scanner_name}),S.jsxs("p",{className:"text-sm text-gray-600",children:["Type: ",ee.scanner_type]}),S.jsxs("p",{className:"text-sm text-gray-600",children:["Created: ",new Date(ee.created_at).toLocaleDateString("id-ID")]})]}),S.jsx("button",{onClick:()=>H(ee.id),className:"bg-red-600 hover:bg-red-700 text-white p-3 rounded-lg transition-colors flex items-center gap-2",title:"Delete Scanner",children:S.jsx(ny,{className:"w-5 h-5"})})]},ee.id))}),S.jsx("button",{onClick:()=>P(!1),className:"w-full bg-gray-300 hover:bg-gray-400 text-gray-900 font-bold py-3 rounded-lg transition-colors",children:"Close"})]})]})})]})}function ky(){const[t,e]=ue.useState({totalFolders:0,totalScans:0,failedScans:0}),[r,o]=ue.useState({}),[c,d]=ue.useState(new Set),[f,x]=ue.useState(new Date),{user:w}=Wr();ue.useEffect(()=>{w&&m()},[w,f]);const m=async()=>{try{const M=new Date(f.getFullYear(),f.getMonth(),1),F=new Date(f.getFullYear(),f.getMonth()+1,0),{data:G,error:k}=await ft.from("scan_history").select(`
          *,
          products (*)
        `).eq("user_id",w==null?void 0:w.id).gte("scan_date",M.toISOString().split("T")[0]).lte("scan_date",F.toISOString().split("T")[0]).order("scanned_at",{ascending:!1});if(k)throw k;const N={};G==null||G.forEach(b=>{const L=b.scan_date;N[L]||(N[L]=[]),N[L].push(b)}),o(N),e({totalFolders:Object.keys(N).length,totalScans:(G==null?void 0:G.length)||0,failedScans:0})}catch(M){console.error("Error loading history:",M)}},C=M=>{const F=new Set(c);F.has(M)?F.delete(M):F.add(M),d(F)},_=M=>{x(F=>{const G=new Date(F);return G.setMonth(G.getMonth()+M),G})},O=M=>new Date(M).toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),P=M=>new Date(M).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"});return S.jsxs("div",{className:"space-y-6",children:[S.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[S.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Manage scan palet dengan grouping berdasarkan tanggal"}),S.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[S.jsxs("div",{className:"bg-white border-4 border-red-600 rounded-lg p-4 flex items-start gap-3",children:[S.jsx("div",{className:"bg-red-100 p-3 rounded-lg",children:S.jsx(xh,{className:"w-6 h-6 text-red-600"})}),S.jsxs("div",{children:[S.jsx("p",{className:"text-sm text-red-600 font-medium",children:"Total Folder"}),S.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.totalFolders})]})]}),S.jsxs("div",{className:"bg-white border-4 border-red-600 rounded-lg p-4 flex items-start gap-3",children:[S.jsx("div",{className:"bg-red-100 p-3 rounded-lg",children:S.jsx(Ha,{className:"w-6 h-6 text-red-600"})}),S.jsxs("div",{children:[S.jsx("p",{className:"text-sm text-red-600 font-medium",children:"Total Scan"}),S.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.totalScans})]})]}),S.jsxs("div",{className:"bg-white border-4 border-red-600 rounded-lg p-4 flex items-start gap-3",children:[S.jsx("div",{className:"bg-red-100 p-3 rounded-lg",children:S.jsx(ry,{className:"w-6 h-6 text-red-600"})}),S.jsxs("div",{children:[S.jsx("p",{className:"text-sm text-red-600 font-medium",children:"Fail Txt"}),S.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.failedScans})]})]})]})]}),S.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[S.jsxs("div",{className:"flex items-center justify-between mb-6",children:[S.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[S.jsx(Yw,{className:"w-5 h-5"}),"Calendar"]}),S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsx("button",{onClick:()=>_(-1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:S.jsx(ma,{className:"w-5 h-5 transform rotate-90"})}),S.jsx("span",{className:"text-gray-900 font-medium min-w-[150px] text-center",children:f.toLocaleDateString("id-ID",{month:"long",year:"numeric"})}),S.jsx("button",{onClick:()=>_(1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:S.jsx(ma,{className:"w-5 h-5 transform -rotate-90"})})]})]}),S.jsx("div",{className:"space-y-3",children:Object.keys(r).length===0?S.jsx("div",{className:"text-center py-8 text-gray-500",children:"No scan history for this month"}):Object.entries(r).map(([M,F])=>S.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[S.jsxs("button",{onClick:()=>C(M),className:"w-full flex items-center justify-between p-4 bg-gray-50 hover:bg-gray-100 transition-colors",children:[S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsx("div",{className:"bg-red-600 p-2 rounded-lg",children:S.jsx(xh,{className:"w-5 h-5 text-white"})}),S.jsxs("div",{className:"text-left",children:[S.jsx("p",{className:"font-medium text-gray-900",children:O(M)}),S.jsxs("p",{className:"text-sm text-gray-500",children:[F.length," scan"]})]})]}),c.has(M)?S.jsx(Kw,{className:"w-5 h-5 text-gray-400"}):S.jsx(ma,{className:"w-5 h-5 text-gray-400"})]}),c.has(M)&&S.jsx("div",{className:"border-t border-gray-200 bg-white",children:F.map(G=>S.jsx("div",{className:"p-4 border-b border-gray-100 last:border-b-0 hover:bg-gray-50",children:S.jsxs("div",{className:"flex items-start justify-between",children:[S.jsxs("div",{className:"flex-1",children:[S.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[S.jsxs("span",{className:"font-semibold text-gray-900",children:["SN: ",G.serial_number]}),S.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${G.scan_method==="camera"?"bg-blue-100 text-blue-700":G.scan_method==="manual"?"bg-yellow-100 text-yellow-700":"bg-purple-100 text-purple-700"}`,children:G.scan_method})]}),G.products&&S.jsx("p",{className:"text-sm text-gray-600 mb-1",children:G.products.product_name}),S.jsx("p",{className:"text-xs text-gray-500",children:P(G.scanned_at)})]}),S.jsx(Ha,{className:"w-5 h-5 text-red-600"})]})},G.id))})]},M))})]})]})}function Dy(){return S.jsxs("div",{className:"space-y-6",children:[S.jsxs("div",{children:[S.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Reports"}),S.jsx("p",{className:"text-gray-600",children:"Generate and view scan reports"})]}),S.jsx("div",{className:"bg-white rounded-lg shadow-sm p-12 border-4 border-red-600",children:S.jsxs("div",{className:"flex flex-col items-center justify-center text-center",children:[S.jsx("div",{className:"bg-red-100 p-6 rounded-full mb-4",children:S.jsx(wu,{className:"w-12 h-12 text-red-600"})}),S.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Reports Coming Soon"}),S.jsx("p",{className:"text-gray-600 max-w-md",children:"The reporting feature is under development. You will be able to generate comprehensive scan reports, export data to Excel, and analyze scan patterns."})]})})]})}function Py(){const{user:t}=Wr(),[e,r]=ue.useState(""),[o,c]=ue.useState(""),[d,f]=ue.useState(""),[x,w]=ue.useState(""),[m,C]=ue.useState(""),[_,O]=ue.useState(""),[P,M]=ue.useState(""),[F,G]=ue.useState(!1);ue.useEffect(()=>{t!=null&&t.email&&r(t.email)},[t]);const k=async b=>{b.preventDefault(),O(""),G(!0);try{O("Profile updated successfully"),M("success")}catch(L){O(L instanceof Error?L.message:"Failed to update profile"),M("error")}finally{G(!1)}},N=async b=>{if(b.preventDefault(),O(""),x!==m){O("Passwords do not match"),M("error");return}if(x.length<6){O("Password must be at least 6 characters"),M("error");return}G(!0);try{O("Password changed successfully"),M("success"),f(""),w(""),C("")}catch(L){O(L instanceof Error?L.message:"Failed to change password"),M("error")}finally{G(!1)}};return S.jsx("div",{className:"space-y-6",children:S.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-8",children:[S.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Edit Profile"}),S.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[S.jsx("form",{onSubmit:k,className:"space-y-6",children:S.jsxs("div",{children:[S.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-6 flex items-center gap-3",children:[S.jsx(vd,{className:"w-6 h-6 text-red-600"}),"Profile Information"]}),S.jsxs("div",{className:"space-y-6",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"displayName",className:"block text-sm font-bold text-gray-700 mb-2",children:"Display Name"}),S.jsx("input",{id:"displayName",type:"text",value:o,onChange:b=>c(b.target.value),placeholder:"Enter your name",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-red-600 text-base"})]}),S.jsxs("div",{children:[S.jsxs("label",{htmlFor:"email",className:"block text-sm font-bold text-gray-700 mb-2 flex items-center gap-2",children:[S.jsx(Qw,{className:"w-4 h-4"}),"Email Address"]}),S.jsx("input",{id:"email",type:"email",value:e,disabled:!0,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg bg-gray-100 text-gray-600 text-base"}),S.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Email cannot be changed"})]}),S.jsxs("button",{type:"submit",disabled:F,className:"w-full bg-red-600 hover:bg-red-700 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:[S.jsx(ey,{className:"w-5 h-5"}),"Save Changes"]})]})]})}),S.jsx("form",{onSubmit:N,className:"space-y-6",children:S.jsxs("div",{children:[S.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-6 flex items-center gap-3",children:[S.jsx(yh,{className:"w-6 h-6 text-red-600"}),"Change Password"]}),S.jsxs("div",{className:"space-y-6",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"currentPassword",className:"block text-sm font-bold text-gray-700 mb-2",children:"Current Password"}),S.jsx("input",{id:"currentPassword",type:"password",value:d,onChange:b=>f(b.target.value),placeholder:"Enter current password",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-red-600 text-base"})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-bold text-gray-700 mb-2",children:"New Password"}),S.jsx("input",{id:"newPassword",type:"password",value:x,onChange:b=>w(b.target.value),placeholder:"Minimum 6 characters",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-red-600 text-base"})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-bold text-gray-700 mb-2",children:"Confirm New Password"}),S.jsx("input",{id:"confirmPassword",type:"password",value:m,onChange:b=>C(b.target.value),placeholder:"Re-enter new password",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-red-600 text-base"})]}),S.jsxs("button",{type:"submit",disabled:F,className:"w-full bg-red-600 hover:bg-red-700 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:[S.jsx(yh,{className:"w-5 h-5"}),"Update Password"]})]})]})})]}),_&&S.jsx("div",{className:`mt-8 p-4 rounded-lg font-semibold ${P==="success"?"bg-green-100 text-green-700 border-2 border-green-300":"bg-red-100 text-red-700 border-2 border-red-300"}`,children:_})]})})}function My(){const{user:t,loading:e}=Wr(),[r,o]=ue.useState(!1),[c,d]=ue.useState("dashboard");ue.useEffect(()=>{f()},[]);const f=async()=>{try{const{data:w}=await ft.auth.signInWithPassword({email:"juan@pertamina.com",password:"123456"});w&&await ft.auth.signOut()}catch{try{await ft.auth.signUp({email:"juan@pertamina.com",password:"123456"}),await ft.auth.signOut()}catch(w){console.log("Default user setup:",w)}}};if(e)return S.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:S.jsxs("div",{className:"text-center",children:[S.jsx("img",{src:"/image copy.png",alt:"PERTAMINA LUBRICANTS",className:"h-24 mx-auto mb-6 animate-pulse"}),S.jsx("p",{className:"text-gray-600",children:"Loading..."})]})});if(!t)return r?S.jsx(Gw,{onToggleLogin:()=>o(!1)}):S.jsx(Hw,{onToggleRegister:()=>o(!0)});const x=()=>{switch(c){case"dashboard":return S.jsx(Eh,{});case"scanner":return S.jsx(Ry,{});case"history":return S.jsx(ky,{});case"reports":return S.jsx(Dy,{});case"edit-profile":return S.jsx(Py,{});default:return S.jsx(Eh,{})}};return S.jsx(oy,{currentPage:c,onNavigate:d,children:x()})}function Ly(){return S.jsx(Ww,{children:S.jsx(My,{})})}X1(document.getElementById("root")).render(S.jsx(ue.StrictMode,{children:S.jsx(Ly,{})}));
